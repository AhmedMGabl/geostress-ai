<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeoStress AI - Industrial Fracture Analysis</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css" rel="stylesheet">
    <link href="/static/css/style.css" rel="stylesheet">
</head>
<body>
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="d-none">
        <div class="spinner-border text-light" role="status" style="width:3rem;height:3rem;">
            <span class="visually-hidden">Loading...</span>
        </div>
        <div class="text-light mt-3 fs-5" id="loading-text">Processing...</div>
    </div>

    <div class="d-flex" style="min-height:100vh">
        <!-- Sidebar -->
        <nav id="sidebar">
            <div class="sidebar-header">
                <h4><i class="bi bi-layers-half"></i> GeoStress AI</h4>
                <small class="text-muted-light">Industrial Fracture Analysis v2.4</small>
            </div>

            <ul class="nav flex-column sidebar-nav">
                <li class="nav-item">
                    <a class="nav-link active" data-tab="data" href="#">
                        <i class="bi bi-table"></i> Data Overview
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-tab="viz" href="#">
                        <i class="bi bi-pie-chart"></i> Visualizations
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-tab="inversion" href="#">
                        <i class="bi bi-gear-wide-connected"></i> Stress Inversion
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-tab="models" href="#">
                        <i class="bi bi-bar-chart-line"></i> Model Comparison
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-tab="shap" href="#">
                        <i class="bi bi-lightbulb"></i> Why It Predicts
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-tab="classify" href="#">
                        <i class="bi bi-diagram-3"></i> ML Classification
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-tab="cluster" href="#">
                        <i class="bi bi-bullseye"></i> Fracture Clustering
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-tab="sensitivity" href="#">
                        <i class="bi bi-sliders"></i> Sensitivity
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-tab="risk" href="#">
                        <i class="bi bi-shield-exclamation"></i> Risk Matrix
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-tab="uncertainty" href="#">
                        <i class="bi bi-clipboard-pulse"></i> Uncertainty Budget
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-tab="wells" href="#">
                        <i class="bi bi-building"></i> Well Comparison
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-tab="report" href="#">
                        <i class="bi bi-file-earmark-text"></i> Well Report
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-tab="feedback" href="#">
                        <i class="bi bi-chat-dots"></i> Feedback
                    </a>
                </li>
            </ul>

            <!-- Parameters -->
            <div class="sidebar-section">
                <h6 class="sidebar-heading">Parameters</h6>
                <div class="mb-2">
                    <label class="form-label-sm">Well</label>
                    <select id="well-select" class="form-select form-select-sm">
                    </select>
                </div>
                <div class="mb-2">
                    <label class="form-label-sm">Stress Regime</label>
                    <select id="regime-select" class="form-select form-select-sm">
                        <option value="auto" selected>Auto (Best Fit)</option>
                        <option value="strike_slip">Strike-Slip</option>
                        <option value="normal">Normal</option>
                        <option value="thrust">Thrust</option>
                    </select>
                </div>
                <div class="mb-2">
                    <label class="form-label-sm">Depth (m)</label>
                    <input type="number" id="depth-input" class="form-control form-control-sm" value="3300" min="500" max="6000">
                </div>
                <div class="mb-2">
                    <label class="form-label-sm">Pore Pressure (MPa)
                        <i class="bi bi-info-circle" title="Hydrostatic estimate used if left empty. Pore pressure reduces effective normal stress on fractures, shifting Mohr circles left."></i>
                    </label>
                    <input type="number" id="pp-input" class="form-control form-control-sm" placeholder="Auto (hydrostatic)" step="0.1" min="0" max="200">
                </div>
            </div>

            <!-- Upload -->
            <div class="sidebar-section">
                <h6 class="sidebar-heading">Upload Data</h6>
                <input type="file" id="file-upload" class="form-control form-control-sm" accept=".xls,.xlsx">
                <div id="upload-status" class="small mt-1"></div>
                <div class="mt-2">
                    <span class="badge" id="data-source-badge">Demo Data</span>
                </div>
                <button id="btn-use-demo" class="btn btn-outline-light btn-sm mt-1 d-none" onclick="switchToDemo()">
                    Back to Demo Data
                </button>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="flex-grow-1">
            <!-- Top bar -->
            <div class="topbar d-flex align-items-center justify-content-between px-4">
                <div>
                    <span id="page-title" class="fw-semibold fs-5">Data Overview</span>
                    <span class="text-muted ms-2" id="fracture-count-badge"></span>
                </div>
                <div class="d-flex align-items-center gap-3">
                    <span class="text-muted small">AI-Powered Geostress Analysis for Oil &amp; Gas</span>
                </div>
            </div>

            <div class="content-area p-4">
                <!-- DATA TAB -->
                <div id="tab-data" class="tab-content active">
                    <div class="row g-3 mb-4">
                        <div class="col-md-3">
                            <div class="metric-card">
                                <div class="metric-label">Total Fractures</div>
                                <div class="metric-value" id="total-fractures">--</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="metric-card">
                                <div class="metric-label">Wells</div>
                                <div class="metric-value" id="total-wells">--</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="metric-card">
                                <div class="metric-label">Fracture Types</div>
                                <div class="metric-value" id="total-types">--</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="metric-card">
                                <div class="metric-label">Data Source</div>
                                <div class="metric-value" id="data-source-label">Demo</div>
                            </div>
                        </div>
                    </div>
                    <!-- Data Quality Banner -->
                    <div id="quality-banner" class="d-none mb-4">
                        <div class="card" id="quality-card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <span><i class="bi bi-shield-check"></i> Data Quality Assessment</span>
                                <span class="badge fs-6" id="quality-grade-badge">--</span>
                            </div>
                            <div class="card-body">
                                <div class="d-flex align-items-center gap-3 mb-2">
                                    <div class="fs-4 fw-bold" id="quality-score">--</div>
                                    <div class="flex-grow-1">
                                        <div class="progress" style="height:8px">
                                            <div class="progress-bar" id="quality-bar" style="width:0%"></div>
                                        </div>
                                    </div>
                                </div>
                                <div id="quality-issues"></div>
                                <div id="quality-warnings"></div>
                                <div id="quality-recommendations"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Auto-Analysis Overview -->
                    <div id="overview-panel" class="d-none mb-4">
                        <div class="card border-dark">
                            <div class="card-header bg-dark text-white">
                                <i class="bi bi-speedometer2"></i> Quick Analysis Overview
                                <button class="btn btn-sm btn-outline-light float-end" onclick="runOverview()">
                                    <i class="bi bi-arrow-clockwise"></i> Refresh
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="row g-3 text-center">
                                    <div class="col"><div class="metric-card"><div class="metric-label">SHmax Direction</div><div class="metric-value" id="ov-shmax">--</div></div></div>
                                    <div class="col"><div class="metric-card"><div class="metric-label">Stress Regime</div><div class="metric-value" id="ov-regime">--</div></div></div>
                                    <div class="col"><div class="metric-card"><div class="metric-label">Critically Stressed</div><div class="metric-value" id="ov-cs">--</div></div></div>
                                    <div class="col"><div class="metric-card"><div class="metric-label">Risk Level</div><div class="metric-value" id="ov-risk">--</div></div></div>
                                    <div class="col"><div class="metric-card"><div class="metric-label">Data Quality</div><div class="metric-value" id="ov-quality">--</div></div></div>
                                    <div class="col"><div class="metric-card"><div class="metric-label">Decision</div><div class="metric-value" id="ov-gonogo">--</div></div></div>
                                </div>
                                <!-- Warnings & Disclaimers -->
                                <div id="ov-warnings" class="mt-3"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Navigation for Stakeholders -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10">
                            <i class="bi bi-signpost-split"></i> Analysis Workflow
                        </div>
                        <div class="card-body">
                            <div class="row g-2 text-center">
                                <div class="col">
                                    <a href="#" data-tab="viz" class="nav-link text-decoration-none">
                                        <div class="p-2 rounded bg-light"><i class="bi bi-pie-chart fs-4 d-block text-primary"></i>
                                        <small>1. Visualize</small></div>
                                    </a>
                                </div>
                                <div class="col">
                                    <a href="#" data-tab="inversion" class="nav-link text-decoration-none">
                                        <div class="p-2 rounded bg-light"><i class="bi bi-gear-wide-connected fs-4 d-block text-primary"></i>
                                        <small>2. Stress Inversion</small></div>
                                    </a>
                                </div>
                                <div class="col">
                                    <a href="#" data-tab="models" class="nav-link text-decoration-none">
                                        <div class="p-2 rounded bg-light"><i class="bi bi-bar-chart-line fs-4 d-block text-primary"></i>
                                        <small>3. Compare Models</small></div>
                                    </a>
                                </div>
                                <div class="col">
                                    <a href="#" data-tab="sensitivity" class="nav-link text-decoration-none">
                                        <div class="p-2 rounded bg-light"><i class="bi bi-sliders fs-4 d-block text-primary"></i>
                                        <small>4. Sensitivity</small></div>
                                    </a>
                                </div>
                                <div class="col">
                                    <a href="#" data-tab="risk" class="nav-link text-decoration-none">
                                        <div class="p-2 rounded bg-light"><i class="bi bi-shield-exclamation fs-4 d-block text-danger"></i>
                                        <small>5. Risk Matrix</small></div>
                                    </a>
                                </div>
                                <div class="col">
                                    <a href="#" data-tab="uncertainty" class="nav-link text-decoration-none">
                                        <div class="p-2 rounded bg-light"><i class="bi bi-clipboard-pulse fs-4 d-block text-info"></i>
                                        <small>6. Uncertainty</small></div>
                                    </a>
                                </div>
                                <div class="col">
                                    <a href="#" data-tab="report" class="nav-link text-decoration-none">
                                        <div class="p-2 rounded bg-light"><i class="bi bi-file-earmark-text fs-4 d-block text-success"></i>
                                        <small>7. Report</small></div>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">Fracture Summary by Well & Type</div>
                        <div class="card-body p-0">
                            <div class="table-responsive">
                                <table class="table table-striped table-hover mb-0" id="summary-table">
                                    <thead>
                                        <tr>
                                            <th>Well</th><th>Fracture Type</th><th>Count</th>
                                            <th>Depth Min (m)</th><th>Depth Max (m)</th>
                                            <th>Mean Azimuth (&deg;)</th><th>Mean Dip (&deg;)</th>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- VISUALIZATIONS TAB -->
                <div id="tab-viz" class="tab-content">
                    <div class="d-flex gap-2 mb-3">
                        <button class="btn btn-primary btn-sm" onclick="loadAllViz()">
                            <i class="bi bi-play-fill"></i> Generate All
                        </button>
                    </div>
                    <div class="row g-3">
                        <div class="col-lg-6">
                            <div class="card">
                                <div class="card-header">Rose Diagram</div>
                                <div class="card-body text-center">
                                    <img id="rose-img" class="plot-img" alt="Click Generate All">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="card">
                                <div class="card-header">Stereonet</div>
                                <div class="card-body text-center">
                                    <img id="stereonet-img" class="plot-img" alt="Click Generate All">
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">Depth Profile</div>
                                <div class="card-body text-center">
                                    <img id="depth-img" class="plot-img" alt="Click Generate All">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- INVERSION TAB (Enhanced) -->
                <div id="tab-inversion" class="tab-content">
                    <div class="d-flex gap-2 mb-3 flex-wrap">
                        <button class="btn btn-primary btn-sm" onclick="runInversion()">
                            <i class="bi bi-play-fill"></i> Run Inversion
                        </button>
                        <button class="btn btn-outline-secondary btn-sm" onclick="runAllRegimes()">
                            <i class="bi bi-arrow-repeat"></i> Compare All Regimes
                        </button>
                        <button class="btn btn-outline-info btn-sm" onclick="runBayesian()">
                            <i class="bi bi-distribute-vertical"></i> Bayesian Uncertainty
                        </button>
                        <button class="btn btn-outline-success btn-sm" onclick="exportInversion()">
                            <i class="bi bi-download"></i> Export Results (CSV)
                        </button>
                        <button class="btn btn-outline-success btn-sm" onclick="exportData()">
                            <i class="bi bi-filetype-csv"></i> Export Raw Data
                        </button>
                    </div>

                    <!-- Auto Regime Detection Banner -->
                    <div id="auto-regime-banner" class="d-none mb-4">
                        <div class="card border-success">
                            <div class="card-header bg-success bg-opacity-10">
                                <i class="bi bi-robot"></i> Automatic Regime Detection
                                <span class="badge ms-2" id="auto-regime-confidence"></span>
                            </div>
                            <div class="card-body">
                                <p id="auto-regime-summary" class="mb-3"></p>
                                <div class="table-responsive">
                                    <table class="table table-sm table-striped mb-0" id="auto-regime-table">
                                        <thead><tr>
                                            <th>Regime</th><th>Misfit</th>
                                            <th>&sigma;1</th><th>&sigma;3</th>
                                            <th>R</th><th>SHmax</th><th>&mu;</th>
                                            <th></th>
                                        </tr></thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Bayesian MCMC Results -->
                    <div id="bayesian-results" class="d-none mb-4">
                        <div class="card border-info">
                            <div class="card-header bg-info bg-opacity-10">
                                <i class="bi bi-distribute-vertical"></i> Bayesian MCMC Uncertainty Bounds
                                <span class="badge bg-info ms-2" id="bayes-convergence"></span>
                            </div>
                            <div class="card-body">
                                <p class="small text-muted" id="bayes-summary"></p>
                                <div id="bayes-params-body"></div>
                                <div class="mt-2 small text-muted" id="bayes-meta"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Results metrics -->
                    <div id="inversion-results" class="d-none">
                        <div class="row g-3 mb-4">
                            <div class="col-md-2"><div class="metric-card"><div class="metric-label">&sigma;1 (MPa)</div><div class="metric-value" id="inv-sigma1">--</div></div></div>
                            <div class="col-md-2"><div class="metric-card"><div class="metric-label">&sigma;2 (MPa)</div><div class="metric-value" id="inv-sigma2">--</div></div></div>
                            <div class="col-md-2"><div class="metric-card"><div class="metric-label">&sigma;3 (MPa)</div><div class="metric-value" id="inv-sigma3">--</div></div></div>
                            <div class="col-md-2"><div class="metric-card"><div class="metric-label">R Ratio</div><div class="metric-value" id="inv-R">--</div></div></div>
                            <div class="col-md-2"><div class="metric-card"><div class="metric-label">SHmax (&deg;)</div><div class="metric-value" id="inv-shmax">--</div></div></div>
                            <div class="col-md-2"><div class="metric-card"><div class="metric-label">Pore Pressure</div><div class="metric-value" id="inv-pp">--</div></div></div>
                        </div>

                        <!-- Risk Assessment Banner -->
                        <div id="risk-banner" class="alert mb-4 d-none">
                            <h5 class="alert-heading" id="risk-title"></h5>
                            <div id="risk-body"></div>
                        </div>

                        <!-- Stakeholder Interpretation -->
                        <div id="interpretation-section" class="mb-4 d-none">
                            <div class="card border-primary">
                                <div class="card-header bg-primary text-white">
                                    <i class="bi bi-lightbulb"></i> Decision Support - What This Means
                                </div>
                                <div class="card-body" id="interpretation-body"></div>
                            </div>
                        </div>

                        <!-- Risk Categories -->
                        <div class="row g-3 mb-4">
                            <div class="col-md-4">
                                <div class="metric-card" style="border-left:4px solid #dc3545">
                                    <div class="metric-label">High Risk Fractures</div>
                                    <div class="metric-value text-danger" id="inv-high-risk">--</div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="metric-card" style="border-left:4px solid #ffc107">
                                    <div class="metric-label">Moderate Risk</div>
                                    <div class="metric-value text-warning" id="inv-mod-risk">--</div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="metric-card" style="border-left:4px solid #198754">
                                    <div class="metric-label">Low Risk</div>
                                    <div class="metric-value text-success" id="inv-low-risk">--</div>
                                </div>
                            </div>
                        </div>

                        <div class="row g-3">
                            <div class="col-lg-6">
                                <div class="card"><div class="card-header">Mohr Circle</div>
                                <div class="card-body text-center"><img id="mohr-img" class="plot-img"></div></div>
                            </div>
                            <div class="col-lg-6">
                                <div class="card"><div class="card-header">Slip Tendency</div>
                                <div class="card-body text-center"><img id="slip-img" class="plot-img"></div></div>
                            </div>
                            <div class="col-lg-6">
                                <div class="card"><div class="card-header">Dilation Tendency</div>
                                <div class="card-body text-center"><img id="dilation-img" class="plot-img"></div></div>
                            </div>
                            <div class="col-lg-6">
                                <div class="card"><div class="card-header">Analysis Dashboard</div>
                                <div class="card-body text-center"><img id="dashboard-img" class="plot-img"></div></div>
                            </div>
                        </div>
                    </div>

                    <!-- Regime comparison table -->
                    <div id="regime-comparison" class="d-none mt-4">
                        <div class="card">
                            <div class="card-header">Regime Comparison</div>
                            <div class="card-body p-0">
                                <table class="table table-striped mb-0" id="regime-table">
                                    <thead><tr>
                                        <th>Regime</th><th>&sigma;1</th><th>&sigma;2</th><th>&sigma;3</th>
                                        <th>R</th><th>SHmax</th><th>&mu;</th><th>Crit. Stressed</th>
                                    </tr></thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- MODEL COMPARISON TAB (NEW) -->
                <div id="tab-models" class="tab-content">
                    <div class="d-flex gap-2 mb-3">
                        <button class="btn btn-primary btn-sm" onclick="runModelComparison(false)">
                            <i class="bi bi-play-fill"></i> Full Comparison
                        </button>
                        <button class="btn btn-outline-primary btn-sm" onclick="runModelComparison(true)">
                            <i class="bi bi-lightning"></i> Quick Compare (~3x faster)
                        </button>
                    </div>
                    <p class="text-muted small">Compares Random Forest, Gradient Boosting, XGBoost, LightGBM, SVM, Neural Network, and <strong>Stacking Ensemble</strong> (meta-learner) on fracture classification using 21 physics-informed features. Includes conformal prediction confidence.</p>

                    <div id="model-results" class="d-none">
                        <!-- Summary metrics -->
                        <div class="row g-3 mb-4">
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-label">Best Model</div>
                                    <div class="metric-value" id="mc-best-model">--</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-label">Best Accuracy</div>
                                    <div class="metric-value" id="mc-best-acc">--</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-label">Model Agreement</div>
                                    <div class="metric-value" id="mc-agreement">--</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="metric-card" style="border-left:4px solid #ffc107">
                                    <div class="metric-label">Low Confidence Samples</div>
                                    <div class="metric-value" id="mc-low-conf">--</div>
                                </div>
                            </div>
                        </div>

                        <!-- Model agreement explanation -->
                        <div id="mc-uncertainty-alert" class="alert alert-info mb-4 d-none">
                            <i class="bi bi-info-circle"></i>
                            <strong>What does Model Agreement mean?</strong>
                            <span id="mc-uncertainty-text"></span>
                        </div>

                        <!-- Ranking table -->
                        <div class="card mb-4">
                            <div class="card-header">Model Ranking (by Cross-Validated Accuracy)</div>
                            <div class="card-body p-0">
                                <table class="table table-striped mb-0" id="mc-ranking-table">
                                    <thead><tr>
                                        <th>Rank</th><th>Model</th><th>CV Accuracy</th><th>F1 Score</th>
                                    </tr></thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Conformal confidence -->
                        <div id="mc-conformal-section" class="d-none mb-4">
                            <div class="card border-info">
                                <div class="card-header bg-info text-white">
                                    <i class="bi bi-shield-check"></i> Prediction Confidence (Conformal Calibration)
                                </div>
                                <div class="card-body">
                                    <div class="row g-3">
                                        <div class="col-md-3">
                                            <div class="text-center p-2 bg-light rounded">
                                                <div class="small text-muted">Mean Confidence</div>
                                                <div class="fw-bold fs-5" id="mc-conf-mean">--</div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="text-center p-2 bg-light rounded">
                                                <div class="small text-muted">High Confidence (&ge;80%)</div>
                                                <div class="fw-bold fs-5 text-success" id="mc-conf-high">--</div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="text-center p-2 bg-light rounded">
                                                <div class="small text-muted">Uncertain (&lt;50%)</div>
                                                <div class="fw-bold fs-5 text-danger" id="mc-conf-uncertain">--</div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="text-center p-2 bg-light rounded">
                                                <div class="small text-muted">Min Confidence</div>
                                                <div class="fw-bold fs-5" id="mc-conf-min">--</div>
                                            </div>
                                        </div>
                                    </div>
                                    <p class="small text-muted mt-2 mb-0">
                                        <strong>What this means:</strong> Conformal prediction provides calibrated confidence scores.
                                        Fractures with &lt;50% confidence should be reviewed by an expert before operational decisions.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Per-model details -->
                        <div id="mc-details-container"></div>
                    </div>
                </div>

                <!-- SHAP EXPLAINABILITY TAB (NEW) -->
                <div id="tab-shap" class="tab-content">
                    <div class="d-flex gap-2 mb-3">
                        <select id="shap-classifier-select" class="form-select form-select-sm" style="width:auto">
                            <option value="gradient_boosting" selected>Gradient Boosting</option>
                            <option value="random_forest">Random Forest</option>
                            <option value="xgboost">XGBoost</option>
                            <option value="lightgbm">LightGBM</option>
                        </select>
                        <button class="btn btn-primary btn-sm" onclick="runShapExplanation()">
                            <i class="bi bi-play-fill"></i> Explain Predictions
                        </button>
                    </div>
                    <p class="text-muted small">
                        Uses SHAP (SHapley Additive exPlanations) to show <strong>why</strong> the model makes its predictions.
                        Each feature gets an importance score based on its actual contribution, not just correlation.
                        This helps stakeholders understand and trust the AI's fracture classifications.
                    </p>

                    <div id="shap-results" class="d-none">
                        <!-- SHAP summary metrics -->
                        <div class="row g-3 mb-4">
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-label">Explanation Method</div>
                                    <div class="metric-value" id="shap-method">--</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-label">Model Used</div>
                                    <div class="metric-value" id="shap-model">--</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-label">Features Analyzed</div>
                                    <div class="metric-value" id="shap-n-features">--</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-label">Samples Explained</div>
                                    <div class="metric-value" id="shap-n-samples">--</div>
                                </div>
                            </div>
                        </div>

                        <!-- Global feature importance -->
                        <div class="row g-3 mb-4">
                            <div class="col-lg-7">
                                <div class="card">
                                    <div class="card-header">
                                        <i class="bi bi-bar-chart"></i> Global Feature Importance (What Drives Predictions Most)
                                    </div>
                                    <div class="card-body" id="shap-global-container"></div>
                                </div>
                            </div>
                            <div class="col-lg-5">
                                <div class="card">
                                    <div class="card-header">
                                        <i class="bi bi-info-circle"></i> What This Means for Decisions
                                    </div>
                                    <div class="card-body" id="shap-explanation-text">
                                        <p class="text-muted">Run the explanation to see feature importance insights.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Per-class importance -->
                        <div id="shap-class-section" class="d-none mb-4">
                            <div class="card">
                                <div class="card-header">
                                    <i class="bi bi-diagram-3"></i> What Drives Each Fracture Type Classification
                                </div>
                                <div class="card-body" id="shap-class-container"></div>
                            </div>
                        </div>

                        <!-- Sample explanations -->
                        <div id="shap-sample-section" class="d-none">
                            <div class="card">
                                <div class="card-header">
                                    <i class="bi bi-search"></i> Individual Fracture Explanations (Most Distinctive Samples)
                                </div>
                                <div class="card-body" id="shap-sample-container"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- CLASSIFICATION TAB (Enhanced) -->
                <div id="tab-classify" class="tab-content">
                    <div class="d-flex gap-2 mb-3">
                        <select id="classifier-select" class="form-select form-select-sm" style="width:auto">
                            <option value="random_forest">Random Forest</option>
                            <option value="gradient_boosting">Gradient Boosting</option>
                            <option value="xgboost">XGBoost</option>
                            <option value="lightgbm">LightGBM</option>
                            <option value="svm">SVM</option>
                            <option value="mlp">Neural Network</option>
                        </select>
                        <button class="btn btn-primary btn-sm" onclick="runClassification()">
                            <i class="bi bi-play-fill"></i> Run Classification
                        </button>
                    </div>
                    <p class="text-muted small">Uses enhanced physics-informed features including pore pressure, overburden stress, temperature, fracture density, and fabric strength.</p>

                    <div id="classify-results" class="d-none">
                        <div class="row g-3 mb-4">
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-label">CV Accuracy</div>
                                    <div class="metric-value" id="clf-accuracy">--</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-label">Std Deviation</div>
                                    <div class="metric-value" id="clf-std">--</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-label">F1 Score</div>
                                    <div class="metric-value" id="clf-f1">--</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-label">Classifier</div>
                                    <div class="metric-value" id="clf-type">--</div>
                                </div>
                            </div>
                        </div>
                        <div class="row g-3">
                            <div class="col-lg-6">
                                <div class="card">
                                    <div class="card-header">Feature Importances</div>
                                    <div class="card-body" id="feat-imp-container"></div>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="card">
                                    <div class="card-header">Confusion Matrix</div>
                                    <div class="card-body p-0">
                                        <div class="table-responsive">
                                            <table class="table table-bordered mb-0 table-sm" id="confusion-table">
                                                <thead></thead><tbody></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- CLUSTERING TAB -->
                <div id="tab-cluster" class="tab-content">
                    <div class="d-flex gap-2 mb-3">
                        <select id="n-clusters-select" class="form-select form-select-sm" style="width:auto">
                            <option value="auto">Auto-detect</option>
                            <option value="2">2 clusters</option>
                            <option value="3">3 clusters</option>
                            <option value="4">4 clusters</option>
                            <option value="5">5 clusters</option>
                            <option value="6">6 clusters</option>
                        </select>
                        <button class="btn btn-primary btn-sm" onclick="runClustering()">
                            <i class="bi bi-play-fill"></i> Run Clustering
                        </button>
                    </div>
                    <div id="cluster-results" class="d-none">
                        <div class="row g-3 mb-3">
                            <div class="col-md-4">
                                <div class="metric-card">
                                    <div class="metric-label">Fracture Sets Found</div>
                                    <div class="metric-value" id="n-clusters-val">--</div>
                                </div>
                            </div>
                        </div>
                        <div class="row g-3">
                            <div class="col-lg-6">
                                <div class="card">
                                    <div class="card-header">Cluster Stereonet</div>
                                    <div class="card-body text-center">
                                        <img id="cluster-img" class="plot-img">
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="card">
                                    <div class="card-header">Cluster Statistics</div>
                                    <div class="card-body p-0">
                                        <table class="table table-striped mb-0 table-sm" id="cluster-stats-table">
                                            <thead><tr><th>Set</th><th>Mean Az</th><th>Mean Dip</th><th>Count</th></tr></thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- FEEDBACK TAB (NEW) -->
                <div id="tab-feedback" class="tab-content">
                    <div class="row g-3 mb-4">
                        <div class="col-lg-6">
                            <div class="card">
                                <div class="card-header"><i class="bi bi-chat-dots"></i> Submit Feedback</div>
                                <div class="card-body">
                                    <p class="text-muted small">Help improve GeoStress AI by rating analysis accuracy. Your feedback trains future model versions.</p>
                                    <div class="mb-3">
                                        <label class="form-label">Analysis Type</label>
                                        <select id="fb-type" class="form-select form-select-sm">
                                            <option value="inversion">Stress Inversion</option>
                                            <option value="classification">Fracture Classification</option>
                                            <option value="clustering">Fracture Clustering</option>
                                            <option value="critically_stressed">Critically Stressed Analysis</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Accuracy Rating</label>
                                        <div id="fb-stars" class="d-flex gap-1">
                                            <button class="btn btn-outline-warning btn-sm fb-star" data-val="1">1</button>
                                            <button class="btn btn-outline-warning btn-sm fb-star" data-val="2">2</button>
                                            <button class="btn btn-warning btn-sm fb-star active" data-val="3">3</button>
                                            <button class="btn btn-outline-warning btn-sm fb-star" data-val="4">4</button>
                                            <button class="btn btn-outline-warning btn-sm fb-star" data-val="5">5</button>
                                        </div>
                                        <small class="text-muted">1 = very inaccurate, 5 = very accurate</small>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Comments (optional)</label>
                                        <textarea id="fb-comment" class="form-control form-control-sm" rows="3" placeholder="What was inaccurate? What would improve the analysis?"></textarea>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Your Name (optional)</label>
                                        <input type="text" id="fb-name" class="form-control form-control-sm" placeholder="Anonymous">
                                    </div>
                                    <button class="btn btn-primary btn-sm" onclick="submitFeedback()">
                                        <i class="bi bi-send"></i> Submit Feedback
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="card">
                                <div class="card-header"><i class="bi bi-graph-up"></i> Feedback Summary</div>
                                <div class="card-body" id="fb-summary-body">
                                    <p class="text-muted">No feedback collected yet. Submit feedback to track accuracy over time.</p>
                                </div>
                            </div>

                            <!-- Actionable Insights -->
                            <div id="fb-insights-section" class="d-none mt-3">
                                <div class="card border-info">
                                    <div class="card-header bg-info text-white">
                                        <i class="bi bi-lightbulb"></i> Actionable Insights
                                    </div>
                                    <div class="card-body" id="fb-insights-body"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Label Correction Section -->
                    <div class="row g-3 mb-4">
                        <div class="col-lg-6">
                            <div class="card border-warning">
                                <div class="card-header">
                                    <i class="bi bi-pencil-square"></i> Correct a Classification
                                    <small class="text-muted ms-2">(Closes the feedback loop)</small>
                                </div>
                                <div class="card-body">
                                    <p class="text-muted small">
                                        When you see a misclassified fracture, submit the correct label here.
                                        After collecting corrections, click "Retrain" to update the model.
                                    </p>
                                    <div class="row g-2">
                                        <div class="col-md-4">
                                            <label class="form-label small">Fracture Index</label>
                                            <input type="number" id="corr-idx" class="form-control form-control-sm" value="0" min="0">
                                        </div>
                                        <div class="col-md-4">
                                            <label class="form-label small">Original Type</label>
                                            <select id="corr-original" class="form-select form-select-sm">
                                                <option value="">Model's prediction</option>
                                                <option value="Boundary">Boundary</option>
                                                <option value="Brecciated">Brecciated</option>
                                                <option value="Continuous">Continuous</option>
                                                <option value="Discontinuous">Discontinuous</option>
                                                <option value="Vuggy">Vuggy</option>
                                            </select>
                                        </div>
                                        <div class="col-md-4">
                                            <label class="form-label small">Correct Type</label>
                                            <select id="corr-correct" class="form-select form-select-sm">
                                                <option value="Boundary">Boundary</option>
                                                <option value="Brecciated">Brecciated</option>
                                                <option value="Continuous">Continuous</option>
                                                <option value="Discontinuous">Discontinuous</option>
                                                <option value="Vuggy">Vuggy</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="mt-2 d-flex gap-2">
                                        <button class="btn btn-warning btn-sm" onclick="submitCorrection()">
                                            <i class="bi bi-check-lg"></i> Submit Correction
                                        </button>
                                        <span class="small text-muted align-self-center" id="corr-count">0 corrections pending</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="card">
                                <div class="card-header">
                                    <i class="bi bi-arrow-repeat"></i> Retrain with Expert Corrections
                                </div>
                                <div class="card-body">
                                    <p class="text-muted small">
                                        After submitting label corrections, retrain the model to incorporate
                                        expert knowledge. This is how the AI improves from human feedback.
                                    </p>
                                    <button class="btn btn-success btn-sm" onclick="retrainModel()" id="btn-retrain" disabled>
                                        <i class="bi bi-arrow-repeat"></i> Retrain Model
                                    </button>
                                    <div id="retrain-result" class="mt-2 d-none"></div>
                                </div>
                            </div>
                            <div class="card mt-3">
                                <div class="card-header"><i class="bi bi-question-circle"></i> How the Feedback Loop Works</div>
                                <div class="card-body">
                                    <ol class="mb-0 small">
                                        <li><strong>Rate analyses</strong> to track model accuracy over time</li>
                                        <li><strong>Correct labels</strong> when you spot misclassified fractures</li>
                                        <li><strong>Retrain</strong> to incorporate corrections into the model</li>
                                        <li><strong>Compare</strong> before/after accuracy to verify improvement</li>
                                        <li><strong>Repeat</strong> as more field data becomes available</li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Active Learning Section -->
                    <div class="card mt-4 border-info">
                        <div class="card-header bg-info text-white">
                            <i class="bi bi-bullseye"></i> Active Learning  Which Fractures to Review Next
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">
                                The AI identifies fractures it's most uncertain about. Reviewing these
                                gives the biggest improvement per expert-hour  this is human-in-the-loop learning.
                            </p>
                            <div class="d-flex gap-2 mb-3">
                                <button class="btn btn-info btn-sm" onclick="runActiveLearning()">
                                    <i class="bi bi-bullseye"></i> Find Uncertain Fractures
                                </button>
                            </div>

                            <div id="al-results" class="d-none">
                                <div class="mb-3" id="al-summary-text"></div>

                                <!-- Learning Curve -->
                                <div id="al-learning-curve" class="d-none mb-3">
                                    <h6><i class="bi bi-graph-up-arrow"></i> Learning Curve</h6>
                                    <div id="al-curve-body"></div>
                                </div>

                                <!-- Coverage Gaps -->
                                <div id="al-coverage" class="d-none mb-3">
                                    <h6><i class="bi bi-exclamation-diamond"></i> Data Coverage Gaps</h6>
                                    <div id="al-coverage-body"></div>
                                </div>

                                <!-- Suggested Samples -->
                                <div id="al-suggestions" class="d-none">
                                    <h6><i class="bi bi-list-check"></i> Fractures for Expert Review</h6>
                                    <div class="table-responsive">
                                        <table class="table table-sm table-hover">
                                            <thead><tr>
                                                <th>#</th><th>Well</th><th>Depth</th><th>Az</th><th>Dip</th>
                                                <th>Current Label</th><th>Predicted</th><th>Confidence</th><th>Mismatch</th>
                                            </tr></thead>
                                            <tbody id="al-table-body"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!--  Sensitivity Tab  -->
                <div id="tab-sensitivity" class="tab-content">
                    <h5 class="mb-3">Parameter Sensitivity Analysis</h5>
                    <p class="text-muted">How do results change when assumptions vary? Essential for understanding how robust your conclusions are.</p>

                    <button class="btn btn-primary btn-sm mb-3" onclick="runSensitivity()">
                        <i class="bi bi-sliders"></i> Run Sensitivity Analysis
                    </button>

                    <!-- Tornado Diagram -->
                    <div id="sens-tornado" class="d-none mb-4">
                        <div class="card">
                            <div class="card-header"><i class="bi bi-tornado"></i> Tornado Diagram  Impact on Critically Stressed %</div>
                            <div class="card-body" id="sens-tornado-body"></div>
                        </div>
                    </div>

                    <!-- Risk Implications -->
                    <div id="sens-risks" class="d-none mb-4">
                        <div class="card border-warning">
                            <div class="card-header bg-warning text-dark"><i class="bi bi-exclamation-triangle"></i> Risk Implications</div>
                            <div class="card-body" id="sens-risks-body"></div>
                        </div>
                    </div>

                    <!-- Regime Comparison Table -->
                    <div id="sens-regime" class="d-none mb-4">
                        <div class="card">
                            <div class="card-header"><i class="bi bi-arrows-angle-expand"></i> Regime Comparison</div>
                            <div class="card-body" id="sens-regime-body"></div>
                        </div>
                    </div>

                    <!-- Friction & Pore Pressure Detail -->
                    <div class="row g-3">
                        <div class="col-lg-6">
                            <div id="sens-friction" class="d-none">
                                <div class="card">
                                    <div class="card-header"><i class="bi bi-speedometer2"></i> Friction Coefficient Sensitivity</div>
                                    <div class="card-body" id="sens-friction-body"></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div id="sens-pp" class="d-none">
                                <div class="card">
                                    <div class="card-header"><i class="bi bi-droplet"></i> Pore Pressure Sensitivity</div>
                                    <div class="card-body" id="sens-pp-body"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!--  Risk Matrix Tab  -->
                <div id="tab-risk" class="tab-content">
                    <h5 class="mb-3">Operational Risk Assessment</h5>
                    <p class="text-muted">GO / NO-GO decision framework combining all analysis results.</p>

                    <button class="btn btn-primary btn-sm mb-3" onclick="runRiskMatrix()">
                        <i class="bi bi-shield-check"></i> Compute Risk Matrix
                    </button>

                    <!-- Overall Risk Banner -->
                    <div id="risk-overall" class="d-none mb-4">
                        <div class="card" id="risk-overall-card">
                            <div class="card-body text-center py-4">
                                <h2 id="risk-go-nogo" class="mb-2"></h2>
                                <div id="risk-score-badge" class="fs-4 fw-bold mb-2"></div>
                                <p id="risk-detail" class="text-muted mb-0"></p>
                            </div>
                        </div>
                    </div>

                    <!-- Risk Factors Table -->
                    <div id="risk-factors" class="d-none">
                        <div class="card">
                            <div class="card-header"><i class="bi bi-list-check"></i> Risk Factor Breakdown</div>
                            <div class="card-body">
                                <table class="table table-hover table-sm">
                                    <thead>
                                        <tr>
                                            <th>Risk Factor</th>
                                            <th>Score</th>
                                            <th>Detail</th>
                                            <th>Mitigation</th>
                                        </tr>
                                    </thead>
                                    <tbody id="risk-factors-tbody"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!--  Uncertainty Budget Tab  -->
                <div id="tab-uncertainty" class="tab-content">
                    <h5 class="mb-3">Uncertainty Budget</h5>
                    <p class="text-muted">Where does the most uncertainty come from? This tells you what data to acquire next to get the biggest improvement in prediction confidence.</p>

                    <div class="d-flex gap-2 mb-3">
                        <button class="btn btn-primary btn-sm" onclick="runUncertaintyBudget(false)">
                            <i class="bi bi-clipboard-pulse"></i> Compute Budget
                        </button>
                        <button class="btn btn-outline-info btn-sm" onclick="runUncertaintyBudget(true)">
                            <i class="bi bi-distribute-vertical"></i> Include Bayesian (slower)
                        </button>
                    </div>

                    <!-- Overall Uncertainty Banner -->
                    <div id="ub-overall" class="d-none mb-4">
                        <div class="card" id="ub-overall-card">
                            <div class="card-body text-center py-4">
                                <h2 id="ub-level" class="mb-2"></h2>
                                <div class="fs-4 fw-bold mb-2" id="ub-total-score"></div>
                                <p id="ub-dominant" class="text-muted mb-0"></p>
                            </div>
                        </div>
                    </div>

                    <!-- Stakeholder Summary -->
                    <div id="ub-summary" class="d-none mb-4">
                        <div class="card border-primary">
                            <div class="card-header bg-primary text-white">
                                <i class="bi bi-megaphone"></i> What This Means
                            </div>
                            <div class="card-body" id="ub-summary-body"></div>
                        </div>
                    </div>

                    <!-- Source Rankings -->
                    <div id="ub-sources" class="d-none mb-4">
                        <div class="card">
                            <div class="card-header"><i class="bi bi-sort-down"></i> Uncertainty Sources (Ranked by Impact)</div>
                            <div class="card-body" id="ub-sources-body"></div>
                        </div>
                    </div>

                    <!-- Recommended Actions -->
                    <div id="ub-actions" class="d-none">
                        <div class="card border-success">
                            <div class="card-header bg-success text-white">
                                <i class="bi bi-signpost-split"></i> Recommended Actions (Priority Order)
                            </div>
                            <div class="card-body" id="ub-actions-body"></div>
                        </div>
                    </div>
                </div>

                <!--  Well Comparison Tab  -->
                <div id="tab-wells" class="tab-content">
                    <h5 class="mb-3">Multi-Well Comparison</h5>
                    <p class="text-muted">Compare stress fields, model performance, and data quality across wells.</p>

                    <button class="btn btn-primary btn-sm mb-3" onclick="runWellComparison()">
                        <i class="bi bi-building"></i> Compare Wells
                    </button>

                    <!-- Consistency Checks -->
                    <div id="wells-consistency" class="d-none mb-4">
                        <div class="card">
                            <div class="card-header"><i class="bi bi-check2-all"></i> Consistency Checks</div>
                            <div class="card-body" id="wells-consistency-body"></div>
                        </div>
                    </div>

                    <!-- Well Results Table -->
                    <div id="wells-table" class="d-none mb-4">
                        <div class="card">
                            <div class="card-header"><i class="bi bi-table"></i> Per-Well Results</div>
                            <div class="card-body" id="wells-table-body"></div>
                        </div>
                    </div>

                    <!-- Cross-Validation -->
                    <div id="wells-crossval" class="d-none">
                        <div class="card">
                            <div class="card-header"><i class="bi bi-arrow-left-right"></i> Cross-Well Classification Accuracy</div>
                            <div class="card-body" id="wells-crossval-body"></div>
                        </div>
                    </div>
                </div>

                <!--  Well Report Tab  -->
                <div id="tab-report" class="tab-content">
                    <h5 class="mb-3">Stakeholder Well Report</h5>
                    <p class="text-muted">Generate a comprehensive report for printing or stakeholder presentation.</p>

                    <div class="d-flex gap-2 mb-3">
                        <button class="btn btn-primary btn-sm" onclick="generateReport()">
                            <i class="bi bi-file-earmark-text"></i> Generate Report
                        </button>
                        <button class="btn btn-outline-secondary btn-sm d-none" id="btn-print-report" onclick="window.print()">
                            <i class="bi bi-printer"></i> Print Report
                        </button>
                    </div>

                    <div id="report-content" class="d-none">
                        <!-- Executive Summary -->
                        <div class="card mb-3 border-primary">
                            <div class="card-header bg-primary text-white"><i class="bi bi-file-text"></i> Executive Summary</div>
                            <div class="card-body fs-6" id="report-exec-summary"></div>
                        </div>

                        <!-- Stress State -->
                        <div class="card mb-3">
                            <div class="card-header"><i class="bi bi-arrows-angle-expand"></i> Stress State</div>
                            <div class="card-body" id="report-stress"></div>
                        </div>

                        <!-- Risk Assessment -->
                        <div class="card mb-3">
                            <div class="card-header"><i class="bi bi-shield-exclamation"></i> Risk Assessment</div>
                            <div class="card-body" id="report-risk"></div>
                        </div>

                        <!-- Recommendations -->
                        <div class="card mb-3 border-success">
                            <div class="card-header bg-success text-white"><i class="bi bi-signpost-split"></i> Operational Recommendations</div>
                            <div class="card-body" id="report-recommendations"></div>
                        </div>

                        <!-- Data Quality -->
                        <div class="card mb-3">
                            <div class="card-header"><i class="bi bi-clipboard-data"></i> Data Quality</div>
                            <div class="card-body" id="report-quality"></div>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <!-- Toast -->
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index:9999">
        <div id="toast" class="toast" role="alert">
            <div class="toast-header">
                <strong class="me-auto" id="toast-title">GeoStress AI</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
            </div>
            <div class="toast-body" id="toast-body"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/app.js"></script>
</body>
</html>
