<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeoStress AI - Industrial Fracture Analysis</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 40 40'%3E%3Ccircle cx='20' cy='20' r='18' fill='%231a2332'/%3E%3Cpath d='M8 22 Q14 18 20 20 Q26 22 32 18' stroke='%23d97706' stroke-width='3' fill='none'/%3E%3Cline x1='20' y1='10' x2='20' y2='30' stroke='%23f59e0b' stroke-width='2' stroke-dasharray='2,3' opacity='0.5'/%3E%3Cpolygon points='18,10 22,10 20,6' fill='%23f59e0b'/%3E%3C/svg%3E">
    <meta name="description" content="AI-powered geostress inversion and fracture analysis for oil and gas operations. Bayesian-optimized ML models with physics validation.">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="/static/css/style.css" rel="stylesheet">
</head>
<body>
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="d-none">
        <div class="spinner-border text-light" role="status" style="width:3rem;height:3rem;">
            <span class="visually-hidden">Loading...</span>
        </div>
        <div class="text-light mt-3 fs-5" id="loading-text">Processing...</div>
        <div class="progress mt-3" style="width:300px;height:8px;display:none" id="loading-progress">
            <div class="progress-bar bg-info" id="loading-bar" style="width:0%"></div>
        </div>
        <div class="text-light small mt-1" id="loading-detail"></div>
    </div>

    <div class="d-flex" style="min-height:100vh">
        <!-- Sidebar -->
        <nav id="sidebar">
            <div class="sidebar-header">
                <div class="d-flex align-items-center gap-2">
                    <svg width="40" height="40" viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg" class="logo-mark">
                        <defs>
                            <linearGradient id="lg1" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#d97706"/><stop offset="100%" stop-color="#fbbf24"/></linearGradient>
                            <filter id="glow"><feGaussianBlur stdDeviation="1.5" result="blur"/><feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
                        </defs>
                        <circle cx="22" cy="22" r="20" fill="url(#lg1)" opacity="0.12"/>
                        <circle cx="22" cy="22" r="20" fill="none" stroke="#d97706" stroke-width="1" opacity="0.3"/>
                        <!-- Geological strata layers -->
                        <path d="M6 30 Q12 26 22 28 Q32 30 38 26" stroke="#d97706" stroke-width="1.8" fill="none" opacity="0.4"/>
                        <path d="M6 24 Q12 20 22 22 Q32 24 38 20" stroke="#d97706" stroke-width="2" fill="none" opacity="0.6"/>
                        <path d="M6 18 Q12 14 22 16 Q32 18 38 14" stroke="#d97706" stroke-width="2.2" fill="none" opacity="0.85"/>
                        <!-- Stress arrow (σ1) -->
                        <line x1="22" y1="9" x2="22" y2="35" stroke="#fbbf24" stroke-width="2" stroke-dasharray="2,3" opacity="0.35" filter="url(#glow)"/>
                        <polygon points="19.5,9 24.5,9 22,4" fill="#fbbf24" filter="url(#glow)"/>
                        <!-- SHmax indicator -->
                        <circle cx="22" cy="22" r="3" fill="#fbbf24" opacity="0.5"/>
                        <circle cx="22" cy="22" r="1.5" fill="#fbbf24"/>
                    </svg>
                    <div>
                        <h4 class="mb-0" style="color:#f1f5f9;font-size:1.15rem;letter-spacing:-0.03em;font-weight:700">GeoStress<span style="color:#fbbf24;font-weight:400"> AI</span></h4>
                        <small class="text-muted-light" style="font-size:0.65rem;letter-spacing:0.04em;text-transform:uppercase">Industrial Fracture Analysis</small>
                    </div>
                </div>
                <div class="d-flex justify-content-between align-items-center mt-1">
                    <small class="text-muted-light"><i class="bi bi-clock"></i> <span id="response-time">-</span></small>
                    <small class="text-muted-light" style="font-size:0.6rem;opacity:0.6">v3.87</small>
                </div>
            </div>

            <!-- Focus Mode toggle -->
            <div class="px-2 pb-2">
                <button id="focus-mode-btn" class="btn btn-outline-secondary btn-sm w-100"
                    onclick="toggleFocusMode()"
                    title="Focus Mode hides advanced tabs so you can find core features faster">
                    <i class="bi bi-funnel" id="focus-icon"></i>
                    <span id="focus-label">Focus Mode</span>
                </button>
            </div>

            <ul class="nav flex-column sidebar-nav">
                <!-- Primary -->
                <li class="nav-item">
                    <a class="nav-link active" data-tab="executive" href="#">
                        <i class="bi bi-speedometer2"></i> Executive Summary
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-tab="performance" href="#">
                        <i class="bi bi-trophy"></i> Performance & Trust
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-tab="data" href="#">
                        <i class="bi bi-table"></i> Data Overview
                    </a>
                </li>

                <!-- Analysis Group -->
                <li class="nav-item sidebar-group-header" onclick="toggleSidebarGroup(this)">
                    <span class="nav-link" style="cursor:pointer">
                        <i class="bi bi-chevron-right sidebar-arrow"></i> Analysis
                        <span class="badge bg-secondary ms-auto" style="font-size:0.6rem">7</span>
                    </span>
                </li>
                <div class="sidebar-group collapsed">
                    <li class="nav-item"><a class="nav-link" data-tab="inversion" href="#"><i class="bi bi-gear-wide-connected"></i> Stress Inversion</a></li>
                    <li class="nav-item"><a class="nav-link" data-tab="viz" href="#"><i class="bi bi-pie-chart"></i> Visualizations</a></li>
                    <li class="nav-item"><a class="nav-link" data-tab="classify" href="#"><i class="bi bi-diagram-3"></i> ML Classification</a></li>
                    <li class="nav-item"><a class="nav-link" data-tab="models" href="#"><i class="bi bi-bar-chart-line"></i> Model Comparison</a></li>
                    <li class="nav-item" data-expert="true"><a class="nav-link" data-tab="shap" href="#"><i class="bi bi-lightbulb"></i> Why It Predicts</a></li>
                    <li class="nav-item" data-expert="true"><a class="nav-link" data-tab="cluster" href="#"><i class="bi bi-bullseye"></i> Fracture Clustering</a></li>
                    <li class="nav-item" data-expert="true"><a class="nav-link" data-tab="sensitivity" href="#"><i class="bi bi-sliders"></i> Sensitivity</a></li>
                </div>

                <!-- Risk & Safety Group (expert-only in focus mode) -->
                <li class="nav-item sidebar-group-header" data-expert="true" onclick="toggleSidebarGroup(this)">
                    <span class="nav-link" style="cursor:pointer">
                        <i class="bi bi-chevron-right sidebar-arrow"></i> Risk & Safety
                        <span class="badge bg-secondary ms-auto" style="font-size:0.6rem">5</span>
                    </span>
                </li>
                <div class="sidebar-group collapsed" data-expert="true">
                    <li class="nav-item"><a class="nav-link" data-tab="risk" href="#"><i class="bi bi-shield-exclamation"></i> Risk Matrix</a></li>
                    <li class="nav-item"><a class="nav-link" data-tab="near-miss" href="#"><i class="bi bi-exclamation-diamond"></i> Near-Miss Safety</a></li>
                    <li class="nav-item"><a class="nav-link" data-tab="uncertainty" href="#"><i class="bi bi-clipboard-pulse"></i> Uncertainty Budget</a></li>
                    <li class="nav-item"><a class="nav-link" data-tab="scenarios" href="#"><i class="bi bi-sliders"></i> Scenarios</a></li>
                    <li class="nav-item"><a class="nav-link" data-tab="montecarlo" href="#"><i class="bi bi-dice-5"></i> Monte Carlo</a></li>
                </div>

                <!-- Decisions & Reports Group -->
                <li class="nav-item sidebar-group-header" onclick="toggleSidebarGroup(this)">
                    <span class="nav-link" style="cursor:pointer">
                        <i class="bi bi-chevron-right sidebar-arrow"></i> Decisions & Reports
                        <span class="badge bg-secondary ms-auto" style="font-size:0.6rem">4</span>
                    </span>
                </li>
                <div class="sidebar-group collapsed">
                    <li class="nav-item"><a class="nav-link" data-tab="decision" href="#"><i class="bi bi-signpost-split"></i> Decisions</a></li>
                    <li class="nav-item"><a class="nav-link" data-tab="wells" href="#"><i class="bi bi-building"></i> Well Comparison</a></li>
                    <li class="nav-item"><a class="nav-link" data-tab="report" href="#"><i class="bi bi-file-earmark-text"></i> Well Report</a></li>
                    <li class="nav-item" data-expert="true"><a class="nav-link" data-tab="calibration" href="#"><i class="bi bi-bullseye"></i> Calibration</a></li>
                </div>

                <!-- Quality & Compliance Group (expert-only in focus mode) -->
                <li class="nav-item sidebar-group-header" data-expert="true" onclick="toggleSidebarGroup(this)">
                    <span class="nav-link" style="cursor:pointer">
                        <i class="bi bi-chevron-right sidebar-arrow"></i> Quality & Compliance
                        <span class="badge bg-secondary ms-auto" style="font-size:0.6rem">4</span>
                    </span>
                </li>
                <div class="sidebar-group collapsed" data-expert="true">
                    <li class="nav-item"><a class="nav-link" data-tab="validation" href="#"><i class="bi bi-check2-all"></i> Data Validation</a></li>
                    <li class="nav-item"><a class="nav-link" data-tab="audit" href="#"><i class="bi bi-shield-check"></i> Audit Trail</a></li>
                    <li class="nav-item"><a class="nav-link" data-tab="feedback" href="#"><i class="bi bi-chat-dots"></i> Feedback</a></li>
                    <li class="nav-item"><a class="nav-link" data-tab="mlops" href="#"><i class="bi bi-gear-wide-connected"></i> Production MLOps</a></li>
                </div>

                <!-- Engineering Group -->
                <li class="nav-item sidebar-group-header" onclick="toggleSidebarGroup(this)">
                    <span class="nav-link" style="cursor:pointer">
                        <i class="bi bi-chevron-right sidebar-arrow"></i> Engineering
                        <span class="badge bg-secondary ms-auto" style="font-size:0.6rem">2</span>
                    </span>
                </li>
                <div class="sidebar-group collapsed">
                    <li class="nav-item"><a class="nav-link" data-tab="drilling" href="#"><i class="bi bi-tools"></i> Drilling Calculators</a></li>
                    <li class="nav-item" data-expert="true"><a class="nav-link" data-tab="research" href="#"><i class="bi bi-mortarboard"></i> Research & Methods</a></li>
                </div>

                <li class="nav-item">
                    <a class="nav-link" data-tab="glossary" href="#">
                        <i class="bi bi-book"></i> Glossary
                    </a>
                </li>
            </ul>

            <!-- Parameters -->
            <div class="sidebar-section">
                <h6 class="sidebar-heading">Parameters</h6>
                <div class="mb-2">
                    <label class="form-label-sm">Well</label>
                    <select id="well-select" class="form-select form-select-sm">
                    </select>
                </div>
                <div class="mb-2">
                    <label class="form-label-sm">Stress Regime</label>
                    <select id="regime-select" class="form-select form-select-sm">
                        <option value="auto" selected>Auto (Best Fit)</option>
                        <option value="strike_slip">Strike-Slip</option>
                        <option value="normal">Normal</option>
                        <option value="thrust">Thrust</option>
                    </select>
                </div>
                <div class="mb-2">
                    <label class="form-label-sm">Depth (m)</label>
                    <input type="number" id="depth-input" class="form-control form-control-sm" value="3300" min="500" max="6000">
                </div>
                <div class="mb-2">
                    <label class="form-label-sm">Pore Pressure (MPa)
                        <i class="bi bi-info-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Hydrostatic estimate used if left empty. Pore pressure reduces effective normal stress on fractures, shifting Mohr circles left."></i>
                    </label>
                    <input type="number" id="pp-input" class="form-control form-control-sm" placeholder="Auto (hydrostatic)" step="0.1" min="0" max="200">
                </div>
                <div class="mb-2">
                    <label class="form-label-sm">Geothermal Gradient (°C/km)
                        <i class="bi bi-info-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Rate of temperature increase with depth. Default 30°C/km. Higher values (>35) indicate hot basins — friction correction activates at temperatures >150°C."></i>
                    </label>
                    <input type="number" id="geothermal-input" class="form-control form-control-sm" value="30" step="1" min="15" max="60">
                </div>
            </div>

            <!-- Full Pipeline -->
            <div class="sidebar-section">
                <button id="btn-pipeline" class="btn btn-warning btn-sm w-100 fw-bold" onclick="runFullPipeline()">
                    <i class="bi bi-rocket-takeoff"></i> Run Full Pipeline
                </button>
                <div class="small text-muted-light mt-1">Chains all analyses in one click</div>
            </div>

            <!-- Upload -->
            <div class="sidebar-section">
                <h6 class="sidebar-heading">Upload Data</h6>
                <p class="text-muted-light small mb-1" style="font-size:0.7rem">Upload your Excel files (Depth, Azimuth, Dip) to improve accuracy with your own well data.</p>
                <input type="file" id="file-upload" class="form-control form-control-sm" accept=".xls,.xlsx">
                <div id="upload-status" class="small mt-1"></div>
                <div class="mt-2">
                    <span class="badge" id="data-source-badge">Demo Data</span>
                </div>
                <button id="btn-use-demo" class="btn btn-outline-light btn-sm mt-1 d-none" onclick="switchToDemo()">
                    Back to Demo Data
                </button>
            </div>

            <!-- Sidebar Footer -->
            <div class="sidebar-section mt-auto" style="border-top:1px solid rgba(255,255,255,0.08);padding:0.8rem 1rem">
                <div class="d-flex align-items-center justify-content-between">
                    <small class="text-muted-light" style="font-size:0.65rem">
                        <i class="bi bi-cpu"></i> GeoStress AI v3.87
                    </small>
                    <div>
                        <a href="https://github.com/AhmedMGabl/geostress-ai" target="_blank" class="text-muted-light me-2" title="GitHub" style="font-size:0.8rem;text-decoration:none"><i class="bi bi-github"></i></a>
                        <a href="#" onclick="switchTab('research');return false" class="text-muted-light" title="Research" style="font-size:0.8rem;text-decoration:none"><i class="bi bi-mortarboard"></i></a>
                    </div>
                </div>
                <small class="text-muted-light d-block mt-1" style="font-size:0.58rem;opacity:0.6">Bayesian-optimized ML for subsurface stress analysis</small>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="flex-grow-1">
            <!-- Top bar -->
            <div class="mobile-overlay" id="mobile-overlay" onclick="closeMobileMenu()"></div>
            <div class="topbar d-flex align-items-center justify-content-between px-4">
                <div class="d-flex align-items-center gap-2">
                    <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Menu">
                        <i class="bi bi-list"></i>
                    </button>
                    <span id="page-title" class="fw-semibold fs-5">Executive Summary</span>
                    <span class="text-muted ms-2" id="fracture-count-badge"></span>
                </div>
                <div class="d-flex align-items-center gap-3">
                    <span class="badge bg-light text-dark border" style="font-size:0.7rem">
                        <i class="bi bi-circle-fill text-success" style="font-size:0.5rem"></i> AI Ready
                    </span>
                    <span class="text-muted small d-none d-lg-inline">Geostress Analysis Platform</span>
                </div>
            </div>

            <div class="content-area p-4">
                <!-- Industrial Disclaimer Banner -->
                <div id="industrial-disclaimer" class="alert alert-warning border-warning py-2 mb-3 small d-flex align-items-start">
                    <i class="bi bi-shield-exclamation text-warning me-2 mt-1 fs-6"></i>
                    <div>
                        <strong>Industrial Use Notice:</strong>
                        This tool provides AI-assisted geostress estimates for planning purposes.
                        Results are <u>not</u> a substitute for certified geomechanical analysis by a qualified engineer.
                        Stress magnitudes require field calibration (LOT/XLOT/DFIT) before use in casing or completion design.
                        Always validate against independent data sources before operational decisions.
                        <a href="#" onclick="dismissIndustrialNotice(); return false;" class="ms-2 text-decoration-none"><i class="bi bi-x-circle"></i> Dismiss</a>
                    </div>
                </div>
                <script>
                (function() {
                    if (localStorage.getItem('gs_notice_dismissed') === '1') {
                        document.getElementById('industrial-disclaimer').classList.add('d-none');
                    }
                })();
                function dismissIndustrialNotice() {
                    document.getElementById('industrial-disclaimer').classList.add('d-none');
                    localStorage.setItem('gs_notice_dismissed', '1');
                }
                </script>
                <!-- Pipeline Progress Panel -->
                <div id="pipeline-panel" class="d-none mb-4">
                    <div class="card border-warning">
                        <div class="card-header bg-warning text-dark d-flex justify-content-between align-items-center py-2">
                            <span><i class="bi bi-rocket-takeoff"></i> <strong>Full Analysis Pipeline</strong></span>
                            <button class="btn btn-sm btn-outline-dark" onclick="closePipelinePanel()"><i class="bi bi-x-lg"></i></button>
                        </div>
                        <div class="card-body py-3">
                            <div id="pipeline-steps" class="d-flex gap-1 mb-2 flex-wrap"></div>
                            <div class="progress mb-2" style="height:6px">
                                <div id="pipeline-bar" class="progress-bar bg-warning" style="width:0%;transition:width 0.3s"></div>
                            </div>
                            <div class="d-flex justify-content-between">
                                <small id="pipeline-status" class="text-muted">Preparing...</small>
                                <small id="pipeline-elapsed" class="text-muted"></small>
                            </div>
                            <div id="pipeline-summary" class="d-none mt-3"></div>
                        </div>
                    </div>
                </div>

                <!-- EXECUTIVE SUMMARY TAB -->
                <div id="tab-executive" class="tab-content active">
                    <div class="d-flex justify-content-between align-items-center mb-4" data-aos="fade-up">
                        <div>
                            <h4 class="mb-1"><i class="bi bi-speedometer2"></i> Executive Summary</h4>
                            <p class="text-muted mb-0">Plain-language overview for decision-makers. No jargon, just actionable insights.</p>
                        </div>
                        <div class="d-flex gap-2 flex-wrap">
                            <button class="btn btn-primary btn-sm" onclick="runExecutiveSummary()">
                                <i class="bi bi-arrow-clockwise"></i> Generate Summary
                            </button>
                            <button class="btn btn-warning btn-sm" onclick="runGuidedWizard()">
                                <i class="bi bi-signpost-split"></i> Guided Wizard
                            </button>
                            <button class="btn btn-dark btn-sm" onclick="exportPdfReport()">
                                <i class="bi bi-file-earmark-pdf"></i> PDF Report
                            </button>
                            <div class="dropdown">
                                <button class="btn btn-outline-secondary btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown">
                                    <i class="bi bi-three-dots"></i> More
                                </button>
                                <ul class="dropdown-menu dropdown-menu-end">
                                    <li><a class="dropdown-item" href="#" onclick="runSufficiencyCheck()"><i class="bi bi-clipboard-check"></i> Data Sufficiency</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="runSafetyCheck()"><i class="bi bi-shield-exclamation"></i> Safety Check</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="runFieldConsistency()"><i class="bi bi-globe2"></i> Field Consistency</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="runEvidenceChain()"><i class="bi bi-list-check"></i> Evidence Chain</a></li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li><a class="dropdown-item" href="#" onclick="exportFullJsonReport()"><i class="bi bi-filetype-json"></i> Export JSON</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="runBatchAnalysis()"><i class="bi bi-collection"></i> Batch All Wells</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="runDecisionReadiness()"><i class="bi bi-clipboard-check"></i> Decision Readiness</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Start Cards (shown before first analysis) -->
                    <div id="quick-start-panel" class="mb-4" data-aos="fade-up" data-aos-delay="100">
                        <div class="row g-3">
                            <div class="col-md-3">
                                <div class="card h-100 border-0 shadow-sm quick-start-card" style="cursor:pointer" onclick="runExecutiveSummary(); this.closest('#quick-start-panel').classList.add('d-none');">
                                    <div class="card-body text-center p-4">
                                        <div style="width:56px;height:56px;border-radius:50%;background:#fef3c7;display:flex;align-items:center;justify-content:center;margin:0 auto 1rem">
                                            <i class="bi bi-speedometer2 fs-3" style="color:#d97706"></i>
                                        </div>
                                        <h6 class="fw-bold mb-1">Quick Analysis</h6>
                                        <small class="text-muted">One-click executive summary with GO/NO-GO decision</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card h-100 border-0 shadow-sm quick-start-card" style="cursor:pointer" onclick="switchTab('performance')">
                                    <div class="card-body text-center p-4">
                                        <div style="width:56px;height:56px;border-radius:50%;background:#ecfdf5;display:flex;align-items:center;justify-content:center;margin:0 auto 1rem">
                                            <i class="bi bi-trophy fs-3" style="color:#16a34a"></i>
                                        </div>
                                        <h6 class="fw-bold mb-1">AI Performance</h6>
                                        <small class="text-muted">See accuracy metrics, calibration, and trust indicators</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card h-100 border-0 shadow-sm quick-start-card" style="cursor:pointer" onclick="switchTab('data')">
                                    <div class="card-body text-center p-4">
                                        <div style="width:56px;height:56px;border-radius:50%;background:#eff6ff;display:flex;align-items:center;justify-content:center;margin:0 auto 1rem">
                                            <i class="bi bi-table fs-3" style="color:#3b82f6"></i>
                                        </div>
                                        <h6 class="fw-bold mb-1">Explore Data</h6>
                                        <small class="text-muted">View fracture data, quality scores, and well statistics</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card h-100 border-0 shadow-sm quick-start-card" style="cursor:pointer" onclick="document.getElementById('file-upload').click()">
                                    <div class="card-body text-center p-4">
                                        <div style="width:56px;height:56px;border-radius:50%;background:#fdf2f8;display:flex;align-items:center;justify-content:center;margin:0 auto 1rem">
                                            <i class="bi bi-cloud-arrow-up fs-3" style="color:#db2777"></i>
                                        </div>
                                        <h6 class="fw-bold mb-1">Upload Data</h6>
                                        <small class="text-muted">Bring your own well data for custom analysis</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Decision Readiness -->
                    <div id="readiness-results" class="d-none mb-4">
                        <div class="card border-dark">
                            <div class="card-header bg-dark text-white">
                                <i class="bi bi-clipboard-check"></i> Decision Readiness Assessment
                            </div>
                            <div class="card-body" id="readiness-body"></div>
                        </div>
                    </div>

                    <!-- Overall Risk Banner -->
                    <div id="exec-risk-banner" class="d-none mb-4">
                        <div id="exec-risk-alert" class="alert p-4"></div>
                    </div>

                    <!-- GO/NO-GO Decision Matrix -->
                    <div id="exec-decision-matrix" class="d-none mb-4"></div>

                    <!-- Field Calibration Status -->
                    <div id="exec-calibration" class="d-none mb-4">
                        <div class="card" id="exec-cal-card">
                            <div class="card-header">
                                <i class="bi bi-geo-alt me-1"></i> Field Calibration Status
                            </div>
                            <div class="card-body" id="exec-cal-body"></div>
                        </div>
                    </div>

                    <!-- Summary Sections -->
                    <div id="exec-sections" class="mb-4"></div>

                    <!-- Evidence Chain Results -->
                    <div id="evidence-results" class="d-none mb-4">
                        <div class="card border-success">
                            <div class="card-header bg-success text-white"><i class="bi bi-list-check"></i> Evidence Chain — Decision Support</div>
                            <div class="card-body">
                                <div id="evidence-summary" class="alert mb-3"></div>
                                <div id="evidence-items"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Guided Wizard Results -->
                    <div id="wizard-results" class="d-none mb-4"></div>

                    <!-- Batch Analysis Results -->
                    <div id="batch-results" class="d-none mb-4">
                        <div class="card border-info">
                            <div class="card-header bg-info text-white">
                                <i class="bi bi-collection"></i> Batch Field Analysis — All Wells
                            </div>
                            <div class="card-body" id="batch-body"></div>
                        </div>
                    </div>

                    <!-- Safety Check Results -->
                    <div id="safety-results" class="d-none mb-4">
                        <div class="card">
                            <div class="card-header"><i class="bi bi-shield-exclamation"></i> Prediction Safety Check</div>
                            <div class="card-body">
                                <div id="safety-decision" class="alert mb-3"></div>
                                <div id="safety-blockers"></div>
                                <div id="safety-warnings"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Field Consistency Results -->
                    <div id="field-results" class="d-none mb-4">
                        <div class="card">
                            <div class="card-header"><i class="bi bi-globe2"></i> Field-Scale Consistency</div>
                            <div class="card-body">
                                <div id="field-rec" class="alert mb-3"></div>
                                <div class="row g-3 mb-3">
                                    <div class="col-md-6">
                                        <h6 class="small fw-bold">SHmax Consistency</h6>
                                        <div id="field-shmax"></div>
                                    </div>
                                    <div class="col-md-6">
                                        <h6 class="small fw-bold">Fracture Type Similarity</h6>
                                        <div id="field-types"></div>
                                    </div>
                                </div>
                                <h6 class="small fw-bold">Per-Well Results</h6>
                                <div class="table-responsive">
                                    <table class="table table-sm small">
                                        <thead><tr><th>Well</th><th>SHmax</th><th>σ1</th><th>σ3</th><th>Misfit</th><th>Fractures</th></tr></thead>
                                        <tbody id="field-table-body"></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Data Sufficiency Results -->
                    <div id="suff-results" class="d-none">
                        <h5 class="mb-3"><i class="bi bi-clipboard-check"></i> Data Sufficiency Assessment</h5>
                        <div id="suff-overall" class="alert mb-3"></div>
                        <div class="table-responsive mb-3">
                            <table class="table table-sm">
                                <thead><tr><th>Analysis</th><th>Status</th><th>Assessment</th><th>Min Data Needed</th></tr></thead>
                                <tbody id="suff-table-body"></tbody>
                            </table>
                        </div>
                        <div id="suff-recs"></div>
                    </div>
                </div>

                <!-- PERFORMANCE & TRUST TAB -->
                <div id="tab-performance" class="tab-content">
                    <div class="showcase-hero mb-4" data-aos="fade-up">
                        <div class="d-flex align-items-center gap-3 mb-2">
                            <div style="width:48px;height:48px;border-radius:50%;background:rgba(217,119,6,0.2);display:flex;align-items:center;justify-content:center;">
                                <i class="bi bi-trophy" style="font-size:1.5rem;color:#f59e0b;"></i>
                            </div>
                            <div>
                                <h3 class="mb-0">Industrial-Grade AI You Can Trust</h3>
                                <p class="mb-0 opacity-75" style="font-size:0.9rem;">Bayesian-optimized, physics-constrained, with honest uncertainty quantification.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Primary Metrics: What's genuinely impressive -->
                    <div class="row g-3 mb-4">
                        <div class="col-md-3" data-aos="fade-up" data-aos-delay="50">
                            <div class="showcase-metric">
                                <div class="big-number" id="perf-abstention-acc" style="color:#16a34a;">79%</div>
                                <div class="ci-range">On committed predictions</div>
                                <div class="fw-semibold mt-1">Confident Accuracy</div>
                                <div class="text-muted small">Refuses to predict when uncertain</div>
                            </div>
                        </div>
                        <div class="col-md-3" data-aos="fade-up" data-aos-delay="100">
                            <div class="showcase-metric">
                                <div class="big-number text-success" id="perf-calibration">EXCELLENT</div>
                                <div class="ci-range" id="perf-ece">ECE: 2.7%</div>
                                <div class="fw-semibold mt-1">Probability Calibration</div>
                                <div class="text-muted small">80% confidence = ~80% correct</div>
                            </div>
                        </div>
                        <div class="col-md-3" data-aos="fade-up" data-aos-delay="150">
                            <div class="showcase-metric">
                                <div class="big-number text-primary" id="perf-physics">5 / 5</div>
                                <div class="ci-range">Checks Passed</div>
                                <div class="fw-semibold mt-1">Physics Validation</div>
                                <div class="text-muted small">Every result verified against geomechanics laws</div>
                            </div>
                        </div>
                        <div class="col-md-3" data-aos="fade-up" data-aos-delay="200">
                            <div class="showcase-metric">
                                <div class="big-number text-warning" id="perf-decision">6-Signal</div>
                                <div class="ci-range">GO / CAUTION / NO-GO</div>
                                <div class="fw-semibold mt-1">Decision Framework</div>
                                <div class="text-muted small">Independent quality checks before operations</div>
                            </div>
                        </div>
                    </div>

                    <!-- ML Model Quality: honest, contextualized -->
                    <h5 class="mb-3" data-aos="fade-up"><i class="bi bi-cpu"></i> Bayesian-Optimized Model Quality</h5>
                    <div class="row g-3 mb-4">
                        <div class="col-md-3" data-aos="fade-up" data-aos-delay="50">
                            <div class="showcase-metric" style="border-color:#d97706;">
                                <div class="big-number" id="perf-bal-acc">71%</div>
                                <div class="ci-range" id="perf-bal-acc-std">&plusmn; 3.0%</div>
                                <div class="fw-semibold mt-1">Balanced Accuracy</div>
                                <div class="text-muted small" id="perf-vs-random">3.6x random baseline (20%)</div>
                            </div>
                        </div>
                        <div class="col-md-3" data-aos="fade-up" data-aos-delay="100">
                            <div class="showcase-metric">
                                <div class="big-number" id="perf-mcc" style="color:#6366f1;">0.67</div>
                                <div class="ci-range">Matthews Correlation</div>
                                <div class="fw-semibold mt-1">MCC Score</div>
                                <div class="text-muted small">Robust to class imbalance</div>
                            </div>
                        </div>
                        <div class="col-md-3" data-aos="fade-up" data-aos-delay="150">
                            <div class="showcase-metric">
                                <div class="big-number" id="perf-f1" style="color:#0891b2;">57%</div>
                                <div class="ci-range">Across all classes</div>
                                <div class="fw-semibold mt-1">Macro F1 Score</div>
                                <div class="text-muted small">Equal weight to rare + common types</div>
                            </div>
                        </div>
                        <div class="col-md-3" data-aos="fade-up" data-aos-delay="200">
                            <div class="showcase-metric">
                                <div class="big-number" id="perf-n-classes" style="color:#7c3aed;">5</div>
                                <div class="ci-range" id="perf-imbalance">17:1 imbalance ratio</div>
                                <div class="fw-semibold mt-1">Fracture Types</div>
                                <div class="text-muted small">Severe class imbalance handled</div>
                            </div>
                        </div>
                    </div>

                    <div class="alert alert-info border-0 small mb-4" data-aos="fade-up" style="background:rgba(6,182,212,0.08);color:#0e7490;">
                        <i class="bi bi-info-circle me-1"></i>
                        <strong>Why balanced accuracy?</strong> Standard accuracy is misleading for imbalanced data.
                        With 5 fracture types and a 17:1 class ratio, balanced accuracy gives equal weight to every type —
                        ensuring rare fractures (which are often the most operationally important) are not ignored.
                        <strong>Random chance on this problem is 20%.</strong>
                    </div>

                    <!-- Differentiators -->
                    <h5 class="mb-3" data-aos="fade-up"><i class="bi bi-star"></i> What Sets Us Apart</h5>
                    <div class="row g-3 mb-4">
                        <div class="col-md-4" data-aos="fade-up" data-aos-delay="50">
                            <div class="differentiator-card">
                                <div class="icon-circle bg-danger bg-opacity-10 text-danger">
                                    <i class="bi bi-shield-exclamation"></i>
                                </div>
                                <h6>Refuses When Uncertain</h6>
                                <p class="text-muted small mb-1">Unlike typical AI that always gives an answer, GeoStress AI refuses to predict when confidence is below threshold. On committed predictions: <strong>79%</strong> accuracy.</p>
                                <span class="badge bg-danger bg-opacity-10 text-danger">Safety-Critical Design</span>
                            </div>
                        </div>
                        <div class="col-md-4" data-aos="fade-up" data-aos-delay="100">
                            <div class="differentiator-card">
                                <div class="icon-circle bg-success bg-opacity-10 text-success">
                                    <i class="bi bi-bullseye"></i>
                                </div>
                                <h6>Calibrated Probabilities</h6>
                                <p class="text-muted small mb-1">Expected Calibration Error of just <strong>2.7%</strong>. When the model reports a confidence level, you can trust it maps directly to real-world accuracy.</p>
                                <span class="badge bg-success bg-opacity-10 text-success">Statistically Verified</span>
                            </div>
                        </div>
                        <div class="col-md-4" data-aos="fade-up" data-aos-delay="150">
                            <div class="differentiator-card">
                                <div class="icon-circle bg-primary bg-opacity-10 text-primary">
                                    <i class="bi bi-cpu"></i>
                                </div>
                                <h6>Ensemble Resampling</h6>
                                <p class="text-muted small mb-1">BalancedBagging trains 100 models on balanced subsets. Each bag gets a different view of the data — <strong>ensemble diversity</strong> compensates for extreme class imbalance (17:1 ratio).</p>
                                <span class="badge bg-primary bg-opacity-10 text-primary">100 Balanced Bags</span>
                            </div>
                        </div>
                    </div>

                    <!-- Model Leaderboard -->
                    <h5 class="mb-3" data-aos="fade-up"><i class="bi bi-trophy"></i> Model Leaderboard</h5>
                    <div class="card mb-4" data-aos="fade-up">
                        <div class="card-body p-0">
                            <table class="table table-sm table-hover mb-0" id="perf-leaderboard">
                                <thead class="table-light">
                                    <tr><th style="width:2rem">#</th><th>Model</th><th>Bal Acc</th><th>MCC</th><th>F1 Macro</th><th></th></tr>
                                </thead>
                                <tbody id="perf-leaderboard-body">
                                    <tr><td>1</td><td class="fw-semibold">Balanced Bagging</td><td>71.0%</td><td>0.67</td><td>58.3%</td><td><span class="badge bg-warning text-dark">Best</span></td></tr>
                                    <tr><td>2</td><td>Extra Trees Ensemble</td><td>70.0%</td><td>0.66</td><td>57.1%</td><td></td></tr>
                                    <tr><td>3</td><td>Random Forest</td><td>67.9%</td><td>0.68</td><td>57.3%</td><td></td></tr>
                                    <tr><td>4</td><td>Neural Network (MLP)</td><td>64.9%</td><td>0.71</td><td>60.8%</td><td></td></tr>
                                    <tr><td>5</td><td>Easy Ensemble</td><td>64.5%</td><td>0.62</td><td>53.4%</td><td></td></tr>
                                </tbody>
                            </table>
                            <div class="text-muted small p-2 text-center">12 models tested &middot; Ranked by balanced accuracy (equal weight to all fracture types) &middot; <a href="#" onclick="switchTab('models');return false">Full comparison &rarr;</a></div>
                        </div>
                    </div>

                    <!-- Trust Indicators -->
                    <h5 class="mb-3" data-aos="fade-up"><i class="bi bi-patch-check"></i> Trust Indicators</h5>
                    <div class="d-flex flex-wrap gap-2 mb-4" data-aos="fade-up">
                        <span class="trust-badge"><i class="bi bi-globe2"></i> WSM Standard Compliance</span>
                        <span class="trust-badge"><i class="bi bi-shield-lock"></i> SHA-256 Audit Trail</span>
                        <span class="trust-badge"><i class="bi bi-journal-check"></i> Peer-Reviewed Research (2025-2026)</span>
                        <span class="trust-badge"><i class="bi bi-cpu"></i> Bayesian Hyperparameter Tuning</span>
                        <span class="trust-badge"><i class="bi bi-calculator"></i> Multiple Uncertainty Estimates</span>
                        <span class="trust-badge"><i class="bi bi-people"></i> Expert-in-the-Loop (RLHF)</span>
                    </div>

                    <!-- Detailed Cards -->
                    <div class="row g-3 mb-4" data-aos="fade-up">
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-header"><i class="bi bi-bar-chart"></i> Stress Inversion Quality</div>
                                <div class="card-body">
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>WSM Quality Grade</span>
                                        <strong id="perf-wsm-grade">B</strong>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Uncertainty Method</span>
                                        <strong>Analytical CIs on every parameter</strong>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Uncertainty Sources Tracked</span>
                                        <strong>6 independent sources</strong>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <span>Research Basis</span>
                                        <strong>7 cited papers (2025-2026)</strong>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-header"><i class="bi bi-robot"></i> Model Engineering</div>
                                <div class="card-body">
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Ensemble Architecture</span>
                                        <strong>Multi-model accuracy-weighted voting</strong>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Feature Engineering</span>
                                        <strong>28 physics-informed features</strong>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Class Imbalance</span>
                                        <strong>BalancedBagging + EasyEnsemble</strong>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <span>Architecture</span>
                                        <strong>12 models + hierarchical classification</strong>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- IP Protection Notice -->
                    <div class="alert alert-secondary border small" data-aos="fade-up">
                        <i class="bi bi-lock"></i> <strong>Proprietary Technology</strong> &mdash;
                        Model architecture, feature engineering, and training methodology are proprietary.
                        You see <strong>results and confidence</strong>, not how we get there.
                        All metrics shown are independently verifiable through the application's built-in validation tools.
                    </div>
                </div>

                <!-- DRILLING CALCULATORS TAB -->
                <div id="tab-drilling" class="tab-content">
                    <div class="alert alert-light border py-2 mb-3 small">
                        <i class="bi bi-tools text-primary"></i> <strong>Drilling & Geomechanics Calculators</strong> &mdash;
                        120+ engineering calculators organized by category. Expand a group to access the tools you need.
                    </div>
                    <div id="drilling-tools-target"></div>
                </div>

                <!-- DATA TAB -->
                <div id="tab-data" class="tab-content">
                    <div class="alert alert-light border py-2 mb-3 small"><i class="bi bi-info-circle text-primary"></i> <strong>Data Overview</strong> &mdash; Summary statistics of all fracture measurements loaded from borehole image logs. Check fracture counts, depth ranges, and orientation distributions before running any analysis.</div>
                    <div class="row g-3 mb-4">
                        <div class="col-md-3">
                            <div class="metric-card">
                                <div class="metric-label">Total Fractures</div>
                                <div class="metric-value" id="total-fractures">--</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="metric-card">
                                <div class="metric-label">Wells</div>
                                <div class="metric-value" id="total-wells">--</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="metric-card">
                                <div class="metric-label">Fracture Types</div>
                                <div class="metric-value" id="total-types">--</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="metric-card">
                                <div class="metric-label">Data Source</div>
                                <div class="metric-value" id="data-source-label">Demo</div>
                            </div>
                        </div>
                    </div>
                    <!-- Data Quality Banner -->
                    <div id="quality-banner" class="d-none mb-4">
                        <div class="card" id="quality-card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <span><i class="bi bi-shield-check"></i> Data Quality Assessment</span>
                                <span class="badge fs-6" id="quality-grade-badge">--</span>
                            </div>
                            <div class="card-body">
                                <div class="d-flex align-items-center gap-3 mb-2">
                                    <div class="fs-4 fw-bold" id="quality-score">--</div>
                                    <div class="flex-grow-1">
                                        <div class="progress" style="height:8px">
                                            <div class="progress-bar" id="quality-bar" style="width:0%"></div>
                                        </div>
                                    </div>
                                </div>
                                <div id="quality-issues"></div>
                                <div id="quality-warnings"></div>
                                <div id="quality-recommendations"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Data Anomaly Detection -->
                    <div class="d-flex gap-2 mb-3">
                        <button class="btn btn-outline-warning btn-sm" onclick="runMLAnomalyDetection()">
                            <i class="bi bi-robot"></i> ML Anomaly Detection
                        </button>
                        <button class="btn btn-outline-primary btn-sm" onclick="runDataValidation()">
                            <i class="bi bi-clipboard-check"></i> Validate Data Quality
                        </button>
                        <button class="btn btn-outline-secondary btn-sm" onclick="runCacheWarmup()">
                            <i class="bi bi-lightning-charge"></i> Warm Caches (Speed Up)
                        </button>
                    </div>
                    <!-- Data Validation Results -->
                    <div id="dv-results" class="d-none mb-4">
                        <div id="dv-brief" class="mb-2"></div>
                        <div class="row g-2 mb-3">
                            <div class="col-md-3"><div class="metric-card"><div class="metric-label">Quality</div><div class="metric-value" id="dv-quality">--</div></div></div>
                            <div class="col-md-3"><div class="metric-card"><div class="metric-label">Critical Issues</div><div class="metric-value" id="dv-critical">--</div></div></div>
                            <div class="col-md-3"><div class="metric-card"><div class="metric-label">Warnings</div><div class="metric-value" id="dv-warnings">--</div></div></div>
                            <div class="col-md-3"><div class="metric-card"><div class="metric-label">Samples</div><div class="metric-value" id="dv-samples">--</div></div></div>
                        </div>
                        <div class="card"><div class="card-header py-1"><i class="bi bi-exclamation-triangle"></i> Issues & Recommendations</div>
                            <div class="card-body p-0" style="max-height:300px;overflow-y:auto">
                                <table class="table table-sm table-hover mb-0">
                                    <thead class="table-light"><tr><th>Severity</th><th>Field</th><th>Detail</th></tr></thead>
                                    <tbody id="dv-issues-body"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div id="anomaly-results" class="d-none mb-4">
                        <div class="card border-warning">
                            <div class="card-header bg-warning text-dark">
                                <i class="bi bi-exclamation-triangle"></i> AI Anomaly Detection (Isolation Forest + Mahalanobis)
                            </div>
                            <div class="card-body">
                                <div id="anom-brief" class="mb-2"></div>
                                <div class="row g-2 mb-2">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Anomalies</div><div class="metric-value" id="anom-count">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Rate</div><div class="metric-value" id="anom-rate">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Samples</div><div class="metric-value" id="anom-total">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Maha Threshold</div><div class="metric-value" id="anom-threshold">--</div></div></div>
                                </div>
                                <div class="text-center mb-2" id="anom-plot-img"></div>
                                <div class="card">
                                    <div class="card-header py-1"><i class="bi bi-bug"></i> Flagged Measurements (top 50)</div>
                                    <div class="card-body p-0" style="max-height:300px;overflow-y:auto">
                                        <table class="table table-sm table-hover mb-0">
                                            <thead class="table-light sticky-top"><tr><th>#</th><th>Depth</th><th>Az</th><th>Dip</th><th>Type</th><th>ISO Score</th><th>Mahalanobis</th><th>Unusual Features</th></tr></thead>
                                            <tbody id="anom-table-body"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Auto-Analysis Overview -->
                    <div id="overview-panel" class="d-none mb-4">
                        <div class="card border-dark">
                            <div class="card-header bg-dark text-white">
                                <i class="bi bi-speedometer2"></i> Quick Analysis Overview
                                <button class="btn btn-sm btn-outline-light float-end" onclick="runOverview()">
                                    <i class="bi bi-arrow-clockwise"></i> Refresh
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="row g-3 text-center">
                                    <div class="col"><div class="metric-card"><div class="metric-label">SHmax Direction <i class="bi bi-info-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Direction of maximum horizontal stress. Determines optimal drilling direction and hydraulic fracture propagation."></i></div><div class="metric-value" id="ov-shmax">--</div></div></div>
                                    <div class="col"><div class="metric-card"><div class="metric-label">Stress Regime <i class="bi bi-info-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Auto-detected faulting regime (normal, strike-slip, or thrust) based on best fit to fracture data."></i></div><div class="metric-value" id="ov-regime">--</div></div></div>
                                    <div class="col"><div class="metric-card"><div class="metric-label">Critically Stressed <i class="bi bi-info-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Percentage of fractures above the Mohr-Coulomb failure line. These fractures may act as fluid conduits and could reactivate during operations."></i></div><div class="metric-value" id="ov-cs">--</div></div></div>
                                    <div class="col"><div class="metric-card"><div class="metric-label">Risk Level <i class="bi bi-info-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Overall operational risk based on critically stressed fractures, data quality, model confidence, and sensitivity analysis."></i></div><div class="metric-value" id="ov-risk">--</div></div></div>
                                    <div class="col"><div class="metric-card"><div class="metric-label">Data Quality <i class="bi bi-info-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Grade A-F based on sample size, completeness, value ranges, and consistency of the fracture measurement data."></i></div><div class="metric-value" id="ov-quality">--</div></div></div>
                                    <div class="col"><div class="metric-card"><div class="metric-label">Decision <i class="bi bi-info-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="GO: Proceed with operations. CONDITIONAL: Proceed with additional monitoring. NO-GO: Do not proceed without further data or analysis."></i></div><div class="metric-value" id="ov-gonogo">--</div></div></div>
                                </div>
                                <!-- Stakeholder Brief -->
                                <div id="ov-brief" class="d-none mt-3"></div>
                                <!-- Warnings & Disclaimers -->
                                <div id="ov-warnings" class="mt-3"></div>
                            </div>
                        </div>
                    </div>

                    <!-- One-Click Comprehensive Report -->
                    <div class="card mb-4 border-dark">
                        <div class="card-header bg-dark text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-file-earmark-medical"></i> Comprehensive Analysis Report</span>
                            <div>
                                <button class="btn btn-sm btn-warning me-2" onclick="runComprehensiveReport()">
                                    <i class="bi bi-lightning-fill"></i> Generate Full Report
                                </button>
                                <button class="btn btn-sm btn-outline-light" onclick="downloadPdfReport()">
                                    <i class="bi bi-file-earmark-pdf"></i> Download PDF
                                </button>
                            </div>
                        </div>
                        <div id="cr-results" class="d-none">
                            <div class="card-body">
                                <!-- Verdict banner -->
                                <div id="cr-verdict" class="alert mb-3 text-center">
                                    <h4 id="cr-verdict-label" class="fw-bold mb-1">--</h4>
                                    <div id="cr-signal-summary" class="small"></div>
                                </div>

                                <!-- Executive brief -->
                                <div class="card mb-3">
                                    <div class="card-header"><i class="bi bi-chat-square-text"></i> Executive Brief</div>
                                    <div class="card-body" id="cr-brief" style="white-space:pre-wrap;"></div>
                                </div>

                                <!-- Module summary cards -->
                                <div class="row g-3 mb-3" id="cr-modules"></div>

                                <!-- Errors if any -->
                                <div id="cr-errors" class="d-none"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Geological Context -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-globe-americas"></i> Geological Context &amp; Well Comparison</span>
                            <button class="btn btn-sm btn-outline-info" onclick="runGeologicalContext()">
                                <i class="bi bi-play-fill"></i> Analyze
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Identifies fracture sets, infers tectonic regime, analyzes depth zones, and compares geology across wells. Helps stakeholders understand the geological setting before trusting model outputs.</p>
                            <div id="gc-results" class="d-none">
                                <div class="row g-3 mb-3">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Wells Analyzed</div><div class="metric-value" id="gc-n-wells">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Regime</div><div class="metric-value" id="gc-regime">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Risk Level</div><div class="metric-value" id="gc-risk">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Cross-Well</div><div class="metric-value" id="gc-crosswell">-</div></div></div>
                                </div>
                                <div class="alert alert-light border small" id="gc-brief"></div>
                                <div class="row g-3 mb-3">
                                    <div class="col-12">
                                        <h6>Fracture Sets per Well</h6>
                                        <div class="table-responsive"><table class="table table-sm table-hover"><thead><tr><th>Well</th><th>Set</th><th>Count</th><th>Mean Azimuth</th><th>Mean Dip</th><th>Interpretation</th></tr></thead><tbody id="gc-sets-body"></tbody></table></div>
                                    </div>
                                </div>
                                <div class="row g-3 mb-3">
                                    <div class="col-md-6">
                                        <h6>Depth Zones</h6>
                                        <div class="table-responsive"><table class="table table-sm table-hover"><thead><tr><th>Well</th><th>Zone</th><th>Depth Range</th><th>Count</th><th>Mean Az</th><th>Mean Dip</th></tr></thead><tbody id="gc-zones-body"></tbody></table></div>
                                    </div>
                                    <div class="col-md-6">
                                        <h6>Type Distribution</h6>
                                        <div class="table-responsive"><table class="table table-sm table-hover"><thead><tr><th>Well</th><th>Type</th><th>Count</th></tr></thead><tbody id="gc-types-body"></tbody></table></div>
                                    </div>
                                </div>
                                <div id="gc-comparison" class="d-none">
                                    <h6>Cross-Well Comparison</h6>
                                    <div class="alert alert-info small" id="gc-comp-text"></div>
                                </div>
                                <div class="text-center"><img id="gc-plot" class="img-fluid" style="max-width:900px" /></div>
                            </div>
                        </div>
                    </div>

                    <!-- Data Collection Planner -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-clipboard2-data"></i> Data Collection Planner</span>
                            <button class="btn btn-sm btn-outline-warning" onclick="runCollectionPlanner()">
                                <i class="bi bi-play-fill"></i> Analyze Gaps
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Identifies class imbalance gaps, depth coverage holes, and estimates accuracy gain from collecting more data. Provides prioritized actions for field teams.</p>
                            <div id="cp-results" class="d-none">
                                <div class="row g-2 mb-3">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Priority Actions</div><div class="metric-value" id="cp-n-actions">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Current Accuracy</div><div class="metric-value" id="cp-current-acc">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Projected (2x data)</div><div class="metric-value" id="cp-projected-acc">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Risk</div><div class="metric-value" id="cp-risk">-</div></div></div>
                                </div>
                                <div class="alert alert-light border small" id="cp-brief"></div>
                                <h6>Class Balance Gaps</h6>
                                <div class="table-responsive mb-3">
                                    <table class="table table-sm table-hover">
                                        <thead class="table-light"><tr><th>Well</th><th>Class</th><th>Current</th><th>Target</th><th>Gap</th><th>Priority</th><th>Action</th></tr></thead>
                                        <tbody id="cp-class-body"></tbody>
                                    </table>
                                </div>
                                <h6>Depth Coverage</h6>
                                <div class="table-responsive mb-3">
                                    <table class="table table-sm table-hover">
                                        <thead class="table-light"><tr><th>Well</th><th>Depth Range</th><th>Count</th><th>Density %</th><th>Status</th></tr></thead>
                                        <tbody id="cp-depth-body"></tbody>
                                    </table>
                                </div>
                                <div id="cp-priorities" class="d-none">
                                    <h6>Prioritized Actions</h6>
                                    <ul id="cp-priority-list" class="small"></ul>
                                </div>
                                <div class="text-center"><img id="cp-plot" class="img-fluid" style="max-width:800px" /></div>
                            </div>
                        </div>
                    </div>

                    <!-- Cross-Well Drift Detection -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-exclamation-triangle-fill"></i> Cross-Well Feature Drift</span>
                            <button class="btn btn-sm btn-outline-danger" onclick="runDriftDetection()">
                                <i class="bi bi-play-fill"></i> Detect Drift
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Compares feature distributions between wells using Kolmogorov-Smirnov test. Detects distribution shifts that would cause model degradation. Critical for production monitoring.</p>
                            <div id="drift-results" class="d-none">
                                <div class="row g-2 mb-3">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Alert Level</div><div class="metric-value" id="drift-alert">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Max Drift</div><div class="metric-value" id="drift-max">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Retrain?</div><div class="metric-value" id="drift-retrain">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Wells</div><div class="metric-value" id="drift-wells">-</div></div></div>
                                </div>
                                <div class="alert alert-light border small" id="drift-brief"></div>
                                <h6>Top Drifted Features</h6>
                                <div class="table-responsive mb-2">
                                    <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Wells</th><th>Feature</th><th>KS Stat</th><th>p-value</th><th>Severity</th></tr></thead><tbody id="drift-table-body"></tbody></table>
                                </div>
                                <div class="text-center"><img id="drift-plot" class="img-fluid" style="max-width:800px" /></div>
                            </div>
                        </div>
                    </div>

                    <!-- Domain Adaptation -->
                    <div class="card mb-4 border-primary">
                        <div class="card-header bg-primary bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-arrow-left-right"></i> Well-to-Well Domain Adaptation</span>
                            <button class="btn btn-sm btn-outline-primary" onclick="runDomainAdapt()">
                                <i class="bi bi-play-fill"></i> Adapt
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Applies importance reweighting and feature selection to improve cross-well transfer. Tests 3 adaptation strategies and recommends the best approach.</p>
                            <div id="da-results" class="d-none">
                                <div class="row g-2 mb-3">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Best Method</div><div class="metric-value" id="da-best">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Improvement</div><div class="metric-value" id="da-improve">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Train Well</div><div class="metric-value" id="da-train">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Test Well</div><div class="metric-value" id="da-test">-</div></div></div>
                                </div>
                                <div class="alert alert-light border small" id="da-brief"></div>
                                <h6>Adaptation Methods Comparison</h6>
                                <div class="table-responsive mb-2">
                                    <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Method</th><th>Accuracy</th><th>F1</th><th>Description</th></tr></thead><tbody id="da-methods-body"></tbody></table>
                                </div>
                                <h6>Per-Class Results (Best Method)</h6>
                                <div class="table-responsive mb-2">
                                    <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Class</th><th>Precision</th><th>Recall</th><th>Support</th></tr></thead><tbody id="da-class-body"></tbody></table>
                                </div>
                                <div class="text-center"><img id="da-plot" class="img-fluid" style="max-width:800px" /></div>
                            </div>
                        </div>
                    </div>

                    <!-- Depth-Stratified Cross-Validation -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-layers"></i> Depth-Stratified Validation</span>
                            <button class="btn btn-sm btn-outline-danger" onclick="runDepthStratCV()">
                                <i class="bi bi-play-fill"></i> Validate
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Tests model on unseen depth zones (leave-one-zone-out). The most realistic evaluation for oil industry deployment — random splits overestimate performance.</p>
                            <div id="dscv-results" class="d-none">
                                <div class="row g-2 mb-3">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Overall Accuracy</div><div class="metric-value" id="dscv-acc">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">vs Random Baseline</div><div class="metric-value" id="dscv-baseline">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Deployment Risk</div><div class="metric-value" id="dscv-risk">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Worst Zone</div><div class="metric-value" id="dscv-worst">-</div></div></div>
                                </div>
                                <div class="alert alert-light border small" id="dscv-brief"></div>
                                <h6>Performance by Depth Zone</h6>
                                <div class="table-responsive mb-2">
                                    <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Zone</th><th>Depth Range</th><th>Accuracy</th><th>F1</th><th>Random</th><th>Gap</th><th>Grade</th></tr></thead><tbody id="dscv-zone-body"></tbody></table>
                                </div>
                                <div class="text-center"><img id="dscv-plot" class="img-fluid" style="max-width:800px" /></div>
                            </div>
                        </div>
                    </div>

                    <!-- Probability Calibration -->
                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-thermometer-half"></i> Probability Calibration</span>
                            <button class="btn btn-sm btn-outline-success" onclick="runCalibProb()">
                                <i class="bi bi-play-fill"></i> Calibrate
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Temperature scaling ensures "80% confident" actually means correct 80% of the time. Reports ECE (Expected Calibration Error) before and after calibration.</p>
                            <div id="tcal-results" class="d-none">
                                <div class="row g-2 mb-3">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Temperature</div><div class="metric-value" id="tcal-temp">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">ECE Before</div><div class="metric-value" id="tcal-before">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">ECE After</div><div class="metric-value" id="tcal-after">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Grade</div><div class="metric-value" id="tcal-grade">-</div></div></div>
                                </div>
                                <div class="alert alert-light border small" id="tcal-brief"></div>
                                <h6>Per-Class Calibration</h6>
                                <div class="table-responsive mb-2">
                                    <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Class</th><th>Before Conf</th><th>After Conf</th><th>Actual Freq</th><th>Before Gap</th><th>After Gap</th></tr></thead><tbody id="tcal-class-body"></tbody></table>
                                </div>
                                <div class="text-center"><img id="tcal-plot" class="img-fluid" style="max-width:800px" /></div>
                            </div>
                        </div>
                    </div>

                    <!-- Feature Interactions -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-diagram-3"></i> Feature Interaction Discovery</span>
                            <button class="btn btn-sm btn-outline-info" onclick="runFeatInteract()">
                                <i class="bi bi-play-fill"></i> Discover
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Beyond single-feature importance: discovers which feature PAIRS synergize or are redundant. In geostress, Dip x Azimuth interactions are physically meaningful.</p>
                            <div id="fi-results" class="d-none">
                                <div class="row g-2 mb-3">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Synergistic</div><div class="metric-value" id="fi-syn">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Redundant</div><div class="metric-value" id="fi-red">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Independent</div><div class="metric-value" id="fi-ind">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Strongest</div><div class="metric-value" id="fi-strong">-</div></div></div>
                                </div>
                                <div class="alert alert-light border small" id="fi-brief"></div>
                                <h6>Top Feature Pair Interactions</h6>
                                <div class="table-responsive mb-2">
                                    <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Feature A</th><th>Feature B</th><th>Strength</th><th>Type</th><th>Joint Drop</th></tr></thead><tbody id="fi-table-body"></tbody></table>
                                </div>
                                <div id="fi-notes" class="small text-muted mb-2"></div>
                                <div class="text-center"><img id="fi-plot" class="img-fluid" style="max-width:800px" /></div>
                            </div>
                        </div>
                    </div>

                    <!-- Data Augmentation Analysis -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-plus-circle"></i> Data Augmentation Analysis</span>
                            <button class="btn btn-sm btn-outline-warning" onclick="runAugmentation()">
                                <i class="bi bi-play-fill"></i> Analyze
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Tests SMOTE, random oversampling, and undersampling to improve recognition of rare fracture types. Addresses class imbalance where minority classes are under-represented.</p>
                            <div id="aug-results" class="d-none">
                                <div class="row g-2 mb-3">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Best Strategy</div><div class="metric-value" id="aug-best">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Improvement</div><div class="metric-value" id="aug-improve">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Imbalance Ratio</div><div class="metric-value" id="aug-ratio">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Minority Class</div><div class="metric-value" id="aug-minority">-</div></div></div>
                                </div>
                                <div class="alert alert-light border small" id="aug-brief"></div>
                                <h6>Strategy Comparison</h6>
                                <div class="table-responsive mb-2">
                                    <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Strategy</th><th>Accuracy</th><th>F1</th><th>Balanced Acc</th></tr></thead><tbody id="aug-strat-body"></tbody></table>
                                </div>
                                <h6>Per-Class Improvement</h6>
                                <div class="table-responsive mb-2">
                                    <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Class</th><th>Count</th><th>Baseline F1</th><th>Best F1</th><th>Gain</th><th>Best Strategy</th></tr></thead><tbody id="aug-class-body"></tbody></table>
                                </div>
                                <div class="text-center"><img id="aug-plot" class="img-fluid" style="max-width:800px" /></div>
                            </div>
                        </div>
                    </div>

                    <!-- Multi-Objective Optimization -->
                    <div class="card mb-4 border-primary">
                        <div class="card-header bg-primary bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-bullseye"></i> Multi-Objective Optimization</span>
                            <button class="btn btn-sm btn-outline-primary" onclick="runMultiObj()">
                                <i class="bi bi-play-fill"></i> Optimize
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Pareto frontier analysis balancing accuracy, safety, and coverage. In the oil industry, you cannot just optimize accuracy - you must balance multiple objectives simultaneously.</p>
                            <div id="mo-results" class="d-none">
                                <div class="row g-2 mb-3">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Pareto Points</div><div class="metric-value" id="mo-pareto">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Recommended Acc</div><div class="metric-value" id="mo-acc">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Coverage</div><div class="metric-value" id="mo-cov">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Error Rate</div><div class="metric-value" id="mo-err">-</div></div></div>
                                </div>
                                <div class="alert alert-light border small" id="mo-brief"></div>
                                <h6>Operating Scenarios</h6>
                                <div class="table-responsive mb-2">
                                    <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Scenario</th><th>Threshold</th><th>Accuracy</th><th>Coverage</th><th>Error Rate</th><th>Classified</th></tr></thead><tbody id="mo-scen-body"></tbody></table>
                                </div>
                                <div class="text-center"><img id="mo-plot" class="img-fluid" style="max-width:800px" /></div>
                            </div>
                        </div>
                    </div>

                    <!-- Explainability Report -->
                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-chat-text"></i> Explainability Report</span>
                            <button class="btn btn-sm btn-outline-success" onclick="runExplainReport()">
                                <i class="bi bi-play-fill"></i> Explain
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Plain-English explanations of WHY each prediction was made. For stakeholders who do not understand ML - converts feature contributions into readable narratives.</p>
                            <div id="expl-results" class="d-none">
                                <div class="row g-2 mb-3">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Explained</div><div class="metric-value" id="expl-count">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Correct</div><div class="metric-value" id="expl-correct">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Misclassified</div><div class="metric-value" id="expl-wrong">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Avg Confidence</div><div class="metric-value" id="expl-conf">-</div></div></div>
                                </div>
                                <div class="alert alert-light border small" id="expl-brief"></div>
                                <h6>Sample Explanations</h6>
                                <div id="expl-narratives" class="mb-2"></div>
                                <h6>Global Feature Ranking</h6>
                                <div class="table-responsive mb-2">
                                    <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Feature</th><th>Importance</th></tr></thead><tbody id="expl-feat-body"></tbody></table>
                                </div>
                                <div class="text-center"><img id="expl-plot" class="img-fluid" style="max-width:800px" /></div>
                            </div>
                        </div>
                    </div>

                    <!-- RLHF Reward Model -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-trophy"></i> RLHF Reward Model Training</span>
                            <button class="btn btn-sm btn-outline-danger" onclick="runRewardTrain()">
                                <i class="bi bi-play-fill"></i> Train
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Trains a Bradley-Terry reward model from expert preferences. Learns which predictions experts prefer and uses reward signal to improve the classifier.</p>
                            <div id="rw-results" class="d-none">
                                <div class="row g-2 mb-3">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">RLHF Accuracy</div><div class="metric-value" id="rw-acc">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Improvement</div><div class="metric-value" id="rw-improve">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Pair Accuracy</div><div class="metric-value" id="rw-pair">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Reward Separation</div><div class="metric-value" id="rw-sep">-</div></div></div>
                                </div>
                                <div class="alert alert-light border small" id="rw-brief"></div>
                                <h6>Reward Features</h6>
                                <div class="table-responsive mb-2">
                                    <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Feature</th><th>Reward Weight</th></tr></thead><tbody id="rw-feat-body"></tbody></table>
                                </div>
                                <div class="text-center"><img id="rw-plot" class="img-fluid" style="max-width:800px" /></div>
                            </div>
                        </div>
                    </div>

                    <!-- Negative Outcome Learning -->
                    <div class="card mb-4 border-dark">
                        <div class="card-header bg-dark bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-exclamation-diamond"></i> Negative Outcome Learning</span>
                            <button class="btn btn-sm btn-outline-dark" onclick="runNegLearn()">
                                <i class="bi bi-play-fill"></i> Learn
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Learns from wrong predictions: weights misclassified samples higher in training. Identifies hard examples that consistently fool the model.</p>
                            <div id="nl-results" class="d-none">
                                <div class="row g-2 mb-3">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Hard Examples</div><div class="metric-value" id="nl-hard">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Improvement</div><div class="metric-value" id="nl-improve">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Fixed</div><div class="metric-value" id="nl-fixed">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Still Wrong</div><div class="metric-value" id="nl-still">-</div></div></div>
                                </div>
                                <div class="alert alert-light border small" id="nl-brief"></div>
                                <h6>Per-Class Hard Example Analysis</h6>
                                <div class="table-responsive mb-2">
                                    <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Class</th><th>Count</th><th>Hard</th><th>Hard%</th><th>Base F1</th><th>Neg F1</th><th>Change</th></tr></thead><tbody id="nl-class-body"></tbody></table>
                                </div>
                                <div class="text-center"><img id="nl-plot" class="img-fluid" style="max-width:800px" /></div>
                            </div>
                        </div>
                    </div>

                    <!-- Production Monitoring Simulation -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-activity"></i> Production Monitoring Simulation</span>
                            <button class="btn btn-sm btn-outline-info" onclick="runMonitorSim()">
                                <i class="bi bi-play-fill"></i> Simulate
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Simulates real deployment: trains on early data, monitors as new samples arrive. Detects accuracy drift, triggers alerts when performance degrades.</p>
                            <div id="ms-results" class="d-none">
                                <div class="row g-2 mb-3">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Monitoring Acc</div><div class="metric-value" id="ms-acc">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Trend</div><div class="metric-value" id="ms-trend">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Alerts</div><div class="metric-value" id="ms-alerts">-</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Retrain?</div><div class="metric-value" id="ms-retrain">-</div></div></div>
                                </div>
                                <div class="alert alert-light border small" id="ms-brief"></div>
                                <h6>Batch Performance</h6>
                                <div class="table-responsive mb-2">
                                    <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Batch</th><th>Depth Range</th><th>Samples</th><th>Accuracy</th><th>Cumulative</th><th>Status</th></tr></thead><tbody id="ms-batch-body"></tbody></table>
                                </div>
                                <div id="ms-alert-list" class="mb-2"></div>
                                <div class="text-center"><img id="ms-plot" class="img-fluid" style="max-width:800px" /></div>
                            </div>
                        </div>
                    </div>

                    <!-- v3.25.0: Sample Quality Scoring -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-shield-check"></i> Per-Sample Data Quality</span>
                            <button class="btn btn-sm btn-outline-warning" onclick="runSampleQuality()">
                                <i class="bi bi-play-fill"></i> Score Quality
                            </button>
                        </div>
                        <div class="card-body d-none" id="sq-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Clean</div><div class="metric-value text-success" id="sq-clean">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Minor</div><div class="metric-value text-warning" id="sq-minor">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Warning</div><div class="metric-value text-orange" id="sq-warning">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Critical</div><div class="metric-value text-danger" id="sq-critical">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Quality %</div><div class="metric-value" id="sq-quality">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Samples</div><div class="metric-value" id="sq-n">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="sq-brief"></div>
                            <h6>Flag Types</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Flag Type</th><th>Count</th></tr></thead><tbody id="sq-flag-body"></tbody></table>
                            </div>
                            <h6>Top Flagged Samples</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>#</th><th>Depth</th><th>Az</th><th>Dip</th><th>Score</th><th>Grade</th><th>Flags</th></tr></thead><tbody id="sq-sample-body"></tbody></table>
                            </div>
                            <div class="text-center"><img id="sq-plot" class="img-fluid" style="max-width:800px" /></div>
                        </div>
                    </div>

                    <!-- v3.25.0: Learning Curve Projection -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-graph-up-arrow"></i> Learning Curve Projection</span>
                            <button class="btn btn-sm btn-outline-info" onclick="runLearningProj()">
                                <i class="bi bi-play-fill"></i> Project
                            </button>
                        </div>
                        <div class="card-body d-none" id="lcp-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Current Acc</div><div class="metric-value" id="lcp-acc">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Asymptote</div><div class="metric-value" id="lcp-asymptote">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Gap</div><div class="metric-value" id="lcp-gap">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">ROI Grade</div><div class="metric-value" id="lcp-roi">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Fit OK?</div><div class="metric-value" id="lcp-fit">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">90% Target</div><div class="metric-value" id="lcp-target">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="lcp-brief"></div>
                            <h6>Projections</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Multiplier</th><th>Samples</th><th>Projected Acc</th><th>Gain</th></tr></thead><tbody id="lcp-proj-body"></tbody></table>
                            </div>
                            <div class="text-center"><img id="lcp-plot" class="img-fluid" style="max-width:800px" /></div>
                        </div>
                    </div>

                    <!-- v3.25.0: Consensus Ensemble -->
                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-people-fill"></i> Consensus Ensemble (Multi-Model Vote)</span>
                            <button class="btn btn-sm btn-outline-success" onclick="runConsensusEnsemble()">
                                <i class="bi bi-play-fill"></i> Run Consensus
                            </button>
                        </div>
                        <div class="card-body d-none" id="ce-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Models</div><div class="metric-value" id="ce-models">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Accepted</div><div class="metric-value text-success" id="ce-accepted">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Rejected</div><div class="metric-value text-danger" id="ce-rejected">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Consensus Rate</div><div class="metric-value" id="ce-rate">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Accepted Acc</div><div class="metric-value" id="ce-acc">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Threshold</div><div class="metric-value" id="ce-thresh">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="ce-brief"></div>
                            <h6>Model Rankings</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Model</th><th>Accuracy</th></tr></thead><tbody id="ce-model-body"></tbody></table>
                            </div>
                            <h6>Per-Class Consensus</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Class</th><th>Count</th><th>Consensus Rate</th><th>Accuracy</th><th>Avg Agreement</th></tr></thead><tbody id="ce-class-body"></tbody></table>
                            </div>
                            <h6>Rejected Samples (for Expert Review)</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>#</th><th>Depth</th><th>True Class</th><th>Max Agreement</th><th>Vote Distribution</th></tr></thead><tbody id="ce-reject-body"></tbody></table>
                            </div>
                            <div class="text-center"><img id="ce-plot" class="img-fluid" style="max-width:800px" /></div>
                        </div>
                    </div>

                    <!-- v3.26.0: Batch Prediction -->
                    <div class="card mb-4 border-primary">
                        <div class="card-header bg-primary bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-lightning-charge-fill"></i> Batch Prediction (All Models)</span>
                            <button class="btn btn-sm btn-outline-primary" onclick="runBatchPredict()">
                                <i class="bi bi-play-fill"></i> Batch Predict
                            </button>
                        </div>
                        <div class="card-body d-none" id="bp-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Models</div><div class="metric-value" id="bp-models">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Predicted</div><div class="metric-value" id="bp-n">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Accuracy</div><div class="metric-value" id="bp-acc">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">High Conf</div><div class="metric-value text-success" id="bp-high">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Low Conf</div><div class="metric-value text-warning" id="bp-low">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Time</div><div class="metric-value" id="bp-time">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="bp-brief"></div>
                            <h6>Model Summary</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Model</th><th>Accuracy</th><th>Time (s)</th></tr></thead><tbody id="bp-model-body"></tbody></table>
                            </div>
                            <h6>Sample Predictions</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>#</th><th>Depth</th><th>True</th><th>Predicted</th><th>Agree</th><th>Votes</th></tr></thead><tbody id="bp-pred-body"></tbody></table>
                            </div>
                            <div class="text-center"><img id="bp-plot" class="img-fluid" style="max-width:800px" /></div>
                        </div>
                    </div>

                    <!-- v3.26.0: Model Selection Advisor -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-award-fill"></i> Model Selection Advisor</span>
                            <button class="btn btn-sm btn-outline-info" onclick="runModelAdvisor()">
                                <i class="bi bi-play-fill"></i> Advise
                            </button>
                        </div>
                        <div class="card-body d-none" id="ma-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Recommended</div><div class="metric-value" id="ma-best">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Balanced Acc</div><div class="metric-value" id="ma-bal">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Models Tested</div><div class="metric-value" id="ma-n">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Classes</div><div class="metric-value" id="ma-classes">-</div></div></div>
                            </div>
                            <div class="alert alert-info border small" id="ma-rationale"></div>
                            <div class="alert alert-light border small" id="ma-brief"></div>
                            <h6>Model Evaluations</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Model</th><th>Accuracy</th><th>Balanced</th><th>F1</th><th>Time</th><th>Stability</th><th>Overfit</th></tr></thead><tbody id="ma-eval-body"></tbody></table>
                            </div>
                            <div class="text-center"><img id="ma-plot" class="img-fluid" style="max-width:800px" /></div>
                        </div>
                    </div>

                    <!-- v3.26.0: Operational Readiness -->
                    <div class="card mb-4 border-dark">
                        <div class="card-header bg-dark bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-clipboard2-check-fill"></i> Operational Readiness Assessment</span>
                            <button class="btn btn-sm btn-outline-dark" onclick="runOperationalReadiness()">
                                <i class="bi bi-play-fill"></i> Assess
                            </button>
                        </div>
                        <div class="card-body d-none" id="or-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Status</div><div class="metric-value" id="or-status">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Score</div><div class="metric-value" id="or-score">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Passed</div><div class="metric-value text-success" id="or-pass">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Warnings</div><div class="metric-value text-warning" id="or-warn">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Failures</div><div class="metric-value text-danger" id="or-fail">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Best Model</div><div class="metric-value" id="or-model">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="or-brief"></div>
                            <h6>Readiness Checks</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Check</th><th>Grade</th><th>Detail</th><th>Threshold</th></tr></thead><tbody id="or-check-body"></tbody></table>
                            </div>
                            <div class="text-center"><img id="or-plot" class="img-fluid" style="max-width:800px" /></div>
                        </div>
                    </div>

                    <!-- v3.27.0: Geomechanical Feature Enrichment -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-geo-alt-fill"></i> Geomechanical Feature Enrichment (2026 Research)</span>
                            <button class="btn btn-sm btn-outline-danger" onclick="runGeomechFeatures()">
                                <i class="bi bi-play-fill"></i> Enrich
                            </button>
                        </div>
                        <div class="card-body d-none" id="gf-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Features Added</div><div class="metric-value" id="gf-n">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Avg Delta</div><div class="metric-value" id="gf-delta">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Models Improved</div><div class="metric-value" id="gf-improved">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Crit. Stressed</div><div class="metric-value text-danger" id="gf-crit">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">SHmax</div><div class="metric-value" id="gf-shmax">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">R-ratio</div><div class="metric-value" id="gf-ratio">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="gf-brief"></div>
                            <h6>Model Comparisons</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Model</th><th>Baseline</th><th>+ Geomech</th><th>Delta</th><th>Improved?</th></tr></thead><tbody id="gf-comp-body"></tbody></table>
                            </div>
                            <div class="text-center"><img id="gf-plot" class="img-fluid" style="max-width:800px" /></div>
                        </div>
                    </div>

                    <!-- v3.27.0: RLHF Iterative Loop -->
                    <div class="card mb-4 border-primary">
                        <div class="card-header bg-primary bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-arrow-repeat"></i> RLHF Iterative Feedback Loop</span>
                            <button class="btn btn-sm btn-outline-primary" onclick="runRlhfIterate()">
                                <i class="bi bi-play-fill"></i> Iterate
                            </button>
                        </div>
                        <div class="card-body d-none" id="ri-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Baseline</div><div class="metric-value" id="ri-base">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Final</div><div class="metric-value" id="ri-final">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Improvement</div><div class="metric-value" id="ri-gain">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Iterations</div><div class="metric-value" id="ri-n">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Converged?</div><div class="metric-value" id="ri-conv">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Conv. Iter</div><div class="metric-value" id="ri-citer">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="ri-brief"></div>
                            <h6>Iteration History</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Iter</th><th>Accuracy</th><th>vs Prev</th><th>Total</th><th>Errors</th><th>Pairs</th></tr></thead><tbody id="ri-iter-body"></tbody></table>
                            </div>
                            <div class="text-center"><img id="ri-plot" class="img-fluid" style="max-width:800px" /></div>
                        </div>
                    </div>

                    <!-- v3.27.0: Domain Shift Robustness -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-layers-fill"></i> Domain Shift Robustness (Cross-Zone)</span>
                            <button class="btn btn-sm btn-outline-warning" onclick="runDomainShift()">
                                <i class="bi bi-play-fill"></i> Test Shift
                            </button>
                        </div>
                        <div class="card-body d-none" id="ds-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Zones</div><div class="metric-value" id="ds-zones">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Same-Domain</div><div class="metric-value text-success" id="ds-same">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Cross-Domain</div><div class="metric-value text-danger" id="ds-cross">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Domain Gap</div><div class="metric-value" id="ds-gap">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Samples</div><div class="metric-value" id="ds-n">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="ds-brief"></div>
                            <h6>Zone Summary</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Zone</th><th>Depth Range</th><th>Samples</th><th>Self Acc</th><th>Transfer Acc</th><th>Gap</th></tr></thead><tbody id="ds-zone-body"></tbody></table>
                            </div>
                            <div class="text-center"><img id="ds-plot" class="img-fluid" style="max-width:800px" /></div>
                        </div>
                    </div>

                    <!-- v3.28.0: Decision Support Matrix -->
                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-signpost-2-fill"></i> Decision Support Matrix (GO/CAUTION/STOP)</span>
                            <button class="btn btn-sm btn-outline-success" onclick="runDecisionSupport()">
                                <i class="bi bi-play-fill"></i> Decide
                            </button>
                        </div>
                        <div class="card-body d-none" id="dsx-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Decision</div><div class="metric-value" id="dsx-decision">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Score</div><div class="metric-value" id="dsx-score">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Best Model</div><div class="metric-value" id="dsx-model">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Accuracy</div><div class="metric-value" id="dsx-acc">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="dsx-brief"></div>
                            <h6>Criteria Scores</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Criterion</th><th>Score</th><th>Weight</th><th>Detail</th></tr></thead><tbody id="dsx-crit-body"></tbody></table>
                            </div>
                            <h6>Recommendations</h6>
                            <ul id="dsx-recs" class="small"></ul>
                            <div class="text-center"><img id="dsx-plot" class="img-fluid" style="max-width:800px" /></div>
                        </div>
                    </div>

                    <!-- v3.28.0: Risk Communication Report -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-exclamation-diamond-fill"></i> Risk Communication Report (Plain English)</span>
                            <button class="btn btn-sm btn-outline-danger" onclick="runRiskReport()">
                                <i class="bi bi-play-fill"></i> Generate Report
                            </button>
                        </div>
                        <div class="card-body d-none" id="rr-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Overall Risk</div><div class="metric-value" id="rr-risk">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">High Risks</div><div class="metric-value text-danger" id="rr-high">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Medium Risks</div><div class="metric-value text-warning" id="rr-med">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Low Risks</div><div class="metric-value text-success" id="rr-low">-</div></div></div>
                            </div>
                            <div class="alert alert-info border" id="rr-exec"></div>
                            <div id="rr-risks"></div>
                            <div class="text-center"><img id="rr-plot" class="img-fluid" style="max-width:800px" /></div>
                        </div>
                    </div>

                    <!-- v3.28.0: Model Transparency Audit -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-eye-fill"></i> Model Transparency Audit</span>
                            <button class="btn btn-sm btn-outline-info" onclick="runTransparencyAudit()">
                                <i class="bi bi-play-fill"></i> Audit
                            </button>
                        </div>
                        <div class="card-body d-none" id="ta-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Audited</div><div class="metric-value" id="ta-n">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Correct</div><div class="metric-value text-success" id="ta-correct">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Wrong</div><div class="metric-value text-danger" id="ta-wrong">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Accuracy</div><div class="metric-value" id="ta-acc">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Models</div><div class="metric-value" id="ta-models">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="ta-brief"></div>
                            <h6>Top Global Features</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Feature</th><th>Importance</th></tr></thead><tbody id="ta-feat-body"></tbody></table>
                            </div>
                            <h6>Sample Transparency Cards</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>#</th><th>Depth</th><th>True</th><th>Predicted</th><th>Agreement</th><th>Geology</th></tr></thead><tbody id="ta-card-body"></tbody></table>
                            </div>
                            <div class="text-center"><img id="ta-plot" class="img-fluid" style="max-width:800px" /></div>
                        </div>
                    </div>

                    <!-- v3.29.0: Conformal Prediction -->
                    <div class="card mb-4 border-primary">
                        <div class="card-header bg-primary bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-shield-check"></i> Conformal Prediction (Calibrated Uncertainty)</span>
                            <button class="btn btn-sm btn-outline-primary" onclick="runConformalPredict()">
                                <i class="bi bi-play-fill"></i> Run
                            </button>
                        </div>
                        <div class="card-body d-none" id="cp-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Target</div><div class="metric-value" id="cp-target">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Coverage</div><div class="metric-value text-success" id="cp-coverage">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Avg Set Size</div><div class="metric-value" id="cp-setsize">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Singletons</div><div class="metric-value text-info" id="cp-singletons">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Model</div><div class="metric-value" id="cp-model">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="cp-brief"></div>
                            <h6>Prediction Sets (Test Samples)</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>#</th><th>Depth</th><th>True</th><th>Point Prediction</th><th>Conformal Set</th><th>Size</th><th>Covered?</th></tr></thead><tbody id="cp-table-body"></tbody></table>
                            </div>
                            <div class="text-center"><img id="cp-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.29.0: Physics-Consistency Validation -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-gear-wide-connected"></i> Physics-Consistency Validation</span>
                            <button class="btn btn-sm btn-outline-danger" onclick="runPhysicsConsistency()">
                                <i class="bi bi-play-fill"></i> Validate
                            </button>
                        </div>
                        <div class="card-body d-none" id="pc-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Consistency</div><div class="metric-value" id="pc-level">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Score</div><div class="metric-value" id="pc-score">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Violations</div><div class="metric-value text-danger" id="pc-violations">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">SHmax</div><div class="metric-value" id="pc-shmax">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">CS Rate</div><div class="metric-value" id="pc-csrate">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="pc-brief"></div>
                            <h6>Physics Checks</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Check</th><th>Score</th><th>Detail</th></tr></thead><tbody id="pc-check-body"></tbody></table>
                            </div>
                            <div class="text-center"><img id="pc-plot" class="img-fluid" style="max-width:800px" /></div>
                        </div>
                    </div>

                    <!-- v3.29.0: Active Learning Strategy -->
                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-graph-up-arrow"></i> Active Learning Strategy</span>
                            <button class="btn btn-sm btn-outline-success" onclick="runActiveLearning()">
                                <i class="bi bi-play-fill"></i> Analyze
                            </button>
                        </div>
                        <div class="card-body d-none" id="al-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Suggested</div><div class="metric-value" id="al-n">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Current Acc</div><div class="metric-value" id="al-acc">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Projected Gain</div><div class="metric-value text-success" id="al-gain">-</div></div></div>
                                <div class="col-md-2"><div class="metric-card"><div class="metric-label">Worth It?</div><div class="metric-value" id="al-worth">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Strategy</div><div class="metric-value" id="al-strategy">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="al-brief"></div>
                            <h6>Priority Samples for Expert Labeling</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>#</th><th>Depth</th><th>Prediction</th><th>Confidence</th><th>Disagreement</th><th>Why Selected</th></tr></thead><tbody id="al-table-body"></tbody></table>
                            </div>
                            <div class="text-center"><img id="al-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.30.0: Model Leaderboard -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-trophy-fill"></i> Model Performance Leaderboard</span>
                            <button class="btn btn-sm btn-outline-warning" onclick="runModelLeaderboard()">
                                <i class="bi bi-play-fill"></i> Compare
                            </button>
                        </div>
                        <div class="card-body d-none" id="lb-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Best Model</div><div class="metric-value" id="lb-best">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Best Accuracy</div><div class="metric-value text-success" id="lb-acc">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Models Tested</div><div class="metric-value" id="lb-count">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Weak Class</div><div class="metric-value text-warning" id="lb-weak">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="lb-brief"></div>
                            <h6>Leaderboard</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>#</th><th>Model</th><th>Bal. Accuracy</th><th>Mean F1</th><th>Worst Class</th><th>Worst F1</th></tr></thead><tbody id="lb-table-body"></tbody></table>
                            </div>
                            <div class="text-center"><img id="lb-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.30.0: Data Augmentation Advisor -->
                    <div class="card mb-4 border-dark">
                        <div class="card-header bg-dark bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-database-fill-gear"></i> Data Augmentation Advisor</span>
                            <button class="btn btn-sm btn-outline-dark" onclick="runAugmentationAdvisor()">
                                <i class="bi bi-play-fill"></i> Analyze
                            </button>
                        </div>
                        <div class="card-body d-none" id="da-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Undersampled</div><div class="metric-value text-danger" id="da-under">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Depth Gaps</div><div class="metric-value text-warning" id="da-gaps">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">SMOTE Gain</div><div class="metric-value" id="da-smote">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Actions</div><div class="metric-value" id="da-actions">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="da-brief"></div>
                            <h6>Recommendations</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Priority</th><th>Category</th><th>Action</th><th>Impact</th></tr></thead><tbody id="da-rec-body"></tbody></table>
                            </div>
                            <div class="text-center"><img id="da-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.31.0: BMA Ensemble -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-layers-fill"></i> Bayesian Model Averaging</span>
                            <button class="btn btn-sm btn-outline-info" onclick="runBMAEnsemble()">
                                <i class="bi bi-play-fill"></i> Run BMA
                            </button>
                        </div>
                        <div class="card-body d-none" id="bma-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">BMA Accuracy</div><div class="metric-value text-info" id="bma-acc">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Best Single</div><div class="metric-value text-secondary" id="bma-best">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Improvement</div><div class="metric-value" id="bma-improvement">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Calibration (ECE)</div><div class="metric-value" id="bma-ece">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="bma-brief"></div>
                            <h6>Model Weights</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Model</th><th>Weight</th><th>Accuracy</th><th>Contribution</th></tr></thead><tbody id="bma-weights-body"></tbody></table>
                            </div>
                            <div class="text-center"><img id="bma-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.31.0: Misclassification Analysis -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-bug-fill"></i> Misclassification Analysis</span>
                            <button class="btn btn-sm btn-outline-danger" onclick="runMisclassAnalysis()">
                                <i class="bi bi-play-fill"></i> Analyze Errors
                            </button>
                        </div>
                        <div class="card-body d-none" id="misclass-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Misclassified</div><div class="metric-value text-danger" id="misclass-count">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Error Rate</div><div class="metric-value text-warning" id="misclass-rate">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Confident Errors</div><div class="metric-value text-danger" id="misclass-confident">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Worst Class</div><div class="metric-value" id="misclass-worst">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="misclass-brief"></div>
                            <h6>Confusion Pairs</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>True</th><th>Predicted As</th><th>Count</th><th>Rate</th><th>Severity</th></tr></thead><tbody id="misclass-pairs-body"></tbody></table>
                            </div>
                            <h6>Per-Class Error Analysis</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Class</th><th>Samples</th><th>Errors</th><th>Error Rate</th><th>Status</th><th>Geological Reason</th></tr></thead><tbody id="misclass-class-body"></tbody></table>
                            </div>
                            <div class="text-center"><img id="misclass-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.31.0: Expert Feedback Loop -->
                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-person-check-fill"></i> Expert Feedback Loop (RLHF)</span>
                            <button class="btn btn-sm btn-outline-success" onclick="runExpertRetrain()">
                                <i class="bi bi-arrow-repeat"></i> Retrain
                            </button>
                        </div>
                        <div class="card-body d-none" id="feedback-results">
                            <div class="mb-3">
                                <p class="small text-muted">Submit expert corrections as JSON: <code>[{"index": 0, "corrected_class": "Continuous", "reason": "Visible on image log"}]</code></p>
                                <textarea class="form-control font-monospace small mb-2" id="feedback-input" rows="3" placeholder='[{"index": 0, "corrected_class": "Continuous", "reason": "Expert review"}]'></textarea>
                                <button class="btn btn-sm btn-success" onclick="submitFeedback()"><i class="bi bi-send-fill"></i> Submit Corrections</button>
                                <span class="small text-muted ms-2" id="feedback-status"></span>
                            </div>
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Original Accuracy</div><div class="metric-value text-secondary" id="fb-orig">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Corrected Accuracy</div><div class="metric-value text-success" id="fb-corr">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Improvement</div><div class="metric-value" id="fb-improvement">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Corrections Applied</div><div class="metric-value" id="fb-applied">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="fb-brief"></div>
                            <div class="text-center"><img id="fb-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.31.0: Wellbore Stability -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-cone-striped"></i> Wellbore Stability Assessment</span>
                            <button class="btn btn-sm btn-outline-warning" onclick="runWellboreStability()">
                                <i class="bi bi-play-fill"></i> Assess
                            </button>
                        </div>
                        <div class="card-body d-none" id="wb-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Mud Weight Window</div><div class="metric-value" id="wb-window">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Stress Regime</div><div class="metric-value" id="wb-regime">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Critical Fractures</div><div class="metric-value text-danger" id="wb-critical">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Window Status</div><div class="metric-value" id="wb-status">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="wb-brief"></div>
                            <h6>Recommendations</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Priority</th><th>Category</th><th>Action</th><th>Impact</th></tr></thead><tbody id="wb-rec-body"></tbody></table>
                            </div>
                            <div class="text-center"><img id="wb-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.32.0: Cross-Well Transfer -->
                    <div class="card mb-4 border-primary">
                        <div class="card-header bg-primary bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-arrow-left-right"></i> Cross-Well Transfer Validation</span>
                            <button class="btn btn-sm btn-outline-primary" onclick="runCrossWellTransfer()">
                                <i class="bi bi-play-fill"></i> Test Transfer
                            </button>
                        </div>
                        <div class="card-body d-none" id="transfer-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Transfer Accuracy</div><div class="metric-value text-primary" id="xfer-acc">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Baseline</div><div class="metric-value text-secondary" id="xfer-base">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Degradation</div><div class="metric-value" id="xfer-degrad">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Transfer Safe?</div><div class="metric-value" id="xfer-safe">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="xfer-brief"></div>
                            <div class="text-center"><img id="xfer-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.32.0: Prediction Reliability -->
                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-shield-fill-check"></i> Prediction Reliability Scoring</span>
                            <button class="btn btn-sm btn-outline-success" onclick="runReliabilityScoring()">
                                <i class="bi bi-play-fill"></i> Score
                            </button>
                        </div>
                        <div class="card-body d-none" id="reliability-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Mean Score</div><div class="metric-value" id="rel-mean">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">GREEN</div><div class="metric-value text-success" id="rel-green">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">AMBER</div><div class="metric-value text-warning" id="rel-amber">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">RED</div><div class="metric-value text-danger" id="rel-red">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="rel-brief"></div>
                            <div class="text-center"><img id="rel-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.32.0: Executive Dashboard -->
                    <div class="card mb-4 border-dark">
                        <div class="card-header bg-dark text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-speedometer2"></i> Executive Decision Dashboard</span>
                            <button class="btn btn-sm btn-outline-light" onclick="runExecutiveDashboard()">
                                <i class="bi bi-play-fill"></i> Generate
                            </button>
                        </div>
                        <div class="card-body d-none" id="exec-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Overall Confidence</div><div class="metric-value" id="exec-confidence">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Model Grade</div><div class="metric-value" id="exec-model-grade">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Data Grade</div><div class="metric-value" id="exec-data-grade">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Best Accuracy</div><div class="metric-value" id="exec-best-acc">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="exec-brief"></div>
                            <h6>Key Risks</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Severity</th><th>Risk</th><th>Mitigation</th></tr></thead><tbody id="exec-risks-body"></tbody></table>
                            </div>
                            <h6>Prioritized Actions</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>#</th><th>Action</th><th>Detail</th><th>Timeline</th></tr></thead><tbody id="exec-actions-body"></tbody></table>
                            </div>
                            <div class="text-center"><img id="exec-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.33.0: Deployment Readiness Checklist -->
                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-clipboard-check"></i> Field Deployment Readiness</span>
                            <button class="btn btn-sm btn-outline-success" onclick="runDeploymentReadiness()">
                                <i class="bi bi-play-fill"></i> Run Checklist
                            </button>
                        </div>
                        <div class="card-body d-none" id="deploy-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Decision</div><div class="metric-value" id="deploy-decision">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Checks Passed</div><div class="metric-value" id="deploy-passed">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Checks Failed</div><div class="metric-value" id="deploy-failed">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Total Checks</div><div class="metric-value" id="deploy-total">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="deploy-brief"></div>
                            <h6>Checklist Details</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Status</th><th>Check</th><th>Requirement</th><th>Actual</th><th>Category</th></tr></thead><tbody id="deploy-checks-body"></tbody></table>
                            </div>
                            <div class="text-center"><img id="deploy-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.33.0: Sensitivity Analysis -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-activity"></i> Sensitivity Analysis</span>
                            <button class="btn btn-sm btn-outline-warning" onclick="runSensitivityAnalysis()">
                                <i class="bi bi-play-fill"></i> Analyze
                            </button>
                        </div>
                        <div class="card-body d-none" id="sens-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Mean Flip Rate</div><div class="metric-value" id="sens-flip-rate">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Stable</div><div class="metric-value text-success" id="sens-stable">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Moderate</div><div class="metric-value text-warning" id="sens-moderate">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Sensitive</div><div class="metric-value text-danger" id="sens-sensitive">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="sens-brief"></div>
                            <h6>Per-Class Sensitivity</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Class</th><th>Predictions</th><th>Mean Flip Rate</th><th>Stability</th><th>Highly Sensitive</th><th>Level</th></tr></thead><tbody id="sens-class-body"></tbody></table>
                            </div>
                            <div class="text-center"><img id="sens-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.34.0: Model Monitoring -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-graph-up-arrow"></i> Model Monitoring & Drift Detection</span>
                            <button class="btn btn-sm btn-outline-info" onclick="runModelMonitoring()">
                                <i class="bi bi-play-fill"></i> Monitor
                            </button>
                        </div>
                        <div class="card-body d-none" id="monitor-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Drift Status</div><div class="metric-value" id="monitor-status">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Avg PSI</div><div class="metric-value" id="monitor-psi">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">High Drift Features</div><div class="metric-value" id="monitor-high">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Model Accuracy</div><div class="metric-value" id="monitor-acc">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="monitor-brief"></div>
                            <h6>Feature Drift</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Feature</th><th>PSI</th><th>Severity</th><th>Ref Mean</th><th>New Mean</th><th>Shift</th></tr></thead><tbody id="monitor-features-body"></tbody></table>
                            </div>
                            <h6>Class Distribution Shift</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Class</th><th>Ref %</th><th>New %</th><th>Shift %</th><th>Severity</th></tr></thead><tbody id="monitor-class-body"></tbody></table>
                            </div>
                            <div class="text-center"><img id="monitor-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.34.0: Formation Boundaries -->
                    <div class="card mb-4 border-primary">
                        <div class="card-header bg-primary bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-layers"></i> Formation Boundary Detection</span>
                            <button class="btn btn-sm btn-outline-primary" onclick="runFormationBoundaries()">
                                <i class="bi bi-play-fill"></i> Detect
                            </button>
                        </div>
                        <div class="card-body d-none" id="formation-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Boundaries Found</div><div class="metric-value" id="formation-count">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Segments</div><div class="metric-value" id="formation-segments">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Depth Range</div><div class="metric-value" id="formation-depth">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Fractures</div><div class="metric-value" id="formation-fractures">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="formation-brief"></div>
                            <h6>Detected Boundaries</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Depth (m)</th><th>Confidence</th><th>Z-Score</th><th>Signals</th><th>Dip Change</th></tr></thead><tbody id="formation-boundaries-body"></tbody></table>
                            </div>
                            <h6>Formation Segments</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>#</th><th>Top (m)</th><th>Bottom (m)</th><th>Thickness</th><th>Fractures</th><th>Mean Dip</th><th>Dominant Type</th><th>Density</th></tr></thead><tbody id="formation-segments-body"></tbody></table>
                            </div>
                            <div class="text-center"><img id="formation-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.34.0: Full Report -->
                    <div class="card mb-4 border-dark">
                        <div class="card-header bg-dark text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-file-earmark-text"></i> Comprehensive Analysis Report</span>
                            <button class="btn btn-sm btn-outline-light" onclick="runFullReport()">
                                <i class="bi bi-play-fill"></i> Generate Report
                            </button>
                        </div>
                        <div class="card-body d-none" id="report-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Overall Assessment</div><div class="metric-value" id="report-assessment">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Best Model</div><div class="metric-value" id="report-model">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Best Accuracy</div><div class="metric-value" id="report-accuracy">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Risks</div><div class="metric-value" id="report-risks">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="report-brief"></div>
                            <h6>Risks</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Severity</th><th>Risk</th><th>Detail</th><th>Mitigation</th></tr></thead><tbody id="report-risks-body"></tbody></table>
                            </div>
                            <h6>Recommended Actions</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>#</th><th>Action</th><th>Detail</th><th>Timeline</th></tr></thead><tbody id="report-actions-body"></tbody></table>
                            </div>
                            <div class="text-center"><img id="report-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.35.0: Fracture Connectivity -->
                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-diagram-3"></i> Fracture Network Connectivity</span>
                            <button class="btn btn-sm btn-outline-success" onclick="runFractureConnectivity()">
                                <i class="bi bi-play-fill"></i> Analyze
                            </button>
                        </div>
                        <div class="card-body d-none" id="conn-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Network Quality</div><div class="metric-value" id="conn-quality">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Fracture Sets</div><div class="metric-value" id="conn-sets">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Flow Azimuth</div><div class="metric-value" id="conn-flow">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Anisotropy</div><div class="metric-value" id="conn-aniso">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="conn-brief"></div>
                            <h6>Fracture Sets</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Set</th><th>Count</th><th>%</th><th>Azimuth</th><th>Dip</th><th>Spacing</th><th>Dominant Type</th></tr></thead><tbody id="conn-sets-body"></tbody></table>
                            </div>
                            <div class="text-center"><img id="conn-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.35.0: Failure Prediction -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-exclamation-triangle"></i> Wellbore Failure Prediction</span>
                            <button class="btn btn-sm btn-outline-danger" onclick="runFailurePrediction()">
                                <i class="bi bi-play-fill"></i> Predict
                            </button>
                        </div>
                        <div class="card-body d-none" id="failure-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">High Risk Zones</div><div class="metric-value text-danger" id="failure-high">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Medium Risk</div><div class="metric-value text-warning" id="failure-med">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">MW Window</div><div class="metric-value" id="failure-mw">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Risk Zones</div><div class="metric-value" id="failure-zones">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="failure-brief"></div>
                            <div class="text-center"><img id="failure-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.35.0: Batch Analysis -->
                    <div class="card mb-4 border-dark">
                        <div class="card-header bg-dark text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-collection"></i> Batch Multi-Well Analysis</span>
                            <button class="btn btn-sm btn-outline-light" onclick="runBatchAnalysis()">
                                <i class="bi bi-play-fill"></i> Run All Wells
                            </button>
                        </div>
                        <div class="card-body d-none" id="batch-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Wells Analyzed</div><div class="metric-value" id="batch-wells">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Total Samples</div><div class="metric-value" id="batch-samples">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Avg Accuracy</div><div class="metric-value" id="batch-avg">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Best Well</div><div class="metric-value" id="batch-best">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="batch-brief"></div>
                            <h6>Well Comparison</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Well</th><th>Samples</th><th>Best Model</th><th>Accuracy</th><th>Data Quality</th><th>Model Quality</th></tr></thead><tbody id="batch-wells-body"></tbody></table>
                            </div>
                            <div class="text-center"><img id="batch-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.36.0: Uncertainty Zonation -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-map"></i> Uncertainty-Aware Zonation</span>
                            <button class="btn btn-sm btn-outline-warning" onclick="runUncertaintyZonation()">
                                <i class="bi bi-play-fill"></i> Zone
                            </button>
                        </div>
                        <div class="card-body d-none" id="zone-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Confident</div><div class="metric-value text-success" id="zone-confident">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Uncertain</div><div class="metric-value text-warning" id="zone-uncertain">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Unreliable</div><div class="metric-value text-danger" id="zone-unreliable">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Depth Zones</div><div class="metric-value" id="zone-count">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="zone-brief"></div>
                            <div class="text-center"><img id="zone-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.36.0: Aperture-Permeability -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-droplet-half"></i> Fracture Aperture & Permeability</span>
                            <button class="btn btn-sm btn-outline-info" onclick="runAperturePermeability()">
                                <i class="bi bi-play-fill"></i> Estimate
                            </button>
                        </div>
                        <div class="card-body d-none" id="aperture-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Mean Aperture</div><div class="metric-value" id="aperture-mean">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Bulk Perm</div><div class="metric-value" id="aperture-perm">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Max Aperture</div><div class="metric-value" id="aperture-max">-</div></div></div>
                                <div class="col-md-3"><div class="metric-card"><div class="metric-label">Fractures</div><div class="metric-value" id="aperture-count">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="aperture-brief"></div>
                            <h6>Aperture by Fracture Type</h6>
                            <div class="table-responsive mb-2">
                                <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Type</th><th>Count</th><th>Mean Aperture</th><th>Mean Perm (D)</th><th>Multiplier</th></tr></thead><tbody id="aperture-class-body"></tbody></table>
                            </div>
                            <div class="text-center"><img id="aperture-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.36.0: Well Correlation -->
                    <div class="card mb-4 border-primary">
                        <div class="card-header bg-primary bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-arrow-left-right"></i> Well Correlation Analysis</span>
                            <button class="btn btn-sm btn-outline-primary" onclick="runWellCorrelation()">
                                <i class="bi bi-play-fill"></i> Compare
                            </button>
                        </div>
                        <div class="card-body d-none" id="corr-results">
                            <div class="row g-2 mb-3">
                                <div class="col-md-4"><div class="metric-card"><div class="metric-label">Wells Compared</div><div class="metric-value" id="corr-wells">-</div></div></div>
                                <div class="col-md-4"><div class="metric-card"><div class="metric-label">Best Correlation</div><div class="metric-value" id="corr-best">-</div></div></div>
                                <div class="col-md-4"><div class="metric-card"><div class="metric-label">Correlation Level</div><div class="metric-value" id="corr-level">-</div></div></div>
                            </div>
                            <div class="alert alert-light border small" id="corr-brief"></div>
                            <div class="text-center"><img id="corr-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.37.0: Terzaghi Correction -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-bullseye"></i> Terzaghi Sampling Bias Correction</span>
                            <button class="btn btn-sm btn-outline-danger" onclick="runTerzaghiCorrection()">
                                <i class="bi bi-play-fill"></i> Analyze Bias
                            </button>
                        </div>
                        <div class="card-body" id="terzaghi-results" style="display:none">
                            <div class="row mb-2" id="terzaghi-metrics"></div>
                            <div class="alert alert-light border small" id="terzaghi-brief"></div>
                            <div class="text-center"><img id="terzaghi-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.37.0: Effective Stress Profile -->
                    <div class="card mb-4 border-primary">
                        <div class="card-header bg-primary bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-arrow-down-up"></i> Effective Stress Profile (Biot)</span>
                            <button class="btn btn-sm btn-outline-primary" onclick="runEffectiveStress()">
                                <i class="bi bi-play-fill"></i> Compute Profile
                            </button>
                        </div>
                        <div class="card-body" id="effstress-results" style="display:none">
                            <div class="row mb-2" id="effstress-metrics"></div>
                            <div class="alert alert-light border small" id="effstress-brief"></div>
                            <div class="text-center"><img id="effstress-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.37.0: Decision Intelligence -->
                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-shield-check"></i> Decision Intelligence Dashboard</span>
                            <button class="btn btn-sm btn-outline-success" onclick="runDecisionIntelligence()">
                                <i class="bi bi-play-fill"></i> Generate Report
                            </button>
                        </div>
                        <div class="card-body" id="decintel-results" style="display:none">
                            <div class="row mb-2" id="decintel-metrics"></div>
                            <div id="decintel-risk-matrix"></div>
                            <div id="decintel-glossary" style="display:none"></div>
                            <div class="alert alert-light border small" id="decintel-brief"></div>
                            <div class="text-center"><img id="decintel-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.37.0: Accuracy Feedback Loop -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-arrow-repeat"></i> Accuracy Feedback Loop</span>
                            <button class="btn btn-sm btn-outline-warning" onclick="loadAccuracyTrend()">
                                <i class="bi bi-graph-up"></i> View Trend
                            </button>
                        </div>
                        <div class="card-body" id="feedback-results" style="display:none">
                            <div class="row mb-2" id="feedback-metrics"></div>
                            <div id="feedback-form" class="mb-3">
                                <h6>Submit Field Outcome</h6>
                                <div class="row g-2">
                                    <div class="col-md-3"><input type="number" class="form-control form-control-sm" id="fb-depth" placeholder="Depth (m)" /></div>
                                    <div class="col-md-3"><input type="text" class="form-control form-control-sm" id="fb-predicted" placeholder="Predicted type" /></div>
                                    <div class="col-md-3"><input type="text" class="form-control form-control-sm" id="fb-actual" placeholder="Actual type" /></div>
                                    <div class="col-md-3"><button class="btn btn-sm btn-warning w-100" onclick="submitOutcome()">Submit</button></div>
                                </div>
                            </div>
                            <div class="alert alert-light border small" id="feedback-brief"></div>
                        </div>
                    </div>

                    <!-- v3.37.0: Failure-Aware Classification -->
                    <div class="card mb-4 border-dark">
                        <div class="card-header bg-dark bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-exclamation-diamond-fill"></i> Failure-Aware Classification</span>
                            <button class="btn btn-sm btn-outline-dark" onclick="runFailureAwareClassification()">
                                <i class="bi bi-play-fill"></i> Run Analysis
                            </button>
                        </div>
                        <div class="card-body" id="failaware-results" style="display:none">
                            <div class="row mb-2" id="failaware-metrics"></div>
                            <div class="alert alert-light border small" id="failaware-brief"></div>
                            <div class="text-center"><img id="failaware-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.38.0: SSE Streaming Inversion -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-broadcast"></i> Live Streaming Inversion (SSE)</span>
                            <button class="btn btn-sm btn-outline-info" onclick="runStreamingInversion()">
                                <i class="bi bi-play-fill"></i> Stream Analysis
                            </button>
                        </div>
                        <div class="card-body" id="stream-results" style="display:none">
                            <div class="progress mb-2" id="stream-progress-bar" style="display:none"><div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width:0%"></div></div>
                            <div class="row mb-2" id="stream-metrics"></div>
                            <div class="text-center"><img id="stream-plot" class="img-fluid" style="max-width:700px" /></div>
                        </div>
                    </div>

                    <!-- v3.38.0: Data Validation -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-shield-exclamation"></i> Data Quality Validation</span>
                            <button class="btn btn-sm btn-outline-danger" onclick="runDataValidation()">
                                <i class="bi bi-play-fill"></i> Validate Data
                            </button>
                        </div>
                        <div class="card-body" id="validate-results" style="display:none">
                            <div class="row mb-2" id="validate-metrics"></div>
                            <div id="validate-issues"></div>
                            <div class="alert alert-light border small" id="validate-brief"></div>
                            <div class="text-center"><img id="validate-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.38.0: What-If Simulator -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-toggles"></i> What-If Scenario Simulator</span>
                            <button class="btn btn-sm btn-outline-warning" onclick="runWhatIf()">
                                <i class="bi bi-play-fill"></i> Compare Scenarios
                            </button>
                        </div>
                        <div class="card-body" id="whatif-results" style="display:none">
                            <div class="row mb-2" id="whatif-metrics"></div>
                            <div class="alert alert-light border small" id="whatif-brief"></div>
                            <div class="text-center"><img id="whatif-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.38.0: Ensemble Voting -->
                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-people-fill"></i> Multi-Model Ensemble Voting</span>
                            <button class="btn btn-sm btn-outline-success" onclick="runEnsembleVote()">
                                <i class="bi bi-play-fill"></i> Run Ensemble
                            </button>
                        </div>
                        <div class="card-body" id="ensemble-results" style="display:none">
                            <div class="row mb-2" id="ensemble-metrics"></div>
                            <div class="alert alert-light border small" id="ensemble-brief"></div>
                            <div class="text-center"><img id="ensemble-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.38.0: Fast Classify -->
                    <div class="card mb-4 border-primary">
                        <div class="card-header bg-primary bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-lightning-fill"></i> Fast Classification (Optimized)</span>
                            <button class="btn btn-sm btn-outline-primary" onclick="runFastClassify()">
                                <i class="bi bi-play-fill"></i> Speed Test
                            </button>
                        </div>
                        <div class="card-body" id="fastclassify-results" style="display:none">
                            <div class="row mb-2" id="fastclassify-metrics"></div>
                            <div class="alert alert-light border small" id="fastclassify-brief"></div>
                            <div class="text-center"><img id="fastclassify-plot" class="img-fluid" style="max-width:900px" /></div>
                        </div>
                    </div>

                    <!-- v3.40.0: Regulatory + Workflow + Alerts + Lifecycle + Benchmark -->

                    <!-- [135] Regulatory Compliance -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-shield-check"></i> Regulatory Compliance</span>
                            <button class="btn btn-sm btn-light" onclick="runRegulatoryCompliance()">Check</button>
                        </div>
                        <div class="card-body" id="compliance-results" style="display:none;">
                            <div id="compliance-brief" class="alert alert-light mb-2"></div>
                            <div class="row" id="compliance-metrics"></div>
                            <div id="compliance-details" class="mt-2"></div>
                            <img id="compliance-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- [136] Operator Workflow -->
                    <div class="card mb-4 border-primary">
                        <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-list-check"></i> Operator Workflow</span>
                            <button class="btn btn-sm btn-light" onclick="runWorkflowChecklist()">Check</button>
                        </div>
                        <div class="card-body" id="workflow-results" style="display:none;">
                            <div id="workflow-brief" class="alert alert-light mb-2"></div>
                            <div class="row" id="workflow-metrics"></div>
                            <div id="workflow-steps" class="mt-2"></div>
                        </div>
                    </div>

                    <!-- [137] Smart Alerts -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-bell"></i> Smart Alerts</span>
                            <button class="btn btn-sm btn-dark" onclick="runSmartAlerts()">Scan</button>
                        </div>
                        <div class="card-body" id="alert-results" style="display:none;">
                            <div id="alert-brief" class="alert alert-light mb-2"></div>
                            <div class="row" id="alert-metrics"></div>
                            <div id="alert-details" class="mt-2"></div>
                        </div>
                    </div>

                    <!-- [138] Model Lifecycle -->
                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-heart-pulse"></i> Model Lifecycle</span>
                            <button class="btn btn-sm btn-light" onclick="runModelLifecycle()">Assess</button>
                        </div>
                        <div class="card-body" id="lifecycle-results" style="display:none;">
                            <div id="lifecycle-brief" class="alert alert-light mb-2"></div>
                            <div class="row" id="lifecycle-metrics"></div>
                            <div id="lifecycle-details" class="mt-2"></div>
                            <img id="lifecycle-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- [139] Performance Benchmark -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-speedometer2"></i> Performance Benchmark</span>
                            <button class="btn btn-sm btn-light" onclick="runBenchmark()">Run</button>
                        </div>
                        <div class="card-body" id="benchmark-results" style="display:none;">
                            <div id="benchmark-brief" class="alert alert-light mb-2"></div>
                            <div class="row" id="benchmark-metrics"></div>
                            <div id="benchmark-details" class="mt-2"></div>
                            <img id="benchmark-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- v3.39.0: Counterfactual XAI + Graph + Attention + Privacy + Recalibration -->

                    <!-- [130] Counterfactual Explanations -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-signpost-split"></i> Counterfactual Explanations (XAI)</span>
                            <button class="btn btn-sm btn-light" onclick="runCounterfactual()">Analyze</button>
                        </div>
                        <div class="card-body" id="counterfactual-results" style="display:none;">
                            <div id="counterfactual-brief" class="alert alert-light mb-2"></div>
                            <div class="row" id="counterfactual-metrics"></div>
                            <div id="counterfactual-details" class="mt-2"></div>
                            <img id="counterfactual-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- [131] Fracture Graph Analysis -->
                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-diagram-3"></i> Fracture Graph Analysis</span>
                            <button class="btn btn-sm btn-light" onclick="runFractureGraph()">Analyze</button>
                        </div>
                        <div class="card-body" id="graph-results" style="display:none;">
                            <div id="graph-brief" class="alert alert-light mb-2"></div>
                            <div class="row" id="graph-metrics"></div>
                            <div id="graph-details" class="mt-2"></div>
                            <img id="graph-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- [132] Depth-Sequence Attention -->
                    <div class="card mb-4 border-primary">
                        <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-layers"></i> Depth-Sequence Attention</span>
                            <button class="btn btn-sm btn-light" onclick="runDepthAttention()">Analyze</button>
                        </div>
                        <div class="card-body" id="attention-results" style="display:none;">
                            <div id="attention-brief" class="alert alert-light mb-2"></div>
                            <div class="row" id="attention-metrics"></div>
                            <div id="attention-details" class="mt-2"></div>
                            <img id="attention-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- [133] Differential Privacy -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-shield-lock"></i> Differential Privacy</span>
                            <button class="btn btn-sm btn-dark" onclick="runPrivatePredict()">Generate</button>
                        </div>
                        <div class="card-body" id="privacy-results" style="display:none;">
                            <div id="privacy-brief" class="alert alert-light mb-2"></div>
                            <div class="row" id="privacy-metrics"></div>
                            <div id="privacy-details" class="mt-2"></div>
                            <img id="privacy-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- [134] Auto-Recalibration -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-arrow-repeat"></i> Auto-Recalibration</span>
                            <button class="btn btn-sm btn-light" onclick="runAutoRecalibrate()">Recalibrate</button>
                        </div>
                        <div class="card-body" id="recalibrate-results" style="display:none;">
                            <div id="recalibrate-brief" class="alert alert-light mb-2"></div>
                            <div class="row" id="recalibrate-metrics"></div>
                            <div id="recalibrate-details" class="mt-2"></div>
                            <img id="recalibrate-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- v3.41.0: Feature Ranking -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-bar-chart-steps"></i> Feature Importance Ranking</span>
                            <button class="btn btn-sm btn-outline-info" onclick="runFeatureRanking()">Rank Features</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Multi-method feature importance: RF impurity + permutation + correlation consensus ranking.</p>
                            <div id="feature-ranking-results" style="display:none;"></div>
                            <img id="feature-ranking-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- v3.41.0: Cluster Stability -->
                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-diagram-3"></i> Cluster Stability Analysis</span>
                            <button class="btn btn-sm btn-outline-success" onclick="runClusterStability()">Analyze Stability</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Silhouette, elbow, and gap statistic for optimal cluster count and reliability.</p>
                            <div id="cluster-stability-results" style="display:none;"></div>
                            <img id="cluster-stability-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- v3.41.0: Well Similarity -->
                    <div class="card mb-4 border-primary">
                        <div class="card-header bg-primary bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-grid-3x3"></i> Well Similarity Matrix</span>
                            <button class="btn btn-sm btn-outline-primary" onclick="runWellSimilarity()">Compare Wells</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Statistical distance metrics between wells: can they share models?</p>
                            <div id="well-similarity-results" style="display:none;"></div>
                            <img id="well-similarity-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- v3.41.0: Prediction Timeline -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-graph-up"></i> Prediction Timeline</span>
                            <button class="btn btn-sm btn-outline-warning" onclick="runPredictionTimeline()">Generate Timeline</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Prediction confidence along depth — identifies low-confidence zones for review.</p>
                            <div id="prediction-timeline-results" style="display:none;"></div>
                            <img id="prediction-timeline-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- v3.41.0: Augmentation Preview -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-plus-circle"></i> Data Augmentation Preview</span>
                            <button class="btn btn-sm btn-outline-danger" onclick="runAugmentationPreview()">Preview Augmentation</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Test 3 augmentation strategies (noise, SMOTE, boundary) without modifying data.</p>
                            <div id="augmentation-preview-results" style="display:none;"></div>
                            <img id="augmentation-preview-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- v3.42.0: Sensitivity Matrix -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-grid-fill"></i> Feature Interaction Sensitivity</span>
                            <button class="btn btn-sm btn-outline-danger" onclick="runSensitivityMatrix()">Analyze Interactions</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">N x N feature interaction heatmap: synergistic vs redundant feature pairs.</p>
                            <div id="sensitivity-matrix-results" style="display:none;"></div>
                            <img id="sensitivity-matrix-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- v3.42.0: Prediction Explanation -->
                    <div class="card mb-4 border-primary">
                        <div class="card-header bg-primary bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-lightbulb"></i> Prediction Explanations</span>
                            <button class="btn btn-sm btn-outline-primary" onclick="runPredictionExplanation()">Explain Predictions</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Per-sample explanations: top-3 features driving each prediction decision.</p>
                            <div id="prediction-explanation-results" style="display:none;"></div>
                            <img id="prediction-explanation-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- v3.42.0: Model Comparison Detailed -->
                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-trophy"></i> Detailed Model Comparison</span>
                            <button class="btn btn-sm btn-outline-success" onclick="runModelComparisonDetailed()">Compare Models</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">6-model comparison with per-class precision/recall/F1 breakdown.</p>
                            <div id="model-comparison-detail-results" style="display:none;"></div>
                            <img id="model-comparison-detail-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- v3.42.0: Data Profile -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-clipboard-data"></i> Data Profile</span>
                            <button class="btn btn-sm btn-outline-info" onclick="runDataProfile()">Profile Data</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Statistical summary: distributions, correlations, quality metrics per column.</p>
                            <div id="data-profile-results" style="display:none;"></div>
                            <img id="data-profile-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- v3.42.0: Anomaly Score -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-exclamation-diamond"></i> Anomaly Scoring</span>
                            <button class="btn btn-sm btn-outline-warning" onclick="runAnomalyScore()">Score Anomalies</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Per-sample outlier detection with Isolation Forest, depth zone clustering.</p>
                            <div id="anomaly-score-results" style="display:none;"></div>
                            <img id="anomaly-score-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- v3.43.0: Fracture Spacing + Stress Polygon + Orientation Clustering + Depth Trends + Confidence Map -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-rulers"></i> Fracture Spacing Analysis</span>
                            <button class="btn btn-sm btn-outline-info" onclick="runFractureSpacing()">Analyze Spacing</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Statistical spacing distribution, log-normal fit, clustering coefficient, depth zones.</p>
                            <div id="fracture-spacing-results" style="display:none;"></div>
                            <img id="fracture-spacing-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-hexagon"></i> Stress Polygon</span>
                            <button class="btn btn-sm btn-outline-danger" onclick="runStressPolygon()">Build Polygon</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Anderson faulting stress bounds: allowable SHmax/Shmin for each regime.</p>
                            <div id="stress-polygon-results" style="display:none;"></div>
                            <img id="stress-polygon-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-diagram-3"></i> Orientation Clustering</span>
                            <button class="btn btn-sm btn-outline-success" onclick="runOrientationClustering()">Cluster Orientations</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">K-means on fracture pole orientations with silhouette-based optimal k selection.</p>
                            <div id="orientation-clustering-results" style="display:none;"></div>
                            <img id="orientation-clustering-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-graph-down-arrow"></i> Depth Trend Analysis</span>
                            <button class="btn btn-sm btn-outline-warning" onclick="runDepthTrend()">Analyze Trends</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Rolling-window trends in azimuth, dip, and density vs depth with breakpoint detection.</p>
                            <div id="depth-trend-results" style="display:none;"></div>
                            <img id="depth-trend-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <div class="card mb-4 border-primary">
                        <div class="card-header bg-primary bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-bullseye"></i> Confidence Map</span>
                            <button class="btn btn-sm btn-outline-primary" onclick="runConfidenceMap()">Map Confidence</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Per-sample classification confidence distribution, calibration, and uncertain sample identification.</p>
                            <div id="confidence-map-results" style="display:none;"></div>
                            <img id="confidence-map-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- v3.44.0: PCA + Fracture Intensity + CV Stability + Geomech Summary + Correlation Network -->
                    <div class="card mb-4 border-primary">
                        <div class="card-header bg-primary bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-bounding-box"></i> PCA Analysis</span>
                            <button class="btn btn-sm btn-outline-primary" onclick="runPCA()">Run PCA</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Principal Component Analysis: variance explained, loadings, biplot.</p>
                            <div id="pca-results" style="display:none;"></div>
                            <img id="pca-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-bar-chart-steps"></i> Fracture Intensity (P10)</span>
                            <button class="btn btn-sm btn-outline-success" onclick="runFractureIntensity()">Profile Intensity</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">P10 linear intensity profile along the well in depth bins.</p>
                            <div id="fracture-intensity-results" style="display:none;"></div>
                            <img id="fracture-intensity-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-shuffle"></i> CV Stability</span>
                            <button class="btn btn-sm btn-outline-warning" onclick="runCVStability()">Test Stability</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Cross-validation stability: per-fold variance, overfitting detection.</p>
                            <div id="cv-stability-results" style="display:none;"></div>
                            <img id="cv-stability-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-clipboard2-data"></i> Geomechanical Summary</span>
                            <button class="btn btn-sm btn-outline-danger" onclick="runGeomechSummary()">Summarize</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Integrated stress, classification, and risk summary in one card.</p>
                            <div id="geomech-summary-results" style="display:none;"></div>
                            <img id="geomech-summary-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-share"></i> Correlation Network</span>
                            <button class="btn btn-sm btn-outline-info" onclick="runCorrelationNetwork()">Map Correlations</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Feature correlation matrix with strong/weak link identification.</p>
                            <div id="correlation-network-results" style="display:none;"></div>
                            <img id="correlation-network-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- v3.45.0: Mohr Interactive + Class Balance + Feature Importance + Trajectory Impact + RQD -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-circle"></i> Mohr Circle Interactive</span>
                            <button class="btn btn-sm btn-outline-danger" onclick="runMohrInteractive()">Build Mohr</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Mohr circle with slip/dilation tendency overlay at user-specified stress.</p>
                            <div id="mohr-interactive-results" style="display:none;"></div>
                            <img id="mohr-interactive-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-pie-chart"></i> Class Balance Report</span>
                            <button class="btn btn-sm btn-outline-warning" onclick="runClassBalance()">Check Balance</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Detailed class imbalance analysis with SMOTE eligibility.</p>
                            <div id="class-balance-results" style="display:none;"></div>
                            <img id="class-balance-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-bar-chart-line"></i> Feature Importance Comparison</span>
                            <button class="btn btn-sm btn-outline-info" onclick="runFeatureImportanceCompare()">Compare Methods</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">RF vs GBM vs permutation importance side by side.</p>
                            <div id="feature-importance-cmp-results" style="display:none;"></div>
                            <img id="feature-importance-cmp-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <div class="card mb-4 border-primary">
                        <div class="card-header bg-primary bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-arrow-down-right-circle"></i> Trajectory Impact</span>
                            <button class="btn btn-sm btn-outline-primary" onclick="runTrajectoryImpact()">Assess Bias</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Wellbore trajectory sampling bias via Terzaghi correction.</p>
                            <div id="trajectory-impact-results" style="display:none;"></div>
                            <img id="trajectory-impact-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-gem"></i> Rock Quality (RQD)</span>
                            <button class="btn btn-sm btn-outline-success" onclick="runRQD()">Estimate RQD</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Rock Quality Designation from fracture spacing with Priest-Hudson model.</p>
                            <div id="rqd-results" style="display:none;"></div>
                            <img id="rqd-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- Stereonet Density -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-bullseye"></i> Stereonet Pole Density</span>
                            <button class="btn btn-sm btn-outline-info" onclick="runStereonetDensity()">
                                <i class="bi bi-play-fill"></i> Run
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Kamb contour density analysis of fracture pole orientations.</p>
                            <div id="stereonet-density-results" style="display:none;"></div>
                            <img id="stereonet-density-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- Stress Path -->
                    <div class="card mb-4 border-primary">
                        <div class="card-header bg-primary bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-arrow-down-up"></i> Stress Path Simulation</span>
                            <button class="btn btn-sm btn-outline-primary" onclick="runStressPath()">
                                <i class="bi bi-play-fill"></i> Run
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Stress magnitude vs depth for NF/SS/RF regimes with frictional limits.</p>
                            <div id="stress-path-results" style="display:none;"></div>
                            <img id="stress-path-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- Aperture Distribution -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-distribute-vertical"></i> Aperture Distribution</span>
                            <button class="btn btn-sm btn-outline-warning" onclick="runApertureDistribution()">
                                <i class="bi bi-play-fill"></i> Run
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Statistical fracture aperture modeling with permeability estimation.</p>
                            <div id="aperture-dist-results" style="display:none;"></div>
                            <img id="aperture-dist-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- Stability Window -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-shield-fill-check"></i> Well Stability Window</span>
                            <button class="btn btn-sm btn-outline-danger" onclick="runStabilityWindow()">
                                <i class="bi bi-play-fill"></i> Run
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Safe mud weight window computation for wellbore stability.</p>
                            <div id="stability-window-results" style="display:none;"></div>
                            <img id="stability-window-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- Orientation Statistics -->
                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-compass"></i> Orientation Statistics</span>
                            <button class="btn btn-sm btn-outline-success" onclick="runOrientationStats()">
                                <i class="bi bi-play-fill"></i> Run
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Fisher/von Mises circular statistics and orientation tensor analysis.</p>
                            <div id="orientation-stats-results" style="display:none;"></div>
                            <img id="orientation-stats-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- Slip Tendency Map -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-map"></i> Slip Tendency Map</span>
                            <button class="btn btn-sm btn-outline-danger" onclick="runSlipTendencyMap()">
                                <i class="bi bi-play-fill"></i> Run
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Slip and dilation tendency mapped across azimuth-dip space.</p>
                            <div id="slip-tendency-map-results" style="display:none;"></div>
                            <img id="slip-tendency-map-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- Formation Pressure -->
                    <div class="card mb-4 border-primary">
                        <div class="card-header bg-primary bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-thermometer-half"></i> Formation Pressure Profile</span>
                            <button class="btn btn-sm btn-outline-primary" onclick="runFormationPressure()">
                                <i class="bi bi-play-fill"></i> Run
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Pore pressure, overburden, and fracture gradient vs depth.</p>
                            <div id="formation-pressure-results" style="display:none;"></div>
                            <img id="formation-pressure-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- Fracture Sets -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-diagram-3"></i> Fracture Set Identification</span>
                            <button class="btn btn-sm btn-outline-info" onclick="runFractureSets()">
                                <i class="bi bi-play-fill"></i> Run
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Automated fracture set identification from orientation clusters.</p>
                            <div id="fracture-sets-results" style="display:none;"></div>
                            <img id="fracture-sets-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- Breakout Prediction -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-exclamation-triangle"></i> Breakout Prediction</span>
                            <button class="btn btn-sm btn-outline-warning" onclick="runBreakoutPrediction()">
                                <i class="bi bi-play-fill"></i> Run
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Wellbore breakout width and orientation from stress state.</p>
                            <div id="breakout-prediction-results" style="display:none;"></div>
                            <img id="breakout-prediction-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- Data Completeness -->
                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-clipboard-data"></i> Data Completeness Audit</span>
                            <button class="btn btn-sm btn-outline-success" onclick="runDataCompleteness()">
                                <i class="bi bi-play-fill"></i> Run
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Per-column completeness, quality metrics, and gap analysis.</p>
                            <div id="data-completeness-results" style="display:none;"></div>
                            <img id="data-completeness-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- Stress Rotation -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-arrow-repeat"></i> Stress Rotation Analysis</span>
                            <button class="btn btn-sm btn-outline-warning" onclick="runStressRotation()">
                                <i class="bi bi-play-fill"></i> Run
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Detect stress direction rotation with depth.</p>
                            <div id="stress-rotation-results" style="display:none;"></div>
                            <img id="stress-rotation-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- Hydraulic Conductivity -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-droplet-half"></i> Hydraulic Conductivity</span>
                            <button class="btn btn-sm btn-outline-info" onclick="runHydraulicConductivity()">
                                <i class="bi bi-play-fill"></i> Run
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Bulk hydraulic conductivity from fracture network (cubic law).</p>
                            <div id="hydraulic-conductivity-results" style="display:none;"></div>
                            <img id="hydraulic-conductivity-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- Trajectory Optimization -->
                    <div class="card mb-4 border-primary">
                        <div class="card-header bg-primary bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-geo-alt-fill"></i> Trajectory Optimization</span>
                            <button class="btn btn-sm btn-outline-primary" onclick="runTrajectoryOptimization()">
                                <i class="bi bi-play-fill"></i> Run
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Find optimal drilling direction for wellbore stability.</p>
                            <div id="trajectory-opt-results" style="display:none;"></div>
                            <img id="trajectory-opt-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- Criticality Ranking -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-sort-numeric-down"></i> Criticality Ranking</span>
                            <button class="btn btn-sm btn-outline-danger" onclick="runCriticalityRanking()">
                                <i class="bi bi-play-fill"></i> Run
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Rank individual fractures by criticality score.</p>
                            <div id="criticality-ranking-results" style="display:none;"></div>
                            <img id="criticality-ranking-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- Geomech Log -->
                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-bar-chart-steps"></i> Geomechanical Log</span>
                            <button class="btn btn-sm btn-outline-success" onclick="runGeomechLog()">
                                <i class="bi bi-play-fill"></i> Run
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Synthetic geomechanical log from fracture data.</p>
                            <div id="geomech-log-results" style="display:none;"></div>
                            <img id="geomech-log-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- Stress Polygon [v3.49.0] -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-pentagon"></i> Stress Polygon</span>
                            <button class="btn btn-sm btn-outline-warning" onclick="runStressPolygon()">
                                <i class="bi bi-play-fill"></i> Run
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Allowable stress states diagram with frictional limits.</p>
                            <div id="stress-polygon-results" style="display:none;"></div>
                            <img id="stress-polygon-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- Fracture Permeability Tensor [v3.49.0] -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-grid-3x3"></i> Fracture Permeability Tensor</span>
                            <button class="btn btn-sm btn-outline-info" onclick="runFracPermTensor()">
                                <i class="bi bi-play-fill"></i> Run
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Full 3D permeability tensor from fracture orientations.</p>
                            <div id="frac-perm-tensor-results" style="display:none;"></div>
                            <img id="frac-perm-tensor-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- Wellbore Breakout Width [v3.49.0] -->
                    <div class="card mb-4 border-primary">
                        <div class="card-header bg-primary bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-circle-half"></i> Wellbore Breakout Width</span>
                            <button class="btn btn-sm btn-outline-primary" onclick="runBreakoutWidth()">
                                <i class="bi bi-play-fill"></i> Run
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Breakout width vs mud weight with optimization.</p>
                            <div id="breakout-width-results" style="display:none;"></div>
                            <img id="breakout-width-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- Pore Pressure Prediction [v3.49.0] -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-thermometer-high"></i> Pore Pressure Prediction</span>
                            <button class="btn btn-sm btn-outline-danger" onclick="runPorePressurePrediction()">
                                <i class="bi bi-play-fill"></i> Run
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Eaton/Bowers pore pressure profile prediction.</p>
                            <div id="pp-prediction-results" style="display:none;"></div>
                            <img id="pp-prediction-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- Fault Reactivation [v3.49.0] -->
                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-lightning-charge"></i> Fault Reactivation</span>
                            <button class="btn btn-sm btn-outline-success" onclick="runFaultReactivation()">
                                <i class="bi bi-play-fill"></i> Run
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Fault reactivation risk for dominant orientations.</p>
                            <div id="fault-reactivation-results" style="display:none;"></div>
                            <img id="fault-reactivation-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- Drilling Calculator Cards (v3.50-v3.75) - moved to Drilling tab via JS -->
                    <div id="drilling-cards-container">

                    <!-- In-Situ Stress Ratio [v3.50.0] -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-bar-chart-steps"></i> In-Situ Stress Ratio</span>
                            <button class="btn btn-sm btn-outline-warning" onclick="runStressRatio()">
                                <i class="bi bi-play-fill"></i> Run
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">K0/Kh stress ratio analysis with depth trend.</p>
                            <div id="stress-ratio-results" style="display:none;"></div>
                            <img id="stress-ratio-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- Fracture Corridor Detection [v3.50.0] -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-signpost-split"></i> Fracture Corridor Detection</span>
                            <button class="btn btn-sm btn-outline-info" onclick="runFractureCorridor()">
                                <i class="bi bi-play-fill"></i> Run
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">High-density fracture zone identification.</p>
                            <div id="fracture-corridor-results" style="display:none;"></div>
                            <img id="fracture-corridor-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- Drilling Hazard Assessment [v3.50.0] -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-exclamation-diamond"></i> Drilling Hazard Assessment</span>
                            <button class="btn btn-sm btn-outline-danger" onclick="runDrillingHazard()">
                                <i class="bi bi-play-fill"></i> Run
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Comprehensive 6-hazard drilling risk evaluation.</p>
                            <div id="drilling-hazard-results" style="display:none;"></div>
                            <img id="drilling-hazard-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- Thermal Stress [v3.50.0] -->
                    <div class="card mb-4 border-primary">
                        <div class="card-header bg-primary bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-thermometer-half"></i> Thermal Stress</span>
                            <button class="btn btn-sm btn-outline-primary" onclick="runThermalStress()">
                                <i class="bi bi-play-fill"></i> Run
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Thermal stress effects on borehole stability.</p>
                            <div id="thermal-stress-results" style="display:none;"></div>
                            <img id="thermal-stress-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- DFN Statistics [v3.50.0] -->
                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-diagram-3"></i> DFN Statistics</span>
                            <button class="btn btn-sm btn-outline-success" onclick="runDFNStatistics()">
                                <i class="bi bi-play-fill"></i> Run
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Discrete Fracture Network statistics and connectivity.</p>
                            <div id="dfn-stats-results" style="display:none;"></div>
                            <img id="dfn-stats-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- Fracture Swarm [v3.51.0] -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-cloud-fill"></i> Fracture Swarm Analysis</span>
                            <button class="btn btn-sm btn-outline-warning" onclick="runFractureSwarm()"><i class="bi bi-play-fill"></i> Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Identify spatial fracture swarms via clustering.</p>
                            <div id="fracture-swarm-results" style="display:none;"></div>
                            <img id="fracture-swarm-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- CS Leakage [v3.51.0] -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-droplet-half"></i> Critically Stressed Leakage</span>
                            <button class="btn btn-sm btn-outline-danger" onclick="runCSLeakage()"><i class="bi bi-play-fill"></i> Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Leakage potential of critically stressed fractures.</p>
                            <div id="cs-leakage-results" style="display:none;"></div>
                            <img id="cs-leakage-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- Effective Stress Path [v3.51.0] -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-graph-up-arrow"></i> Effective Stress Path</span>
                            <button class="btn btn-sm btn-outline-info" onclick="runEffStressPath()"><i class="bi bi-play-fill"></i> Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Stress path during depletion/injection scenarios.</p>
                            <div id="eff-stress-path-results" style="display:none;"></div>
                            <img id="eff-stress-path-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- Fracture Mineralization [v3.51.0] -->
                    <div class="card mb-4 border-primary">
                        <div class="card-header bg-primary bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-gem"></i> Fracture Mineralization</span>
                            <button class="btn btn-sm btn-outline-primary" onclick="runMineralization()"><i class="bi bi-play-fill"></i> Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Cementation effects on fracture permeability.</p>
                            <div id="mineralization-results" style="display:none;"></div>
                            <img id="mineralization-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- Trajectory Sensitivity [v3.51.0] -->
                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-bezier2"></i> Trajectory Sensitivity</span>
                            <button class="btn btn-sm btn-outline-success" onclick="runTrajSensitivity()"><i class="bi bi-play-fill"></i> Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Stability sensitivity to wellbore trajectory.</p>
                            <div id="traj-sensitivity-results" style="display:none;"></div>
                            <img id="traj-sensitivity-plot" class="img-fluid mt-2" style="display:none;">
                        </div>
                    </div>

                    <!-- [195] Aperture Distribution (v3.52.0) -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-bar-chart"></i> <strong>[195] Fracture Aperture Distribution</strong></span>
                            <button class="btn btn-sm btn-light" onclick="runApertureDistribution()">Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Statistical distribution of fracture apertures with lognormal fit and permeability estimates.</p>
                            <div class="row mb-2">
                                <div class="col-md-4"><label class="form-label">Well</label><select class="form-select form-select-sm" id="apertureDist-well"><option value="3P">3P</option><option value="6P">6P</option></select></div>
                                <div class="col-md-4"><label class="form-label">Base Aperture (mm)</label><input type="number" class="form-control form-control-sm" id="apertureDist-base" value="0.5" step="0.1"></div>
                            </div>
                            <div id="apertureDist-result"></div>
                        </div>
                    </div>

                    <!-- [196] Stability Window (v3.52.0) -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning text-dark d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-shield-check"></i> <strong>[196] Wellbore Stability Window</strong></span>
                            <button class="btn btn-sm btn-dark" onclick="runStabilityWindow()">Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Safe mud weight window across different wellbore orientations.</p>
                            <div class="row mb-2">
                                <div class="col-md-3"><label class="form-label">Well</label><select class="form-select form-select-sm" id="stabWindow-well"><option value="3P">3P</option><option value="6P">6P</option></select></div>
                                <div class="col-md-3"><label class="form-label">Depth (m)</label><input type="number" class="form-control form-control-sm" id="stabWindow-depth" value="3000"></div>
                                <div class="col-md-3"><label class="form-label">UCS (MPa)</label><input type="number" class="form-control form-control-sm" id="stabWindow-ucs" value="80"></div>
                                <div class="col-md-3"><label class="form-label">Tensile (MPa)</label><input type="number" class="form-control form-control-sm" id="stabWindow-tensile" value="5"></div>
                            </div>
                            <div id="stabWindow-result"></div>
                        </div>
                    </div>

                    <!-- [197] Stress Anisotropy (v3.52.0) -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-arrows-angle-expand"></i> <strong>[197] Stress Anisotropy Index</strong></span>
                            <button class="btn btn-sm btn-light" onclick="runStressAnisotropy()">Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Quantify horizontal stress anisotropy and its impact on wellbore stability.</p>
                            <div class="row mb-2">
                                <div class="col-md-4"><label class="form-label">Well</label><select class="form-select form-select-sm" id="stressAniso-well"><option value="3P">3P</option><option value="6P">6P</option></select></div>
                                <div class="col-md-4"><label class="form-label">Depth (m)</label><input type="number" class="form-control form-control-sm" id="stressAniso-depth" value="3000"></div>
                            </div>
                            <div id="stressAniso-result"></div>
                        </div>
                    </div>

                    <!-- [198] FIT Prediction (v3.52.0) -->
                    <div class="card mb-4 border-primary">
                        <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-graph-up-arrow"></i> <strong>[198] FIT/LOT Prediction</strong></span>
                            <button class="btn btn-sm btn-light" onclick="runFITPrediction()">Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Predict Formation Integrity Test and Leak-Off Test pressures from stress model.</p>
                            <div class="row mb-2">
                                <div class="col-md-3"><label class="form-label">Well</label><select class="form-select form-select-sm" id="fitPred-well"><option value="3P">3P</option><option value="6P">6P</option></select></div>
                                <div class="col-md-3"><label class="form-label">Depth (m)</label><input type="number" class="form-control form-control-sm" id="fitPred-depth" value="3000"></div>
                                <div class="col-md-3"><label class="form-label">Tensile (MPa)</label><input type="number" class="form-control form-control-sm" id="fitPred-tensile" value="5"></div>
                            </div>
                            <div id="fitPred-result"></div>
                        </div>
                    </div>

                    <!-- [199] Susceptibility Map (v3.52.0) -->
                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-grid-3x3"></i> <strong>[199] Fracture Susceptibility Map</strong></span>
                            <button class="btn btn-sm btn-light" onclick="runSusceptibilityMap()">Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Azimuth×dip map of fracture slip tendency showing which orientations are critically stressed.</p>
                            <div class="row mb-2">
                                <div class="col-md-3"><label class="form-label">Well</label><select class="form-select form-select-sm" id="suscMap-well"><option value="3P">3P</option><option value="6P">6P</option></select></div>
                                <div class="col-md-3"><label class="form-label">Depth (m)</label><input type="number" class="form-control form-control-sm" id="suscMap-depth" value="3000"></div>
                                <div class="col-md-3"><label class="form-label">Friction (μ)</label><input type="number" class="form-control form-control-sm" id="suscMap-friction" value="0.6" step="0.1"></div>
                            </div>
                            <div id="suscMap-result"></div>
                        </div>
                    </div>

                    <!-- [200] Fracture Density Log (v3.53.0) -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-bar-chart-steps"></i> <strong>[200] Fracture Density Log</strong></span>
                            <button class="btn btn-sm btn-light" onclick="runFracDensityLog()">Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Fracture count per depth interval — synthetic density log.</p>
                            <div class="row mb-2">
                                <div class="col-md-4"><label class="form-label">Well</label><select class="form-select form-select-sm" id="fracDensLog-well"><option value="3P">3P</option><option value="6P">6P</option></select></div>
                                <div class="col-md-4"><label class="form-label">Bin Size (m)</label><input type="number" class="form-control form-control-sm" id="fracDensLog-bin" value="10"></div>
                            </div>
                            <div id="fracDensLog-result"></div>
                        </div>
                    </div>

                    <!-- [201] Stress Gradient (v3.53.0) -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning text-dark d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-graph-down"></i> <strong>[201] Stress Gradient Profile</strong></span>
                            <button class="btn btn-sm btn-dark" onclick="runStressGradient()">Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Sv, SHmax, Shmin, Pp gradients vs depth.</p>
                            <div class="row mb-2">
                                <div class="col-md-3"><label class="form-label">Well</label><select class="form-select form-select-sm" id="stressGrad-well"><option value="3P">3P</option><option value="6P">6P</option></select></div>
                                <div class="col-md-3"><label class="form-label">From (m)</label><input type="number" class="form-control form-control-sm" id="stressGrad-from" value="500"></div>
                                <div class="col-md-3"><label class="form-label">To (m)</label><input type="number" class="form-control form-control-sm" id="stressGrad-to" value="5000"></div>
                                <div class="col-md-3"><label class="form-label">Points</label><input type="number" class="form-control form-control-sm" id="stressGrad-n" value="30"></div>
                            </div>
                            <div id="stressGrad-result"></div>
                        </div>
                    </div>

                    <!-- [202] Coulomb Failure Function (v3.53.0) -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-exclamation-triangle"></i> <strong>[202] Coulomb Failure Function</strong></span>
                            <button class="btn btn-sm btn-light" onclick="runCoulombFailure()">Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">CFF on each fracture plane — proximity to Mohr-Coulomb failure.</p>
                            <div class="row mb-2">
                                <div class="col-md-3"><label class="form-label">Well</label><select class="form-select form-select-sm" id="cff-well"><option value="3P">3P</option><option value="6P">6P</option></select></div>
                                <div class="col-md-3"><label class="form-label">Depth (m)</label><input type="number" class="form-control form-control-sm" id="cff-depth" value="3000"></div>
                                <div class="col-md-3"><label class="form-label">Friction (μ)</label><input type="number" class="form-control form-control-sm" id="cff-friction" value="0.6" step="0.1"></div>
                                <div class="col-md-3"><label class="form-label">Cohesion (MPa)</label><input type="number" class="form-control form-control-sm" id="cff-cohesion" value="0"></div>
                            </div>
                            <div id="cff-result"></div>
                        </div>
                    </div>

                    <!-- [203] Fracture Porosity (v3.53.0) -->
                    <div class="card mb-4 border-primary">
                        <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-droplet"></i> <strong>[203] Fracture Porosity Estimate</strong></span>
                            <button class="btn btn-sm btn-light" onclick="runFracPorosity()">Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Total fracture porosity from apertures and density (dip-corrected).</p>
                            <div class="row mb-2">
                                <div class="col-md-4"><label class="form-label">Well</label><select class="form-select form-select-sm" id="fracPoro-well"><option value="3P">3P</option><option value="6P">6P</option></select></div>
                                <div class="col-md-4"><label class="form-label">Aperture (mm)</label><input type="number" class="form-control form-control-sm" id="fracPoro-aperture" value="0.5" step="0.1"></div>
                            </div>
                            <div id="fracPoro-result"></div>
                        </div>
                    </div>

                    <!-- [204] Breakout Azimuth (v3.53.0) -->
                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-compass"></i> <strong>[204] Breakout Azimuth Prediction</strong></span>
                            <button class="btn btn-sm btn-light" onclick="runBreakoutAzimuth()">Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Predicted wellbore breakout and DITF orientation from stress model.</p>
                            <div class="row mb-2">
                                <div class="col-md-4"><label class="form-label">Well</label><select class="form-select form-select-sm" id="breakoutAz-well"><option value="3P">3P</option><option value="6P">6P</option></select></div>
                                <div class="col-md-4"><label class="form-label">Depth (m)</label><input type="number" class="form-control form-control-sm" id="breakoutAz-depth" value="3000"></div>
                            </div>
                            <div id="breakoutAz-result"></div>
                        </div>
                    </div>

                    <!-- [205] Fracture Compliance Tensor -->
                    <div class="card mb-3" id="card-fracture-compliance">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-grid-3x3"></i> Fracture Compliance Tensor</span>
                            <span class="badge bg-primary">v3.54</span>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Compute excess compliance tensor from fracture network orientations (anisotropy characterization).</p>
                            <div class="row g-2 mb-2">
                                <div class="col-md-4"><input type="number" class="form-control form-control-sm" id="compliance-bn" value="1e-10" step="1e-11" placeholder="Normal Compliance (Bn)"></div>
                                <div class="col-md-4"><input type="number" class="form-control form-control-sm" id="compliance-bt" value="5e-11" step="1e-11" placeholder="Tangential Compliance (Bt)"></div>
                            </div>
                            <button class="btn btn-primary btn-sm" onclick="runFracCompliance()">Run Compliance Tensor</button>
                            <div id="results-fracture-compliance" class="mt-2"></div>
                        </div>
                    </div>

                    <!-- [206] Pore Pressure Depletion Effect -->
                    <div class="card mb-3" id="card-pp-depletion">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-arrow-down-circle"></i> Pore Pressure Depletion Effect</span>
                            <span class="badge bg-primary">v3.54</span>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Evaluate how reservoir depletion changes effective stresses and critically stressed fractures.</p>
                            <div class="row g-2 mb-2">
                                <div class="col-md-3"><input type="number" class="form-control form-control-sm" id="depletion-depth" value="3000" placeholder="Depth (m)"></div>
                                <div class="col-md-3"><input type="number" class="form-control form-control-sm" id="depletion-mpa" value="10" step="1" placeholder="Depletion (MPa)"></div>
                                <div class="col-md-3"><input type="number" class="form-control form-control-sm" id="depletion-friction" value="0.6" step="0.05" placeholder="Friction"></div>
                            </div>
                            <button class="btn btn-primary btn-sm" onclick="runPpDepletion()">Run Depletion Analysis</button>
                            <div id="results-pp-depletion" class="mt-2"></div>
                        </div>
                    </div>

                    <!-- [207] Fracture Reactivation Pressure -->
                    <div class="card mb-3" id="card-reactivation-pressure">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-exclamation-diamond"></i> Fracture Reactivation Pressure</span>
                            <span class="badge bg-primary">v3.54</span>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Critical pore pressure for each fracture — minimum injection pressure that triggers slip.</p>
                            <div class="row g-2 mb-2">
                                <div class="col-md-3"><input type="number" class="form-control form-control-sm" id="reactivation-depth" value="3000" placeholder="Depth (m)"></div>
                                <div class="col-md-3"><input type="number" class="form-control form-control-sm" id="reactivation-friction" value="0.6" step="0.05" placeholder="Friction"></div>
                            </div>
                            <button class="btn btn-primary btn-sm" onclick="runReactivationPressure()">Run Reactivation Analysis</button>
                            <div id="results-reactivation-pressure" class="mt-2"></div>
                        </div>
                    </div>

                    <!-- [208] Wellbore Deviation Survey -->
                    <div class="card mb-3" id="card-deviation-survey">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-bezier2"></i> Wellbore Deviation Survey</span>
                            <span class="badge bg-primary">v3.54</span>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Safety factor profile along deviated wellbore trajectory (collapse + fracture stability).</p>
                            <div class="row g-2 mb-2">
                                <div class="col-md-3"><input type="number" class="form-control form-control-sm" id="deviation-depth" value="3000" placeholder="Depth (m)"></div>
                                <div class="col-md-3"><input type="number" class="form-control form-control-sm" id="deviation-azimuth" value="0" placeholder="Azimuth (°)"></div>
                                <div class="col-md-3"><input type="number" class="form-control form-control-sm" id="deviation-inclination" value="60" placeholder="Max Inclination (°)"></div>
                                <div class="col-md-3"><input type="number" class="form-control form-control-sm" id="deviation-stations" value="20" placeholder="Stations"></div>
                            </div>
                            <button class="btn btn-primary btn-sm" onclick="runDeviationSurvey()">Run Deviation Survey</button>
                            <div id="results-deviation-survey" class="mt-2"></div>
                        </div>
                    </div>

                    <!-- [209] Rock Strength Profile -->
                    <div class="card mb-3" id="card-rock-strength">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-bricks"></i> Rock Strength Profile</span>
                            <span class="badge bg-primary">v3.54</span>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">UCS, tensile strength, and elastic modulus profile with depth for a given lithology.</p>
                            <div class="row g-2 mb-2">
                                <div class="col-md-3"><input type="number" class="form-control form-control-sm" id="rockstr-from" value="2000" placeholder="Depth From (m)"></div>
                                <div class="col-md-3"><input type="number" class="form-control form-control-sm" id="rockstr-to" value="4000" placeholder="Depth To (m)"></div>
                                <div class="col-md-3">
                                    <select class="form-select form-select-sm" id="rockstr-lithology">
                                        <option value="sandstone" selected>Sandstone</option>
                                        <option value="shale">Shale</option>
                                        <option value="limestone">Limestone</option>
                                        <option value="granite">Granite</option>
                                    </select>
                                </div>
                                <div class="col-md-3"><input type="number" class="form-control form-control-sm" id="rockstr-npoints" value="30" placeholder="Points"></div>
                            </div>
                            <button class="btn btn-primary btn-sm" onclick="runRockStrength()">Run Rock Strength</button>
                            <div id="results-rock-strength" class="mt-2"></div>
                        </div>
                    </div>

                    <!-- [210] Fracture Intersection Density -->
                    <div class="card mb-3" id="card-fracture-intersection">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-diagram-3"></i> Fracture Intersection Density</span>
                            <span class="badge bg-primary">v3.55</span>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Count and density of fracture intersections per depth bin (connectivity proxy).</p>
                            <div class="row g-2 mb-2">
                                <div class="col-md-4"><input type="number" class="form-control form-control-sm" id="intersection-binsize" value="50" placeholder="Bin Size (m)"></div>
                            </div>
                            <button class="btn btn-primary btn-sm" onclick="runFracIntersection()">Run Intersection Analysis</button>
                            <div id="results-fracture-intersection" class="mt-2"></div>
                        </div>
                    </div>

                    <!-- [211] Stress Polygon -->
                    <div class="card mb-3" id="card-stress-polygon">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-pentagon"></i> Stress Polygon</span>
                            <span class="badge bg-primary">v3.55</span>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Zoback stress polygon showing allowable stress domain at depth.</p>
                            <div class="row g-2 mb-2">
                                <div class="col-md-4"><input type="number" class="form-control form-control-sm" id="polygon-depth" value="3000" placeholder="Depth (m)"></div>
                                <div class="col-md-4"><input type="number" class="form-control form-control-sm" id="polygon-friction" value="0.6" step="0.05" placeholder="Friction"></div>
                            </div>
                            <button class="btn btn-primary btn-sm" onclick="runStressPolygon()">Run Stress Polygon</button>
                            <div id="results-stress-polygon" class="mt-2"></div>
                        </div>
                    </div>

                    <!-- [212] Mud Weight Window -->
                    <div class="card mb-3" id="card-mud-weight">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-droplet-half"></i> Mud Weight Window</span>
                            <span class="badge bg-primary">v3.55</span>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Safe mud weight range between borehole collapse and fracture initiation gradients.</p>
                            <div class="row g-2 mb-2">
                                <div class="col-md-3"><input type="number" class="form-control form-control-sm" id="mudwt-from" value="1000" placeholder="Depth From (m)"></div>
                                <div class="col-md-3"><input type="number" class="form-control form-control-sm" id="mudwt-to" value="5000" placeholder="Depth To (m)"></div>
                                <div class="col-md-3"><input type="number" class="form-control form-control-sm" id="mudwt-npoints" value="30" placeholder="Points"></div>
                            </div>
                            <button class="btn btn-primary btn-sm" onclick="runMudWeight()">Run Mud Weight Window</button>
                            <div id="results-mud-weight" class="mt-2"></div>
                        </div>
                    </div>

                    <!-- [213] Fracture Spacing Statistics -->
                    <div class="card mb-3" id="card-fracture-spacing">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-rulers"></i> Fracture Spacing Statistics</span>
                            <span class="badge bg-primary">v3.55</span>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Spacing distribution fitting (exponential/lognormal) and clustering classification.</p>
                            <button class="btn btn-primary btn-sm" onclick="runFracSpacing()">Run Spacing Analysis</button>
                            <div id="results-fracture-spacing" class="mt-2"></div>
                        </div>
                    </div>

                    <!-- [214] In-Situ Stress Ratio Profile -->
                    <div class="card mb-3" id="card-stress-ratio">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-percent"></i> In-Situ Stress Ratio Profile</span>
                            <span class="badge bg-primary">v3.55</span>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">K0, A-value, and R-ratio profiles with depth for stress regime characterization.</p>
                            <div class="row g-2 mb-2">
                                <div class="col-md-3"><input type="number" class="form-control form-control-sm" id="sratio-from" value="500" placeholder="Depth From (m)"></div>
                                <div class="col-md-3"><input type="number" class="form-control form-control-sm" id="sratio-to" value="5000" placeholder="Depth To (m)"></div>
                                <div class="col-md-3"><input type="number" class="form-control form-control-sm" id="sratio-npoints" value="30" placeholder="Points"></div>
                            </div>
                            <button class="btn btn-primary btn-sm" onclick="runStressRatio()">Run Stress Ratio</button>
                            <div id="results-stress-ratio" class="mt-2"></div>
                        </div>
                    </div>

                    <!-- [215] Fracture Aperture Profile -->
                    <div class="card mb-3" id="card-aperture-profile">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-bar-chart-steps"></i> Fracture Aperture Profile</span>
                            <span class="badge bg-primary">v3.56</span>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Aperture vs depth with hydraulic conductivity (cubic law).</p>
                            <div class="row g-2 mb-2">
                                <div class="col-md-4"><input type="number" class="form-control form-control-sm" id="approf-aperture" value="0.5" step="0.1" placeholder="Aperture (mm)"></div>
                                <div class="col-md-4"><input type="number" class="form-control form-control-sm" id="approf-binsize" value="50" placeholder="Bin Size (m)"></div>
                            </div>
                            <button class="btn btn-primary btn-sm" onclick="runApertureProfile()">Run Aperture Profile</button>
                            <div id="results-aperture-profile" class="mt-2"></div>
                        </div>
                    </div>

                    <!-- [216] Critical Injection Pressure -->
                    <div class="card mb-3" id="card-critical-injection">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-arrow-up-circle"></i> Critical Injection Pressure</span>
                            <span class="badge bg-primary">v3.56</span>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Maximum injection pressure before fracture reactivation per well.</p>
                            <div class="row g-2 mb-2">
                                <div class="col-md-4"><input type="number" class="form-control form-control-sm" id="critinj-depth" value="3000" placeholder="Depth (m)"></div>
                                <div class="col-md-4"><input type="number" class="form-control form-control-sm" id="critinj-friction" value="0.6" step="0.05" placeholder="Friction"></div>
                            </div>
                            <button class="btn btn-primary btn-sm" onclick="runCriticalInjection()">Run Injection Analysis</button>
                            <div id="results-critical-injection" class="mt-2"></div>
                        </div>
                    </div>

                    <!-- [217] Stress Path Evolution -->
                    <div class="card mb-3" id="card-stress-path-evo">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-arrow-left-right"></i> Stress Path Evolution</span>
                            <span class="badge bg-primary">v3.56</span>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">How stresses change during production/injection (p'-q stress path).</p>
                            <div class="row g-2 mb-2">
                                <div class="col-md-3"><input type="number" class="form-control form-control-sm" id="stressevo-depth" value="3000" placeholder="Depth (m)"></div>
                                <div class="col-md-3">
                                    <select class="form-select form-select-sm" id="stressevo-scenario">
                                        <option value="depletion" selected>Depletion</option>
                                        <option value="injection">Injection</option>
                                    </select>
                                </div>
                                <div class="col-md-3"><input type="number" class="form-control form-control-sm" id="stressevo-deltapp" value="20" placeholder="ΔPp (MPa)"></div>
                            </div>
                            <button class="btn btn-primary btn-sm" onclick="runStressPathEvo()">Run Stress Path</button>
                            <div id="results-stress-path-evo" class="mt-2"></div>
                        </div>
                    </div>

                    <!-- [218] Fracture Set Identification -->
                    <div class="card mb-3" id="card-fracture-set-id">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-collection"></i> Fracture Set Identification</span>
                            <span class="badge bg-primary">v3.56</span>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Cluster fractures into discrete orientation sets using KMeans on pole vectors.</p>
                            <div class="row g-2 mb-2">
                                <div class="col-md-4"><input type="number" class="form-control form-control-sm" id="setid-nsets" value="3" min="2" max="6" placeholder="Number of Sets"></div>
                            </div>
                            <button class="btn btn-primary btn-sm" onclick="runFractureSetId()">Identify Sets</button>
                            <div id="results-fracture-set-id" class="mt-2"></div>
                        </div>
                    </div>

                    <!-- [219] Pore Pressure Prediction -->
                    <div class="card mb-3" id="card-pp-prediction">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-water"></i> Pore Pressure Prediction</span>
                            <span class="badge bg-primary">v3.56</span>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Hydrostatic/overpressured Pp estimation with EMW and gradient profiles.</p>
                            <div class="row g-2 mb-2">
                                <div class="col-md-3"><input type="number" class="form-control form-control-sm" id="pppred-from" value="500" placeholder="Depth From (m)"></div>
                                <div class="col-md-3"><input type="number" class="form-control form-control-sm" id="pppred-to" value="5000" placeholder="Depth To (m)"></div>
                                <div class="col-md-3"><input type="number" class="form-control form-control-sm" id="pppred-factor" value="1.0" step="0.1" placeholder="Overpressure Factor"></div>
                            </div>
                            <button class="btn btn-primary btn-sm" onclick="runPpPrediction()">Run Pp Prediction</button>
                            <div id="results-pp-prediction" class="mt-2"></div>
                        </div>
                    </div>

                    <!-- [220] Fracture Porosity Estimate -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-droplet-half"></i> <strong>[220] Fracture Porosity Estimate</strong></span>
                            <button class="btn btn-sm btn-outline-light" onclick="runFracPorosityEst()">Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Estimate fracture porosity and permeability from aperture and density per depth bin.</p>
                            <div class="row g-2 mb-2">
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="fporosity-aperture" placeholder="Aperture (mm)" value="0.5" step="0.1"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="fporosity-binsize" placeholder="Bin size (m)" value="50"></div>
                            </div>
                            <div id="fracPorosityEstResult"></div>
                        </div>
                    </div>

                    <!-- [221] Differential Stress Profile -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-arrows-expand"></i> <strong>[221] Differential Stress Profile</strong></span>
                            <button class="btn btn-sm btn-outline-light" onclick="runDiffStress()">Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Compute differential stress (S1-S3) and deviatoric stress vs depth.</p>
                            <div class="row g-2 mb-2">
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="diffstr-from" placeholder="From (m)" value="500"></div>
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="diffstr-to" placeholder="To (m)" value="5000"></div>
                                <div class="col-4">
                                    <select class="form-select form-select-sm" id="diffstr-regime"><option value="NF">NF</option><option value="SS">SS</option><option value="RF">RF</option></select>
                                </div>
                            </div>
                            <div id="diffStressResult"></div>
                        </div>
                    </div>

                    <!-- [222] Fault Seal Analysis -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-shield-lock"></i> <strong>[222] Fault Seal Analysis</strong></span>
                            <button class="btn btn-sm btn-outline-light" onclick="runFaultSeal()">Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Estimate fault seal potential using SGR and juxtaposition analysis.</p>
                            <div class="row g-2 mb-2">
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="fseal-clay" placeholder="Clay fraction" value="0.2" step="0.05"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="fseal-throw" placeholder="Throw (m)" value="50"></div>
                            </div>
                            <div id="faultSealResult"></div>
                        </div>
                    </div>

                    <!-- [223] Fracture Connectivity Index -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-diagram-3"></i> <strong>[223] Connectivity Index</strong></span>
                            <button class="btn btn-sm btn-outline-light" onclick="runConnectivityIdx()">Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Fracture connectivity using percolation-like metrics (P10, dispersion, high-angle fraction).</p>
                            <div class="row g-2 mb-2">
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="cidx-binsize" placeholder="Bin size (m)" value="50"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="cidx-dipthresh" placeholder="Dip threshold (°)" value="30"></div>
                            </div>
                            <div id="connectivityIdxResult"></div>
                        </div>
                    </div>

                    <!-- [224] Breakout Angular Width -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-bullseye"></i> <strong>[224] Breakout Angular Width</strong></span>
                            <button class="btn btn-sm btn-outline-light" onclick="runBreakoutAngular()">Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Predict borehole breakout angular width vs depth using Kirsch equations.</p>
                            <div class="row g-2 mb-2">
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="boang-from" placeholder="From (m)" value="500"></div>
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="boang-to" placeholder="To (m)" value="5000"></div>
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="boang-ucs" placeholder="UCS (MPa)" value="80"></div>
                                <div class="col-3">
                                    <select class="form-select form-select-sm" id="boang-regime"><option value="NF">NF</option><option value="SS">SS</option><option value="RF">RF</option></select>
                                </div>
                            </div>
                            <div id="breakoutAngularResult"></div>
                        </div>
                    </div>

                    <!-- [225] Stress Gradient Profile -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-graph-down"></i> <strong>[225] Stress Gradient Profile</strong></span>
                            <button class="btn btn-sm btn-outline-light" onclick="runStressGradient()">Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Stress gradients (MPa/km, psi/ft) and EMW vs depth for all principal stresses.</p>
                            <div class="row g-2 mb-2">
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="sgrad-from" placeholder="From (m)" value="500"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="sgrad-to" placeholder="To (m)" value="5000"></div>
                            </div>
                            <div id="stressGradientResult"></div>
                        </div>
                    </div>

                    <!-- [226] Fracture Mineral Fill -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-gem"></i> <strong>[226] Fracture Mineral Fill</strong></span>
                            <button class="btn btn-sm btn-outline-light" onclick="runMineralFill()">Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Characterize fracture mineral fill types (calcite, quartz, clay, open).</p>
                            <div id="mineralFillResult"></div>
                        </div>
                    </div>

                    <!-- [227] Coulomb Failure Function -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-exclamation-diamond"></i> <strong>[227] Coulomb Failure Function</strong></span>
                            <button class="btn btn-sm btn-outline-light" onclick="runCoulombFailure()">Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Distance to Coulomb failure for each fracture — CFF analysis.</p>
                            <div class="row g-2 mb-2">
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="cff-depth" placeholder="Depth (m)" value="3000"></div>
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="cff-friction" placeholder="Friction" value="0.6" step="0.1"></div>
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="cff-cohesion" placeholder="Cohesion (MPa)" value="0"></div>
                            </div>
                            <div id="coulombFailureResult"></div>
                        </div>
                    </div>

                    <!-- [228] DFN Parameters -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-grid-3x3"></i> <strong>[228] DFN Parameters</strong></span>
                            <button class="btn btn-sm btn-outline-light" onclick="runDfnParams()">Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Discrete Fracture Network statistics — P10, P32, spacing, orientation distributions.</p>
                            <div id="dfnParamsResult"></div>
                        </div>
                    </div>

                    <!-- [229] Drilling Margin Analysis -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-shield-check"></i> <strong>[229] Drilling Margin</strong></span>
                            <button class="btn btn-sm btn-outline-light" onclick="runDrillingMargin()">Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Drilling safety margins — mud weight window, kick tolerance, loss gradient.</p>
                            <div class="row g-2 mb-2">
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="dmarg-from" placeholder="From (m)" value="500"></div>
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="dmarg-to" placeholder="To (m)" value="5000"></div>
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="dmarg-mw" placeholder="MW (ppg)" value="10.0" step="0.5"></div>
                            </div>
                            <div id="drillingMarginResult"></div>
                        </div>
                    </div>

                    <!-- [230] Thermal Stress Effect -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-thermometer-half"></i> <strong>[230] Thermal Stress Effect</strong></span>
                            <button class="btn btn-sm btn-outline-light" onclick="runThermalStress()">Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Thermal stress perturbation from drilling fluid temperature difference.</p>
                            <div class="row g-2 mb-2">
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="therm-from" placeholder="From (m)" value="500"></div>
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="therm-to" placeholder="To (m)" value="5000"></div>
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="therm-dt" placeholder="ΔT (°C)" value="-20"></div>
                            </div>
                            <div id="thermalStressResult"></div>
                        </div>
                    </div>

                    <!-- [231] Fracture Aperture Distribution -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-rulers"></i> <strong>[231] Aperture Distribution</strong></span>
                            <button class="btn btn-sm btn-outline-light" onclick="runApertureDist()">Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Statistical distribution of fracture apertures using dip-depth correlation.</p>
                            <div id="apertureDistResult"></div>
                        </div>
                    </div>

                    <!-- [232] Induced Seismicity Risk -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-activity"></i> <strong>[232] Induced Seismicity Risk</strong></span>
                            <button class="btn btn-sm btn-outline-light" onclick="runInducedSeismicity()">Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Seismicity risk from injection using CFF and seismogenic index.</p>
                            <div class="row g-2 mb-2">
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="seis-depth" placeholder="Depth (m)" value="3000"></div>
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="seis-rate" placeholder="Rate (m³/d)" value="500"></div>
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="seis-days" placeholder="Days" value="365"></div>
                            </div>
                            <div id="inducedSeismicityResult"></div>
                        </div>
                    </div>

                    <!-- [233] Casing Design Check -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-wrench-adjustable"></i> <strong>[233] Casing Design Check</strong></span>
                            <button class="btn btn-sm btn-outline-light" onclick="runCasingDesign()">Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Check casing burst/collapse adequacy against formation pressures.</p>
                            <div class="row g-2 mb-2">
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="casing-burst" placeholder="Burst (psi)" value="8000"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="casing-collapse" placeholder="Collapse (psi)" value="6000"></div>
                            </div>
                            <div id="casingDesignResult"></div>
                        </div>
                    </div>

                    <!-- [234] Formation Integrity Test -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-clipboard2-check"></i> <strong>[234] Formation Integrity</strong></span>
                            <button class="btn btn-sm btn-outline-light" onclick="runFormationIntegrity()">Run</button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Predict FIT/LOT pressures at various depths.</p>
                            <div class="row g-2 mb-2">
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="fit-from" placeholder="From (m)" value="500"></div>
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="fit-to" placeholder="To (m)" value="5000"></div>
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="fit-tensile" placeholder="T (MPa)" value="5"></div>
                            </div>
                            <div id="formationIntegrityResult"></div>
                        </div>
                    </div>

                    <!-- [235] Horizon Stress -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-layers-fill"></i> Horizon Stress [235]</span>
                            <button class="btn btn-sm btn-info" onclick="runHorizonStress()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="hs-from" placeholder="From (m)" value="500"></div>
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="hs-to" placeholder="To (m)" value="5000"></div>
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="hs-npts" placeholder="Points" value="25"></div>
                                <div class="col-3"><select class="form-select form-select-sm" id="hs-regime"><option value="normal">Normal</option><option value="strike_slip">Strike-Slip</option><option value="reverse">Reverse</option></select></div>
                            </div>
                            <div id="horizonStressResult"></div>
                        </div>
                    </div>

                    <!-- [236] Fracture Swarm Analysis -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-collection-fill"></i> Fracture Swarm [236]</span>
                            <button class="btn btn-sm btn-info" onclick="runFractureSwarm()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="fsw-window" placeholder="Window (m)" value="10"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="fsw-mincount" placeholder="Min Count" value="3"></div>
                            </div>
                            <div id="fractureSwarmResult"></div>
                        </div>
                    </div>

                    <!-- [237] Effective Permeability -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-water"></i> Effective Permeability [237]</span>
                            <button class="btn btn-sm btn-info" onclick="runEffPerm()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="ep-aperture" placeholder="Aperture (mm)" value="0.1" step="0.01"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="ep-matrix" placeholder="Matrix k (mD)" value="0.01" step="0.001"></div>
                            </div>
                            <div id="effPermResult"></div>
                        </div>
                    </div>

                    <!-- [238] Wellbore Trajectory -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-arrow-down-right-circle-fill"></i> Wellbore Trajectory [238]</span>
                            <button class="btn btn-sm btn-info" onclick="runWellboreTraj()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="wt-dev" placeholder="Deviation (°)" value="0"></div>
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="wt-az" placeholder="Well Az (°)" value="0"></div>
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="wt-from" placeholder="From (m)" value="500"></div>
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="wt-to" placeholder="To (m)" value="5000"></div>
                            </div>
                            <div id="wellboreTrajResult"></div>
                        </div>
                    </div>

                    <!-- [239] Stress Anisotropy Ratio -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-arrows-expand"></i> Stress Anisotropy Ratio [239]</span>
                            <button class="btn btn-sm btn-info" onclick="runStressAniso()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="sar-from" placeholder="From (m)" value="500"></div>
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="sar-to" placeholder="To (m)" value="5000"></div>
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="sar-npts" placeholder="Points" value="25"></div>
                            </div>
                            <div id="stressAnisoResult"></div>
                        </div>
                    </div>

                    <!-- [240] Pore Pressure Window -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-thermometer-half"></i> Pore Pressure Window [240]</span>
                            <button class="btn btn-sm btn-info" onclick="runPpWindow()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="ppw-from" placeholder="From (m)" value="500"></div>
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="ppw-to" placeholder="To (m)" value="5000"></div>
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="ppw-npts" placeholder="Points" value="25"></div>
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="ppw-mw" placeholder="MW (ppg)" value="10.0" step="0.1"></div>
                            </div>
                            <div id="ppWindowResult"></div>
                        </div>
                    </div>

                    <!-- [241] Fracture Density Profile -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-bar-chart-steps"></i> Fracture Density Profile [241]</span>
                            <button class="btn btn-sm btn-info" onclick="runFracDensityProf()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-12"><input type="number" class="form-control form-control-sm" id="fdp-bin" placeholder="Bin Size (m)" value="50"></div>
                            </div>
                            <div id="fracDensityProfResult"></div>
                        </div>
                    </div>

                    <!-- [242] Stress Polygon -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-pentagon-fill"></i> Stress Polygon [242]</span>
                            <button class="btn btn-sm btn-info" onclick="runStressPolygon()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="sp-depth" placeholder="Depth (m)" value="3000"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="sp-friction" placeholder="μ" value="0.6" step="0.05"></div>
                            </div>
                            <div id="stressPolygonResult"></div>
                        </div>
                    </div>

                    <!-- [243] Rock Strength -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-gem"></i> Rock Strength [243]</span>
                            <button class="btn btn-sm btn-info" onclick="runRockStrength()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="rs-from" placeholder="From (m)" value="500"></div>
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="rs-to" placeholder="To (m)" value="5000"></div>
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="rs-npts" placeholder="Points" value="25"></div>
                                <div class="col-3"><select class="form-select form-select-sm" id="rs-lith"><option value="sandstone">Sandstone</option><option value="shale">Shale</option><option value="limestone">Limestone</option><option value="granite">Granite</option></select></div>
                            </div>
                            <div id="rockStrengthResult"></div>
                        </div>
                    </div>

                    <!-- [244] Wellbore Breakout Depth -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-exclamation-diamond-fill"></i> Breakout Depth [244]</span>
                            <button class="btn btn-sm btn-info" onclick="runBreakoutDepth()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="bd-from" placeholder="From (m)" value="500"></div>
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="bd-to" placeholder="To (m)" value="5000"></div>
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="bd-npts" placeholder="Points" value="25"></div>
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="bd-ucs" placeholder="UCS (MPa)" value="50"></div>
                            </div>
                            <div id="breakoutDepthResult"></div>
                        </div>
                    </div>

                    <!-- [245] Mud Weight Optimization -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-speedometer"></i> Mud Weight Optimization [245]</span>
                            <button class="btn btn-sm btn-warning" onclick="runMwOptimization()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="mwo-from" placeholder="From (m)" value="500"></div>
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="mwo-to" placeholder="To (m)" value="5000"></div>
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="mwo-npts" placeholder="Points" value="25"></div>
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="mwo-sf" placeholder="SF" value="1.1" step="0.05"></div>
                            </div>
                            <div id="mwOptimizationResult"></div>
                        </div>
                    </div>

                    <!-- [246] Fracture Orientation Bias -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-compass"></i> Orientation Bias [246]</span>
                            <button class="btn btn-sm btn-warning" onclick="runOrientBias()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="ob-bhaz" placeholder="BH Azimuth (°)" value="0"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="ob-bhdip" placeholder="BH Dip (°)" value="90"></div>
                            </div>
                            <div id="orientBiasResult"></div>
                        </div>
                    </div>

                    <!-- [247] Stress Ratio Depth -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-graph-up-arrow"></i> Stress Ratio Depth [247]</span>
                            <button class="btn btn-sm btn-warning" onclick="runStressRatioDepth()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="srd-from" placeholder="From (m)" value="500"></div>
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="srd-to" placeholder="To (m)" value="5000"></div>
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="srd-npts" placeholder="Points" value="25"></div>
                            </div>
                            <div id="stressRatioDepthResult"></div>
                        </div>
                    </div>

                    <!-- [248] Wellbore Shear Failure -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-slash-circle"></i> Shear Failure [248]</span>
                            <button class="btn btn-sm btn-warning" onclick="runShearFailure()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="sf-from" placeholder="From (m)" value="500"></div>
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="sf-to" placeholder="To (m)" value="5000"></div>
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="sf-ucs" placeholder="UCS (MPa)" value="50"></div>
                                <div class="col-3"><input type="number" class="form-control form-control-sm" id="sf-mu" placeholder="μ" value="0.6" step="0.05"></div>
                            </div>
                            <div id="shearFailureResult"></div>
                        </div>
                    </div>

                    <!-- [249] Fracture Permeability Tensor -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-box-fill"></i> Permeability Tensor [249]</span>
                            <button class="btn btn-sm btn-warning" onclick="runPermTensor()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-12"><input type="number" class="form-control form-control-sm" id="pt-aperture" placeholder="Aperture (mm)" value="0.1" step="0.01"></div>
                            </div>
                            <div id="permTensorResult"></div>
                        </div>
                    </div>

                    <!-- [250] ECD Profile -->
                    <div class="card mb-3 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-water"></i> ECD Profile [250]</span>
                            <button class="btn btn-sm btn-info" onclick="runEcdProfile()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="ecd-from" placeholder="Depth from (m)" value="500"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="ecd-to" placeholder="Depth to (m)" value="5000"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="ecd-mw" placeholder="Mud weight (ppg)" value="10" step="0.1"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="ecd-flow" placeholder="Flow rate (gpm)" value="500" step="10"></div>
                            </div>
                            <div id="ecdProfileResult"></div>
                        </div>
                    </div>

                    <!-- [251] Fracture Spacing Analysis -->
                    <div class="card mb-3 border-success">
                        <div class="card-header bg-success bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-rulers"></i> Fracture Spacing Analysis [251]</span>
                            <button class="btn btn-sm btn-success" onclick="runFracSpacing()">Run</button>
                        </div>
                        <div class="card-body">
                            <div id="fracSpacingResult"></div>
                        </div>
                    </div>

                    <!-- [252] Overburden Gradient -->
                    <div class="card mb-3 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-layers-fill"></i> Overburden Gradient [252]</span>
                            <button class="btn btn-sm btn-warning" onclick="runOverburdenGrad()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="ob-from" placeholder="Depth from (m)" value="100"></div>
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="ob-to" placeholder="Depth to (m)" value="5000"></div>
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="ob-npts" placeholder="N points" value="25"></div>
                            </div>
                            <div id="overburdenGradResult"></div>
                        </div>
                    </div>

                    <!-- [253] Principal Stress Rotation -->
                    <div class="card mb-3 border-primary">
                        <div class="card-header bg-primary bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-arrow-repeat"></i> Principal Stress Rotation [253]</span>
                            <button class="btn btn-sm btn-primary" onclick="runStressRotation()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="sr-nzones" placeholder="N zones" value="3"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="sr-from" placeholder="Depth from (m)" value="500"></div>
                            </div>
                            <div id="stressRotationResult"></div>
                        </div>
                    </div>

                    <!-- [254] Wellbore Tensile Failure -->
                    <div class="card mb-3 border-danger">
                        <div class="card-header bg-danger bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-lightning-fill"></i> Wellbore Tensile Failure [254]</span>
                            <button class="btn btn-sm btn-danger" onclick="runTensileFailure()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="tf-from" placeholder="Depth from (m)" value="500"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="tf-to" placeholder="Depth to (m)" value="5000"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="tf-tensile" placeholder="Tensile strength (MPa)" value="10" step="0.5"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="tf-npts" placeholder="N points" value="25"></div>
                            </div>
                            <div id="tensileFailureResult"></div>
                        </div>
                    </div>

                    <!-- [255] Hydraulic Fracture Design -->
                    <div class="card mb-3 border-danger">
                        <div class="card-header bg-danger bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-lightning-charge-fill"></i> Hydraulic Fracture Design [255]</span>
                            <button class="btn btn-sm btn-danger" onclick="runHFDesign()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="hf-depth" placeholder="Depth (m)" value="3000"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="hf-rate" placeholder="Rate (bpm)" value="20" step="1"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="hf-visc" placeholder="Viscosity (cp)" value="100" step="10"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="hf-prop" placeholder="Proppant (ppg)" value="2" step="0.5"></div>
                            </div>
                            <div id="hfDesignResult"></div>
                        </div>
                    </div>

                    <!-- [256] Cap Rock Integrity -->
                    <div class="card mb-3 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-shield-fill-check"></i> Cap Rock Integrity [256]</span>
                            <button class="btn btn-sm btn-warning" onclick="runCapRock()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="cr-depth" placeholder="Cap depth (m)" value="2000"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="cr-thick" placeholder="Thickness (m)" value="50"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="cr-perm" placeholder="Perm (nD)" value="10" step="1"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="cr-ucs" placeholder="UCS (MPa)" value="60" step="5"></div>
                            </div>
                            <div id="capRockResult"></div>
                        </div>
                    </div>

                    <!-- [257] Fault Reactivation -->
                    <div class="card mb-3 border-primary">
                        <div class="card-header bg-primary bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-exclamation-triangle-fill"></i> Fault Reactivation [257]</span>
                            <button class="btn btn-sm btn-primary" onclick="runFaultReact()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="fr-depth" placeholder="Depth (m)" value="3000"></div>
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="fr-strike" placeholder="Strike (°)" value="45" step="5"></div>
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="fr-dip" placeholder="Dip (°)" value="60" step="5"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="fr-mu" placeholder="Friction" value="0.6" step="0.05"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="fr-dpp" placeholder="ΔPp (MPa)" value="5" step="1"></div>
                            </div>
                            <div id="faultReactResult"></div>
                        </div>
                    </div>

                    <!-- [258] Formation Pressure Profile -->
                    <div class="card mb-3 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-speedometer2"></i> Formation Pressure Profile [258]</span>
                            <button class="btn btn-sm btn-info" onclick="runFormPressure()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="fp-from" placeholder="From (m)" value="100"></div>
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="fp-to" placeholder="To (m)" value="5000"></div>
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="fp-npts" placeholder="N pts" value="25"></div>
                                <div class="col-12"><input type="number" class="form-control form-control-sm" id="fp-op" placeholder="Overpressure factor" value="1.0" step="0.1"></div>
                            </div>
                            <div id="formPressureResult"></div>
                        </div>
                    </div>

                    <!-- [259] Thermal Stress -->
                    <div class="card mb-3 border-success">
                        <div class="card-header bg-success bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-thermometer-half"></i> Thermal Stress [259]</span>
                            <button class="btn btn-sm btn-success" onclick="runThermalStress()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="ts-from" placeholder="From (m)" value="500"></div>
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="ts-to" placeholder="To (m)" value="5000"></div>
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="ts-npts" placeholder="N pts" value="25"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="ts-grad" placeholder="Geotherm (°C/km)" value="30" step="5"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="ts-dt" placeholder="ΔT (°C)" value="-20" step="5"></div>
                            </div>
                            <div id="thermalStressResult"></div>
                        </div>
                    </div>

                    <!-- [260] Wellbore Collapse Pressure -->
                    <div class="card mb-3 border-danger">
                        <div class="card-header bg-danger bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-arrow-down-circle-fill"></i> Wellbore Collapse Pressure [260]</span>
                            <button class="btn btn-sm btn-danger" onclick="runCollapsePressure()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="cp-from" placeholder="From (m)" value="500"></div>
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="cp-to" placeholder="To (m)" value="5000"></div>
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="cp-npts" placeholder="N pts" value="25"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="cp-ucs" placeholder="UCS (MPa)" value="50" step="5"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="cp-phi" placeholder="Friction angle (°)" value="30" step="5"></div>
                            </div>
                            <div id="collapsePressureResult"></div>
                        </div>
                    </div>

                    <!-- [261] Fracture Aperture vs Stress -->
                    <div class="card mb-3 border-info">
                        <div class="card-header bg-info bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-arrows-expand"></i> Fracture Aperture vs Stress [261]</span>
                            <button class="btn btn-sm btn-info" onclick="runApertureStress()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="fas-aperture" placeholder="Initial aperture (mm)" value="0.5" step="0.1"></div>
                                <div class="col-6"><input type="number" class="form-control form-control-sm" id="fas-stiffness" placeholder="Stiffness (GPa/m)" value="50" step="10"></div>
                            </div>
                            <div id="apertureStressResult"></div>
                        </div>
                    </div>

                    <!-- [262] Casing Design Check -->
                    <div class="card mb-3 border-warning">
                        <div class="card-header bg-warning bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-pipe"></i> Casing Design Check [262]</span>
                            <button class="btn btn-sm btn-warning" onclick="runCasingDesign()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="cd-from" placeholder="From (m)" value="500"></div>
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="cd-to" placeholder="To (m)" value="5000"></div>
                                <div class="col-4">
                                    <select class="form-select form-select-sm" id="cd-grade">
                                        <option value="J55">J55</option><option value="N80" selected>N80</option><option value="P110">P110</option><option value="Q125">Q125</option>
                                    </select>
                                </div>
                            </div>
                            <div id="casingDesignResult"></div>
                        </div>
                    </div>

                    <!-- [263] Drilling Margin -->
                    <div class="card mb-3 border-primary">
                        <div class="card-header bg-primary bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-rulers"></i> Drilling Margin [263]</span>
                            <button class="btn btn-sm btn-primary" onclick="runDrillingMargin()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="dm-from" placeholder="From (m)" value="500"></div>
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="dm-to" placeholder="To (m)" value="5000"></div>
                                <div class="col-4"><input type="number" class="form-control form-control-sm" id="dm-mw" placeholder="MW (ppg)" value="10" step="0.5"></div>
                            </div>
                            <div id="drillingMarginResult"></div>
                        </div>
                    </div>

                    <!-- [264] Geomechanical Facies -->
                    <div class="card mb-3 border-success">
                        <div class="card-header bg-success bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-grid-3x3-gap-fill"></i> Geomechanical Facies [264]</span>
                            <button class="btn btn-sm btn-success" onclick="runGeomechFacies()">Run</button>
                        </div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-12"><input type="number" class="form-control form-control-sm" id="gf-nfacies" placeholder="N facies" value="3" min="2" max="8"></div>
                            </div>
                            <div id="geomechFaciesResult"></div>
                        </div>
                    </div>

                    <!-- [265] Sand Production Risk -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning text-dark"><i class="bi bi-exclamation-diamond"></i> Sand Production Risk</div>
                        <div class="card-body">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><label class="form-label">Depth From (m)</label><input type="number" class="form-control" id="sp-from" value="500"></div>
                                <div class="col-md-3"><label class="form-label">Depth To (m)</label><input type="number" class="form-control" id="sp-to" value="5000"></div>
                                <div class="col-md-3"><label class="form-label">UCS (MPa)</label><input type="number" class="form-control" id="sp-ucs" value="30" step="5"></div>
                                <div class="col-md-3"><label class="form-label">TWC (MPa, blank=auto)</label><input type="number" class="form-control" id="sp-twc" value="" step="5"></div>
                            </div>
                            <button class="btn btn-warning" onclick="runSandProduction()">Run Sand Production Risk</button>
                            <div id="sandProductionResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [266] Wellbore Breakout Width -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger text-white"><i class="bi bi-arrows-angle-expand"></i> Wellbore Breakout Width</div>
                        <div class="card-body">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><label class="form-label">Depth From (m)</label><input type="number" class="form-control" id="bw-from" value="500"></div>
                                <div class="col-md-3"><label class="form-label">Depth To (m)</label><input type="number" class="form-control" id="bw-to" value="5000"></div>
                                <div class="col-md-3"><label class="form-label">UCS (MPa)</label><input type="number" class="form-control" id="bw-ucs" value="50" step="5"></div>
                                <div class="col-md-3"><label class="form-label">Friction Angle (°)</label><input type="number" class="form-control" id="bw-phi" value="30" step="5"></div>
                            </div>
                            <button class="btn btn-danger" onclick="runBreakoutWidth()">Run Breakout Analysis</button>
                            <div id="breakoutWidthResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [267] Cement Bond Quality -->
                    <div class="card mb-4 border-secondary">
                        <div class="card-header bg-secondary text-white"><i class="bi bi-bricks"></i> Cement Bond Quality</div>
                        <div class="card-body">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><label class="form-label">Depth From (m)</label><input type="number" class="form-control" id="cb-from" value="500"></div>
                                <div class="col-md-3"><label class="form-label">Depth To (m)</label><input type="number" class="form-control" id="cb-to" value="5000"></div>
                                <div class="col-md-3"><label class="form-label">Cement (ppg)</label><input type="number" class="form-control" id="cb-cement" value="16.0" step="0.5"></div>
                                <div class="col-md-3"><label class="form-label">MW (ppg)</label><input type="number" class="form-control" id="cb-mw" value="10.0" step="0.5"></div>
                            </div>
                            <button class="btn btn-secondary" onclick="runCementBond()">Run Cement Bond Analysis</button>
                            <div id="cementBondResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [268] Swab & Surge Pressure -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info text-white"><i class="bi bi-arrows-vertical"></i> Swab &amp; Surge Pressure</div>
                        <div class="card-body">
                            <div class="row g-2 mb-3">
                                <div class="col-md-2"><label class="form-label">From (m)</label><input type="number" class="form-control" id="ss-from" value="500"></div>
                                <div class="col-md-2"><label class="form-label">To (m)</label><input type="number" class="form-control" id="ss-to" value="5000"></div>
                                <div class="col-md-2"><label class="form-label">MW (ppg)</label><input type="number" class="form-control" id="ss-mw" value="10" step="0.5"></div>
                                <div class="col-md-2"><label class="form-label">Trip (ft/min)</label><input type="number" class="form-control" id="ss-speed" value="90" step="10"></div>
                                <div class="col-md-2"><label class="form-label">Pipe OD (in)</label><input type="number" class="form-control" id="ss-pod" value="5.0" step="0.5"></div>
                                <div class="col-md-2"><label class="form-label">Hole (in)</label><input type="number" class="form-control" id="ss-hole" value="8.5" step="0.5"></div>
                            </div>
                            <button class="btn btn-info" onclick="runSwabSurge()">Run Swab/Surge Analysis</button>
                            <div id="swabSurgeResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [269] Rock Strength Profile -->
                    <div class="card mb-4 border-primary">
                        <div class="card-header bg-primary text-white"><i class="bi bi-gem"></i> Rock Strength Profile</div>
                        <div class="card-body">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><label class="form-label">Depth From (m)</label><input type="number" class="form-control" id="rs-from" value="500"></div>
                                <div class="col-md-3"><label class="form-label">Depth To (m)</label><input type="number" class="form-control" id="rs-to" value="5000"></div>
                                <div class="col-md-3"><label class="form-label">Surface UCS (MPa)</label><input type="number" class="form-control" id="rs-ucs0" value="20" step="5"></div>
                                <div class="col-md-3"><label class="form-label">UCS Gradient (MPa/km)</label><input type="number" class="form-control" id="rs-grad" value="15" step="5"></div>
                            </div>
                            <button class="btn btn-primary" onclick="runRockStrength()">Run Rock Strength Profile</button>
                            <div id="rockStrengthResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [270] Kick Tolerance -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger text-white"><i class="bi bi-shield-exclamation"></i> Kick Tolerance</div>
                        <div class="card-body">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><label class="form-label">Depth From (m)</label><input type="number" class="form-control" id="kt-from" value="500"></div>
                                <div class="col-md-3"><label class="form-label">Depth To (m)</label><input type="number" class="form-control" id="kt-to" value="5000"></div>
                                <div class="col-md-3"><label class="form-label">MW (ppg)</label><input type="number" class="form-control" id="kt-mw" value="10" step="0.5"></div>
                                <div class="col-md-3"><label class="form-label">Kick Int. (ppg)</label><input type="number" class="form-control" id="kt-ki" value="0.5" step="0.1"></div>
                            </div>
                            <button class="btn btn-danger" onclick="runKickTolerance()">Run Kick Tolerance</button>
                            <div id="kickToleranceResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [271] Hole Cleaning Index -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info text-white"><i class="bi bi-funnel"></i> Hole Cleaning Index</div>
                        <div class="card-body">
                            <div class="row g-2 mb-3">
                                <div class="col-md-2"><label class="form-label">From (m)</label><input type="number" class="form-control" id="hc-from" value="500"></div>
                                <div class="col-md-2"><label class="form-label">To (m)</label><input type="number" class="form-control" id="hc-to" value="5000"></div>
                                <div class="col-md-2"><label class="form-label">Flow (gpm)</label><input type="number" class="form-control" id="hc-flow" value="400" step="50"></div>
                                <div class="col-md-2"><label class="form-label">RPM</label><input type="number" class="form-control" id="hc-rpm" value="120" step="10"></div>
                                <div class="col-md-2"><label class="form-label">Angle (°)</label><input type="number" class="form-control" id="hc-angle" value="0" step="5"></div>
                                <div class="col-md-2"><label class="form-label">Hole (in)</label><input type="number" class="form-control" id="hc-hole" value="8.5" step="0.5"></div>
                            </div>
                            <button class="btn btn-info" onclick="runHoleCleaning()">Run Hole Cleaning</button>
                            <div id="holeCleaningResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [272] Formation Integrity Test -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning text-dark"><i class="bi bi-speedometer2"></i> Formation Integrity Test (LOT/FIT)</div>
                        <div class="card-body">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><label class="form-label">Test Depth (m)</label><input type="number" class="form-control" id="fit-depth" value="2000"></div>
                                <div class="col-md-3"><label class="form-label">MW (ppg)</label><input type="number" class="form-control" id="fit-mw" value="10" step="0.5"></div>
                                <div class="col-md-3"><label class="form-label">Pump Rate (bpm)</label><input type="number" class="form-control" id="fit-rate" value="0.5" step="0.1"></div>
                                <div class="col-md-3"><label class="form-label">Test Type</label><select class="form-select" id="fit-type"><option value="LOT">LOT</option><option value="FIT">FIT</option></select></div>
                            </div>
                            <button class="btn btn-warning" onclick="runFITSim()">Run FIT Simulation</button>
                            <div id="fitSimResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [273] Stuck Pipe Risk -->
                    <div class="card mb-4 border-dark">
                        <div class="card-header bg-dark text-white"><i class="bi bi-lock-fill"></i> Stuck Pipe Risk</div>
                        <div class="card-body">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><label class="form-label">Depth From (m)</label><input type="number" class="form-control" id="spr-from" value="500"></div>
                                <div class="col-md-3"><label class="form-label">Depth To (m)</label><input type="number" class="form-control" id="spr-to" value="5000"></div>
                                <div class="col-md-3"><label class="form-label">MW (ppg)</label><input type="number" class="form-control" id="spr-mw" value="10" step="0.5"></div>
                                <div class="col-md-3"><label class="form-label">Mud Type</label><select class="form-select" id="spr-mud"><option value="WBM">WBM</option><option value="OBM">OBM</option></select></div>
                            </div>
                            <button class="btn btn-dark" onclick="runStuckPipe()">Run Stuck Pipe Analysis</button>
                            <div id="stuckPipeResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [274] Wellbore Stability Window -->
                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success text-white"><i class="bi bi-window-stack"></i> Wellbore Stability Window</div>
                        <div class="card-body">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><label class="form-label">Depth From (m)</label><input type="number" class="form-control" id="sw-from" value="500"></div>
                                <div class="col-md-3"><label class="form-label">Depth To (m)</label><input type="number" class="form-control" id="sw-to" value="5000"></div>
                                <div class="col-md-3"><label class="form-label">UCS (MPa)</label><input type="number" class="form-control" id="sw-ucs" value="40" step="5"></div>
                                <div class="col-md-3"><label class="form-label">Friction Angle (°)</label><input type="number" class="form-control" id="sw-phi" value="30" step="5"></div>
                            </div>
                            <button class="btn btn-success" onclick="runStabilityWindow()">Run Stability Window</button>
                            <div id="stabilityWindowResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [275] Directional Stability -->
                    <div class="card mb-4 border-primary">
                        <div class="card-header bg-primary text-white"><i class="bi bi-compass"></i> Directional Stability</div>
                        <div class="card-body">
                            <div class="row g-2 mb-3">
                                <div class="col-md-2"><label class="form-label">From (m)</label><input type="number" class="form-control" id="ds-from" value="500"></div>
                                <div class="col-md-2"><label class="form-label">To (m)</label><input type="number" class="form-control" id="ds-to" value="5000"></div>
                                <div class="col-md-2"><label class="form-label">WB Azi (°)</label><input type="number" class="form-control" id="ds-azi" value="0" step="15"></div>
                                <div class="col-md-2"><label class="form-label">WB Inc (°)</label><input type="number" class="form-control" id="ds-inc" value="0" step="5"></div>
                                <div class="col-md-2"><label class="form-label">UCS (MPa)</label><input type="number" class="form-control" id="ds-ucs" value="50" step="10"></div>
                            </div>
                            <button class="btn btn-primary" onclick="runDirectionalStability()">Run Directional Stability</button>
                            <div id="directionalStabilityResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [276] Effective Stress Gradient -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info text-white"><i class="bi bi-graph-down-arrow"></i> Effective Stress Gradient</div>
                        <div class="card-body">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><label class="form-label">Depth From (m)</label><input type="number" class="form-control" id="esg-from" value="500"></div>
                                <div class="col-md-3"><label class="form-label">Depth To (m)</label><input type="number" class="form-control" id="esg-to" value="5000"></div>
                                <div class="col-md-3"><label class="form-label">Pp Gradient (psi/ft)</label><input type="number" class="form-control" id="esg-ppg" value="0.45" step="0.05"></div>
                            </div>
                            <button class="btn btn-info" onclick="runEffStressGrad()">Run Eff. Stress Gradient</button>
                            <div id="effStressGradResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [277] Depletion Effect -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning text-dark"><i class="bi bi-arrow-down-circle"></i> Depletion Effect on Stress</div>
                        <div class="card-body">
                            <div class="row g-2 mb-3">
                                <div class="col-md-3"><label class="form-label">Depth (m)</label><input type="number" class="form-control" id="dep-depth" value="3000"></div>
                                <div class="col-md-3"><label class="form-label">Depletion (MPa)</label><input type="number" class="form-control" id="dep-dp" value="10" step="2"></div>
                                <div class="col-md-3"><label class="form-label">Poisson Ratio</label><input type="number" class="form-control" id="dep-nu" value="0.25" step="0.05"></div>
                            </div>
                            <button class="btn btn-warning" onclick="runDepletionEffect()">Run Depletion Analysis</button>
                            <div id="depletionEffectResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [278] Fracture Reopen Pressure -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger text-white"><i class="bi bi-door-open"></i> Fracture Reopen Pressure</div>
                        <div class="card-body">
                            <div class="row g-2 mb-3">
                                <div class="col-md-4"><label class="form-label">Depth From (m)</label><input type="number" class="form-control" id="frp-from" value="500"></div>
                                <div class="col-md-4"><label class="form-label">Depth To (m)</label><input type="number" class="form-control" id="frp-to" value="5000"></div>
                            </div>
                            <button class="btn btn-danger" onclick="runFracReopen()">Run Frac Reopen Analysis</button>
                            <div id="fracReopenResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [279] Annular Pressure Buildup -->
                    <div class="card mb-4 border-secondary">
                        <div class="card-header bg-secondary text-white"><i class="bi bi-thermometer-high"></i> Annular Pressure Buildup (APB)</div>
                        <div class="card-body">
                            <div class="row g-2 mb-3">
                                <div class="col-md-2"><label class="form-label">Depth (m)</label><input type="number" class="form-control" id="apb-depth" value="3000"></div>
                                <div class="col-md-2"><label class="form-label">Prod T (°C)</label><input type="number" class="form-control" id="apb-pt" value="120" step="10"></div>
                                <div class="col-md-2"><label class="form-label">Init T (°C)</label><input type="number" class="form-control" id="apb-it" value="40" step="5"></div>
                                <div class="col-md-3"><label class="form-label">Fluid</label><select class="form-select" id="apb-fluid"><option value="water">Water</option><option value="oil">Oil</option></select></div>
                                <div class="col-md-2"><label class="form-label">Csg OD (in)</label><input type="number" class="form-control" id="apb-od" value="9.625" step="0.5"></div>
                            </div>
                            <button class="btn btn-secondary" onclick="runAPB()">Run APB Analysis</button>
                            <div id="apbResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [280] Injection-Induced Seismicity -->
                    <div class="card mb-3" id="injSeismicCard">
                        <div class="card-header bg-danger text-white"><h6>[280] Injection-Induced Seismicity Risk</h6></div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-md-3"><label class="form-label">Well</label><select id="injseis-well" class="form-select form-select-sm"><option>3P</option><option>6P</option></select></div>
                                <div class="col-md-3"><label class="form-label">Depth (m)</label><input id="injseis-depth" class="form-control form-control-sm" type="number" value="3000"></div>
                                <div class="col-md-3"><label class="form-label">Inj Press (MPa)</label><input id="injseis-press" class="form-control form-control-sm" type="number" value="35"></div>
                                <div class="col-md-3"><label class="form-label">Volume (m³)</label><input id="injseis-vol" class="form-control form-control-sm" type="number" value="5000"></div>
                            </div>
                            <button class="btn btn-danger" onclick="runInjSeismicity()">Run Seismicity Analysis</button>
                            <div id="injSeismicResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [281] Wellbore Trajectory Stress -->
                    <div class="card mb-3" id="trajStressCard">
                        <div class="card-header bg-info text-white"><h6>[281] Wellbore Trajectory Stress</h6></div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-md-3"><label class="form-label">Well</label><select id="trajstress-well" class="form-select form-select-sm"><option>3P</option><option>6P</option></select></div>
                                <div class="col-md-3"><label class="form-label">Depth (m)</label><input id="trajstress-depth" class="form-control form-control-sm" type="number" value="3000"></div>
                                <div class="col-md-3"><label class="form-label">UCS (MPa)</label><input id="trajstress-ucs" class="form-control form-control-sm" type="number" value="50"></div>
                                <div class="col-md-3"><label class="form-label">Grid Step (°)</label><input id="trajstress-step" class="form-control form-control-sm" type="number" value="15"></div>
                            </div>
                            <button class="btn btn-info text-white" onclick="runTrajStress()">Run Trajectory Analysis</button>
                            <div id="trajStressResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [282] Reservoir Compaction -->
                    <div class="card mb-3" id="resCompCard">
                        <div class="card-header bg-warning text-dark"><h6>[282] Reservoir Compaction</h6></div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-md-3"><label class="form-label">Well</label><select id="rescomp-well" class="form-select form-select-sm"><option>3P</option><option>6P</option></select></div>
                                <div class="col-md-3"><label class="form-label">Depth (m)</label><input id="rescomp-depth" class="form-control form-control-sm" type="number" value="3000"></div>
                                <div class="col-md-3"><label class="form-label">Thickness (m)</label><input id="rescomp-thick" class="form-control form-control-sm" type="number" value="50"></div>
                                <div class="col-md-3"><label class="form-label">Depletion (MPa)</label><input id="rescomp-depl" class="form-control form-control-sm" type="number" value="15"></div>
                            </div>
                            <button class="btn btn-warning" onclick="runResCompaction()">Run Compaction Analysis</button>
                            <div id="resCompResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [283] Perforation Stability -->
                    <div class="card mb-3" id="perfStabCard">
                        <div class="card-header bg-primary text-white"><h6>[283] Perforation Stability</h6></div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-md-3"><label class="form-label">Well</label><select id="perfstab-well" class="form-select form-select-sm"><option>3P</option><option>6P</option></select></div>
                                <div class="col-md-3"><label class="form-label">Depth (m)</label><input id="perfstab-depth" class="form-control form-control-sm" type="number" value="3000"></div>
                                <div class="col-md-3"><label class="form-label">UCS (MPa)</label><input id="perfstab-ucs" class="form-control form-control-sm" type="number" value="50"></div>
                                <div class="col-md-3"><label class="form-label">Steps</label><input id="perfstab-steps" class="form-control form-control-sm" type="number" value="36"></div>
                            </div>
                            <button class="btn btn-primary" onclick="runPerfStability()">Run Perforation Analysis</button>
                            <div id="perfStabResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [284] Critical Drawdown -->
                    <div class="card mb-3" id="critDDCard">
                        <div class="card-header bg-secondary text-white"><h6>[284] Critical Drawdown Pressure</h6></div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-md-3"><label class="form-label">Well</label><select id="critdd-well" class="form-select form-select-sm"><option>3P</option><option>6P</option></select></div>
                                <div class="col-md-3"><label class="form-label">Depth (m)</label><input id="critdd-depth" class="form-control form-control-sm" type="number" value="3000"></div>
                                <div class="col-md-3"><label class="form-label">UCS (MPa)</label><input id="critdd-ucs" class="form-control form-control-sm" type="number" value="50"></div>
                                <div class="col-md-3"><label class="form-label">TWC Factor</label><input id="critdd-twc" class="form-control form-control-sm" type="number" step="0.1" value="3.0"></div>
                            </div>
                            <button class="btn btn-secondary" onclick="runCritDrawdown()">Run Drawdown Analysis</button>
                            <div id="critDDResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [285] Thermal Fracture Risk -->
                    <div class="card mb-3" id="thermalFracCard">
                        <div class="card-header bg-danger text-white"><h6>[285] Thermal Fracture Risk</h6></div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-md-3"><label class="form-label">Well</label><select id="thermfrac-well" class="form-select form-select-sm"><option>3P</option><option>6P</option></select></div>
                                <div class="col-md-3"><label class="form-label">Depth (m)</label><input id="thermfrac-depth" class="form-control form-control-sm" type="number" value="3000"></div>
                                <div class="col-md-3"><label class="form-label">Inj Temp (°C)</label><input id="thermfrac-injt" class="form-control form-control-sm" type="number" value="20"></div>
                                <div class="col-md-3"><label class="form-label">Res Temp (°C)</label><input id="thermfrac-rest" class="form-control form-control-sm" type="number" value="120"></div>
                            </div>
                            <button class="btn btn-danger" onclick="runThermalFracture()">Run Thermal Fracture</button>
                            <div id="thermalFracResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [286] Fault Slip Tendency -->
                    <div class="card mb-3" id="faultSlipCard">
                        <div class="card-header bg-warning text-dark"><h6>[286] Fault Slip Tendency</h6></div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-md-2"><label class="form-label">Well</label><select id="faultslip-well" class="form-select form-select-sm"><option>3P</option><option>6P</option></select></div>
                                <div class="col-md-2"><label class="form-label">Depth (m)</label><input id="faultslip-depth" class="form-control form-control-sm" type="number" value="3000"></div>
                                <div class="col-md-2"><label class="form-label">Fault Az (°)</label><input id="faultslip-az" class="form-control form-control-sm" type="number" value="45"></div>
                                <div class="col-md-2"><label class="form-label">Fault Dip (°)</label><input id="faultslip-dip" class="form-control form-control-sm" type="number" value="60"></div>
                                <div class="col-md-2"><label class="form-label">Friction</label><input id="faultslip-mu" class="form-control form-control-sm" type="number" step="0.1" value="0.6"></div>
                            </div>
                            <button class="btn btn-warning" onclick="runFaultSlip()">Run Fault Slip</button>
                            <div id="faultSlipResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [287] Pore Pressure Depletion -->
                    <div class="card mb-3" id="ppDeplCard">
                        <div class="card-header bg-info text-white"><h6>[287] Pore Pressure Depletion</h6></div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-md-3"><label class="form-label">Well</label><select id="ppdepl-well" class="form-select form-select-sm"><option>3P</option><option>6P</option></select></div>
                                <div class="col-md-3"><label class="form-label">Depth From (m)</label><input id="ppdepl-from" class="form-control form-control-sm" type="number" value="500"></div>
                                <div class="col-md-3"><label class="form-label">Depth To (m)</label><input id="ppdepl-to" class="form-control form-control-sm" type="number" value="5000"></div>
                                <div class="col-md-3"><label class="form-label">Depletion (%)</label><input id="ppdepl-pct" class="form-control form-control-sm" type="number" value="20"></div>
                            </div>
                            <button class="btn btn-info text-white" onclick="runPpDepletion()">Run Pp Depletion</button>
                            <div id="ppDeplResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [288] Wellbore Heating -->
                    <div class="card mb-3" id="wbHeatCard">
                        <div class="card-header bg-secondary text-white"><h6>[288] Wellbore Heating Effect</h6></div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-md-2"><label class="form-label">Well</label><select id="wbheat-well" class="form-select form-select-sm"><option>3P</option><option>6P</option></select></div>
                                <div class="col-md-2"><label class="form-label">Depth (m)</label><input id="wbheat-depth" class="form-control form-control-sm" type="number" value="3000"></div>
                                <div class="col-md-2"><label class="form-label">Prod Temp (°C)</label><input id="wbheat-prodt" class="form-control form-control-sm" type="number" value="150"></div>
                                <div class="col-md-2"><label class="form-label">Init Temp (°C)</label><input id="wbheat-initt" class="form-control form-control-sm" type="number" value="40"></div>
                                <div class="col-md-2"><label class="form-label">Casing Grade</label><select id="wbheat-grade" class="form-select form-select-sm"><option>L80</option><option>N80</option><option>P110</option><option>J55</option></select></div>
                            </div>
                            <button class="btn btn-secondary" onclick="runWbHeating()">Run Heating Analysis</button>
                            <div id="wbHeatResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [289] Caprock Seal Capacity -->
                    <div class="card mb-3" id="caprockSealCard">
                        <div class="card-header bg-success text-white"><h6>[289] Caprock Seal Capacity</h6></div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-md-3"><label class="form-label">Well</label><select id="capseal-well" class="form-select form-select-sm"><option>3P</option><option>6P</option></select></div>
                                <div class="col-md-3"><label class="form-label">Depth (m)</label><input id="capseal-depth" class="form-control form-control-sm" type="number" value="3000"></div>
                                <div class="col-md-3"><label class="form-label">Thickness (m)</label><input id="capseal-thick" class="form-control form-control-sm" type="number" value="50"></div>
                                <div class="col-md-3"><label class="form-label">Perm (mD)</label><input id="capseal-perm" class="form-control form-control-sm" type="number" step="0.001" value="0.001"></div>
                            </div>
                            <button class="btn btn-success" onclick="runCaprockSeal()">Run Seal Analysis</button>
                            <div id="caprockSealResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [290] Hydrostatic Kill Weight -->
                    <div class="card mb-3" id="killWeightCard">
                        <div class="card-header bg-danger text-white"><h6>[290] Hydrostatic Kill Weight</h6></div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-md-3"><label class="form-label">Well</label><select id="killwt-well" class="form-select form-select-sm"><option>3P</option><option>6P</option></select></div>
                                <div class="col-md-3"><label class="form-label">Depth From (m)</label><input id="killwt-from" class="form-control form-control-sm" type="number" value="500"></div>
                                <div class="col-md-3"><label class="form-label">Depth To (m)</label><input id="killwt-to" class="form-control form-control-sm" type="number" value="5000"></div>
                                <div class="col-md-3"><label class="form-label">Kick Margin (ppg)</label><input id="killwt-margin" class="form-control form-control-sm" type="number" step="0.1" value="0.5"></div>
                            </div>
                            <button class="btn btn-danger" onclick="runKillWeight()">Run Kill Weight</button>
                            <div id="killWeightResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [291] ECD Sensitivity -->
                    <div class="card mb-3" id="ecdSensCard">
                        <div class="card-header bg-info text-white"><h6>[291] ECD Sensitivity</h6></div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-md-2"><label class="form-label">Well</label><select id="ecdsens-well" class="form-select form-select-sm"><option>3P</option><option>6P</option></select></div>
                                <div class="col-md-2"><label class="form-label">Depth (m)</label><input id="ecdsens-depth" class="form-control form-control-sm" type="number" value="3000"></div>
                                <div class="col-md-2"><label class="form-label">MW (ppg)</label><input id="ecdsens-mw" class="form-control form-control-sm" type="number" step="0.5" value="10"></div>
                                <div class="col-md-2"><label class="form-label">Flow (gpm)</label><input id="ecdsens-flow" class="form-control form-control-sm" type="number" value="500"></div>
                                <div class="col-md-2"><label class="form-label">Hole OD (in)</label><input id="ecdsens-hole" class="form-control form-control-sm" type="number" step="0.5" value="8.5"></div>
                            </div>
                            <button class="btn btn-info text-white" onclick="runEcdSensitivity()">Run ECD Analysis</button>
                            <div id="ecdSensResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [292] Formation Breakdown -->
                    <div class="card mb-3" id="fmBreakdownCard">
                        <div class="card-header bg-warning text-dark"><h6>[292] Formation Breakdown Pressure</h6></div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-md-3"><label class="form-label">Well</label><select id="fmbd-well" class="form-select form-select-sm"><option>3P</option><option>6P</option></select></div>
                                <div class="col-md-3"><label class="form-label">Depth From (m)</label><input id="fmbd-from" class="form-control form-control-sm" type="number" value="500"></div>
                                <div class="col-md-3"><label class="form-label">Depth To (m)</label><input id="fmbd-to" class="form-control form-control-sm" type="number" value="5000"></div>
                                <div class="col-md-3"><label class="form-label">T0 (MPa)</label><input id="fmbd-t0" class="form-control form-control-sm" type="number" value="5"></div>
                            </div>
                            <button class="btn btn-warning" onclick="runFmBreakdown()">Run Breakdown Analysis</button>
                            <div id="fmBreakdownResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [293] Stress Regime Polygon -->
                    <div class="card mb-3" id="stressPolyCard">
                        <div class="card-header bg-primary text-white"><h6>[293] Stress Regime Polygon</h6></div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-md-4"><label class="form-label">Well</label><select id="stresspoly-well" class="form-select form-select-sm"><option>3P</option><option>6P</option></select></div>
                                <div class="col-md-4"><label class="form-label">Depth (m)</label><input id="stresspoly-depth" class="form-control form-control-sm" type="number" value="3000"></div>
                                <div class="col-md-4"><label class="form-label">Friction</label><input id="stresspoly-mu" class="form-control form-control-sm" type="number" step="0.1" value="0.6"></div>
                            </div>
                            <button class="btn btn-primary" onclick="runStressPoly()">Run Stress Polygon</button>
                            <div id="stressPolyResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [294] Fracture Gradient Window -->
                    <div class="card mb-3" id="fracGradWinCard">
                        <div class="card-header bg-success text-white"><h6>[294] Fracture Gradient Window</h6></div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-md-3"><label class="form-label">Well</label><select id="fracgw-well" class="form-select form-select-sm"><option>3P</option><option>6P</option></select></div>
                                <div class="col-md-3"><label class="form-label">Depth From (m)</label><input id="fracgw-from" class="form-control form-control-sm" type="number" value="500"></div>
                                <div class="col-md-3"><label class="form-label">Depth To (m)</label><input id="fracgw-to" class="form-control form-control-sm" type="number" value="5000"></div>
                                <div class="col-md-3"><label class="form-label">MW (ppg)</label><input id="fracgw-mw" class="form-control form-control-sm" type="number" step="0.5" value="10"></div>
                            </div>
                            <button class="btn btn-success" onclick="runFracGradWindow()">Run Window Analysis</button>
                            <div id="fracGradWinResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [295] Wellbore Washout -->
                    <div class="card mb-3" id="washoutCard">
                        <div class="card-header bg-warning text-dark"><h6>[295] Wellbore Washout Risk</h6></div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-md-3"><label class="form-label">Well</label><select id="washout-well" class="form-select form-select-sm"><option>3P</option><option>6P</option></select></div>
                                <div class="col-md-2"><label class="form-label">From (m)</label><input id="washout-from" class="form-control form-control-sm" type="number" value="500"></div>
                                <div class="col-md-2"><label class="form-label">To (m)</label><input id="washout-to" class="form-control form-control-sm" type="number" value="5000"></div>
                                <div class="col-md-2"><label class="form-label">Bit (in)</label><input id="washout-bit" class="form-control form-control-sm" type="number" step="0.5" value="8.5"></div>
                                <div class="col-md-2"><label class="form-label">MW (ppg)</label><input id="washout-mw" class="form-control form-control-sm" type="number" step="0.5" value="10"></div>
                            </div>
                            <button class="btn btn-warning" onclick="runWashout()">Run Washout Analysis</button>
                            <div id="washoutResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [296] Casing Shoe Strength -->
                    <div class="card mb-3" id="casingShoeCard">
                        <div class="card-header bg-info text-white"><h6>[296] Casing Shoe Strength</h6></div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-md-3"><label class="form-label">Well</label><select id="shoe-well" class="form-select form-select-sm"><option>3P</option><option>6P</option></select></div>
                                <div class="col-md-3"><label class="form-label">Shoe Depth (m)</label><input id="shoe-depth" class="form-control form-control-sm" type="number" value="2000"></div>
                                <div class="col-md-3"><label class="form-label">Casing (in)</label><input id="shoe-size" class="form-control form-control-sm" type="number" step="0.5" value="9.625"></div>
                                <div class="col-md-3"><label class="form-label">MW (ppg)</label><input id="shoe-mw" class="form-control form-control-sm" type="number" step="0.5" value="10"></div>
                            </div>
                            <button class="btn btn-info text-white" onclick="runCasingShoe()">Run Shoe Analysis</button>
                            <div id="casingShoeResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [297] Differential Sticking -->
                    <div class="card mb-3" id="diffStickCard">
                        <div class="card-header bg-danger text-white"><h6>[297] Differential Sticking Risk</h6></div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-md-2"><label class="form-label">Well</label><select id="dstick-well" class="form-select form-select-sm"><option>3P</option><option>6P</option></select></div>
                                <div class="col-md-2"><label class="form-label">From (m)</label><input id="dstick-from" class="form-control form-control-sm" type="number" value="500"></div>
                                <div class="col-md-2"><label class="form-label">To (m)</label><input id="dstick-to" class="form-control form-control-sm" type="number" value="5000"></div>
                                <div class="col-md-2"><label class="form-label">MW (ppg)</label><input id="dstick-mw" class="form-control form-control-sm" type="number" step="0.5" value="11"></div>
                                <div class="col-md-2"><label class="form-label">Pipe OD (in)</label><input id="dstick-od" class="form-control form-control-sm" type="number" step="0.5" value="5.0"></div>
                            </div>
                            <button class="btn btn-danger" onclick="runDiffSticking()">Run Sticking Analysis</button>
                            <div id="diffStickResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [298] Borehole Stability Map -->
                    <div class="card mb-3" id="bhStabMapCard">
                        <div class="card-header bg-primary text-white"><h6>[298] Borehole Stability Map</h6></div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-md-3"><label class="form-label">Well</label><select id="bhmap-well" class="form-select form-select-sm"><option>3P</option><option>6P</option></select></div>
                                <div class="col-md-3"><label class="form-label">From (m)</label><input id="bhmap-from" class="form-control form-control-sm" type="number" value="500"></div>
                                <div class="col-md-3"><label class="form-label">To (m)</label><input id="bhmap-to" class="form-control form-control-sm" type="number" value="5000"></div>
                                <div class="col-md-3"><label class="form-label">MW Range</label><input id="bhmap-mwmin" class="form-control form-control-sm" type="number" value="8" placeholder="Min"> - <input id="bhmap-mwmax" class="form-control form-control-sm" type="number" value="16" placeholder="Max"></div>
                            </div>
                            <button class="btn btn-primary" onclick="runBhStabMap()">Run Stability Map</button>
                            <div id="bhStabMapResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [299] Hydraulic Fracture Containment -->
                    <div class="card mb-3" id="hfContainCard">
                        <div class="card-header bg-success text-white"><h6>[299] Hydraulic Fracture Containment</h6></div>
                        <div class="card-body">
                            <div class="row g-2 mb-2">
                                <div class="col-md-3"><label class="form-label">Well</label><select id="hfcont-well" class="form-select form-select-sm"><option>3P</option><option>6P</option></select></div>
                                <div class="col-md-3"><label class="form-label">Depth (m)</label><input id="hfcont-depth" class="form-control form-control-sm" type="number" value="3000"></div>
                                <div class="col-md-3"><label class="form-label">Res Thick (m)</label><input id="hfcont-thick" class="form-control form-control-sm" type="number" value="30"></div>
                                <div class="col-md-3"><label class="form-label">Net Press (MPa)</label><input id="hfcont-np" class="form-control form-control-sm" type="number" value="5"></div>
                            </div>
                            <button class="btn btn-success" onclick="runHfContainment()">Run Containment Analysis</button>
                            <div id="hfContainResult" class="mt-3"></div>
                        </div>
                    </div>

                    <!-- [300] Sand Failure Prediction -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning text-dark d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-bricks"></i> <strong>[300] Sand Failure Prediction</strong></span>
                            <button class="btn btn-sm btn-dark" onclick="runSandFailurePrediction()">Run</button>
                        </div>
                        <div class="card-body small" id="sandFailurePredictionResult">
                            <p class="text-muted">Predict sand failure onset using Mohr-Coulomb and TWC criteria.</p>
                        </div>
                    </div>

                    <!-- [301] Wellbore Breathing -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info text-dark d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-lungs"></i> <strong>[301] Wellbore Breathing</strong></span>
                            <button class="btn btn-sm btn-dark" onclick="runWellboreBreathing()">Run</button>
                        </div>
                        <div class="card-body small" id="wellboreBreathingResult">
                            <p class="text-muted">Analyze fracture open/close cycles (ballooning) during drilling.</p>
                        </div>
                    </div>

                    <!-- [302] Surge-Swab Pressure -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-arrow-down-up"></i> <strong>[302] Surge-Swab Pressure</strong></span>
                            <button class="btn btn-sm btn-light" onclick="runSurgeSwabPressure()">Run</button>
                        </div>
                        <div class="card-body small" id="surgeSwabPressureResult">
                            <p class="text-muted">Calculate surge and swab pressures during tripping operations.</p>
                        </div>
                    </div>

                    <!-- [303] Lost Circulation Risk -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning text-dark d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-droplet-half"></i> <strong>[303] Lost Circulation Risk</strong></span>
                            <button class="btn btn-sm btn-dark" onclick="runLostCirculationRisk()">Run</button>
                        </div>
                        <div class="card-body small" id="lostCirculationRiskResult">
                            <p class="text-muted">Assess lost circulation risk from MW window, fracture density, and stress.</p>
                        </div>
                    </div>

                    <!-- [304] Hole Cleaning Efficiency -->
                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-tornado"></i> <strong>[304] Hole Cleaning Efficiency</strong></span>
                            <button class="btn btn-sm btn-light" onclick="runHoleCleaningEfficiency()">Run</button>
                        </div>
                        <div class="card-body small" id="holeCleaningEfficiencyResult">
                            <p class="text-muted">Evaluate cuttings transport and annular velocity adequacy.</p>
                        </div>
                    </div>

                    <!-- [305] Torque-Drag Analysis -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-wrench-adjustable"></i> <strong>[305] Torque-Drag Analysis</strong></span>
                            <button class="btn btn-sm btn-light" onclick="runTorqueDragAnalysis()">Run</button>
                        </div>
                        <div class="card-body small" id="torqueDragResult">
                            <p class="text-muted">Soft-string torque and drag model for drilling/tripping operations.</p>
                        </div>
                    </div>

                    <!-- [306] Casing Wear Prediction -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning text-dark d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-shield-exclamation"></i> <strong>[306] Casing Wear Prediction</strong></span>
                            <button class="btn btn-sm btn-dark" onclick="runCasingWearPrediction()">Run</button>
                        </div>
                        <div class="card-body small" id="casingWearResult">
                            <p class="text-muted">Predict casing wear from drill string rotation and contact forces.</p>
                        </div>
                    </div>

                    <!-- [307] Kick Margin Profile -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info text-dark d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-speedometer2"></i> <strong>[307] Kick Margin Profile</strong></span>
                            <button class="btn btn-sm btn-dark" onclick="runKickMarginProfile()">Run</button>
                        </div>
                        <div class="card-body small" id="kickMarginResult">
                            <p class="text-muted">Pore-frac pressure window and kick margin vs depth.</p>
                        </div>
                    </div>

                    <!-- [308] Cement Integrity Assessment -->
                    <div class="card mb-4 border-secondary">
                        <div class="card-header bg-secondary text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-building"></i> <strong>[308] Cement Integrity Assessment</strong></span>
                            <button class="btn btn-sm btn-light" onclick="runCementIntegrity()">Run</button>
                        </div>
                        <div class="card-body small" id="cementIntegrityResult">
                            <p class="text-muted">Cement sheath integrity under thermal and pressure cycling.</p>
                        </div>
                    </div>

                    <!-- [309] Swelling Pressure Risk -->
                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-moisture"></i> <strong>[309] Swelling Pressure Risk</strong></span>
                            <button class="btn btn-sm btn-light" onclick="runSwellingPressureRisk()">Run</button>
                        </div>
                        <div class="card-body small" id="swellingPressureResult">
                            <p class="text-muted">Clay swelling risk from water-based mud interaction with shale.</p>
                        </div>
                    </div>

                    <!-- [310] Annular Pressure Loss -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info text-dark d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-arrow-up-circle"></i> <strong>[310] Annular Pressure Loss</strong></span>
                            <button class="btn btn-sm btn-dark" onclick="runAnnularPressureLoss()">Run</button>
                        </div>
                        <div class="card-body small" id="annularPressureLossResult">
                            <p class="text-muted">Bingham plastic annular pressure loss and ECD profile.</p>
                        </div>
                    </div>

                    <!-- [311] Stability Window Profile -->
                    <div class="card mb-4 border-success">
                        <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-rulers"></i> <strong>[311] Stability Window Profile</strong></span>
                            <button class="btn btn-sm btn-light" onclick="runStabilityWindowProfile()">Run</button>
                        </div>
                        <div class="card-body small" id="stabilityWindowResult">
                            <p class="text-muted">Breakout/breakdown MW window for safe drilling.</p>
                        </div>
                    </div>

                    <!-- [312] Trip Margin Analysis -->
                    <div class="card mb-4 border-warning">
                        <div class="card-header bg-warning text-dark d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-clock-history"></i> <strong>[312] Trip Margin Analysis</strong></span>
                            <button class="btn btn-sm btn-dark" onclick="runTripMarginAnalysis()">Run</button>
                        </div>
                        <div class="card-body small" id="tripMarginResult">
                            <p class="text-muted">MW increment needed during pipe connections and trips.</p>
                        </div>
                    </div>

                    <!-- [313] Pack-Off Risk -->
                    <div class="card mb-4 border-danger">
                        <div class="card-header bg-danger text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-box-seam"></i> <strong>[313] Pack-Off Risk</strong></span>
                            <button class="btn btn-sm btn-light" onclick="runPackOffRisk()">Run</button>
                        </div>
                        <div class="card-body small" id="packOffRiskResult">
                            <p class="text-muted">Cuttings accumulation and pack-off risk assessment.</p>
                        </div>
                    </div>

                    <!-- [314] ECD Profile (Comprehensive) -->
                    <div class="card mb-4 border-primary">
                        <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-graph-up-arrow"></i> <strong>[314] ECD Profile</strong></span>
                            <button class="btn btn-sm btn-light" onclick="runECDProfile()">Run</button>
                        </div>
                        <div class="card-body small" id="ecdProfileResult">
                            <p class="text-muted">Comprehensive ECD with friction, cuttings, and temperature effects.</p>
                        </div>
                    </div>

                    </div><!-- /drilling-cards-container -->

                    <!-- Persistent Storage Management -->
                    <div class="card mb-4 border-secondary">
                        <div class="card-header bg-secondary bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-database-fill-check"></i> Persistent Storage (SQLite)</span>
                            <button class="btn btn-sm btn-outline-secondary" onclick="loadDbStats()">
                                <i class="bi bi-arrow-clockwise"></i> Refresh
                            </button>
                        </div>
                        <div class="card-body">
                            <div id="db-stats" class="row g-2 mb-3">
                                <div class="col-4">
                                    <div class="text-center p-2 bg-light rounded">
                                        <div class="fs-4 fw-bold text-primary" id="db-audit-count">-</div>
                                        <small class="text-muted">Audit Records</small>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="text-center p-2 bg-light rounded">
                                        <div class="fs-4 fw-bold text-success" id="db-model-count">-</div>
                                        <small class="text-muted">Model Runs</small>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="text-center p-2 bg-light rounded">
                                        <div class="fs-4 fw-bold text-warning" id="db-pref-count">-</div>
                                        <small class="text-muted">Expert Prefs</small>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex gap-2">
                                <button class="btn btn-sm btn-outline-primary" onclick="exportDatabase()">
                                    <i class="bi bi-download"></i> Export Backup
                                </button>
                                <label class="btn btn-sm btn-outline-success mb-0">
                                    <i class="bi bi-upload"></i> Import Backup
                                    <input type="file" accept=".json" onchange="importDatabase(event)" hidden>
                                </label>
                                <small class="text-muted align-self-center ms-auto" id="db-size">-</small>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Navigation for Stakeholders -->
                    <div class="card mb-4 border-info">
                        <div class="card-header bg-info bg-opacity-10">
                            <i class="bi bi-signpost-split"></i> Analysis Workflow
                        </div>
                        <div class="card-body">
                            <div class="row g-2 text-center">
                                <div class="col">
                                    <a href="#" data-tab="viz" class="nav-link text-decoration-none">
                                        <div class="p-2 rounded bg-light"><i class="bi bi-pie-chart fs-4 d-block text-primary"></i>
                                        <small>1. Visualize</small></div>
                                    </a>
                                </div>
                                <div class="col">
                                    <a href="#" data-tab="inversion" class="nav-link text-decoration-none">
                                        <div class="p-2 rounded bg-light"><i class="bi bi-gear-wide-connected fs-4 d-block text-primary"></i>
                                        <small>2. Stress Inversion</small></div>
                                    </a>
                                </div>
                                <div class="col">
                                    <a href="#" data-tab="models" class="nav-link text-decoration-none">
                                        <div class="p-2 rounded bg-light"><i class="bi bi-bar-chart-line fs-4 d-block text-primary"></i>
                                        <small>3. Compare Models</small></div>
                                    </a>
                                </div>
                                <div class="col">
                                    <a href="#" data-tab="sensitivity" class="nav-link text-decoration-none">
                                        <div class="p-2 rounded bg-light"><i class="bi bi-sliders fs-4 d-block text-primary"></i>
                                        <small>4. Sensitivity</small></div>
                                    </a>
                                </div>
                                <div class="col">
                                    <a href="#" data-tab="risk" class="nav-link text-decoration-none">
                                        <div class="p-2 rounded bg-light"><i class="bi bi-shield-exclamation fs-4 d-block text-danger"></i>
                                        <small>5. Risk Matrix</small></div>
                                    </a>
                                </div>
                                <div class="col">
                                    <a href="#" data-tab="uncertainty" class="nav-link text-decoration-none">
                                        <div class="p-2 rounded bg-light"><i class="bi bi-clipboard-pulse fs-4 d-block text-info"></i>
                                        <small>6. Uncertainty</small></div>
                                    </a>
                                </div>
                                <div class="col">
                                    <a href="#" data-tab="report" class="nav-link text-decoration-none">
                                        <div class="p-2 rounded bg-light"><i class="bi bi-file-earmark-text fs-4 d-block text-success"></i>
                                        <small>7. Report</small></div>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">Fracture Summary by Well & Type</div>
                        <div class="card-body p-0">
                            <div class="table-responsive">
                                <table class="table table-striped table-hover mb-0" id="summary-table">
                                    <thead>
                                        <tr>
                                            <th>Well</th><th>Fracture Type</th><th>Count</th>
                                            <th>Depth Min (m)</th><th>Depth Max (m)</th>
                                            <th>Mean Azimuth (&deg;)</th><th>Mean Dip (&deg;)</th>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Data Contribution Tracker -->
                    <hr class="my-4">
                    <h5 class="mb-3"><i class="bi bi-graph-up-arrow"></i> Data Contribution Tracker</h5>
                    <p class="text-muted small">Shows exactly where more data is needed and how much accuracy would improve. Tells your field team what to collect.</p>

                    <button class="btn btn-info btn-sm mb-3" onclick="runDataTracker()">
                        <i class="bi bi-bullseye"></i> Analyze Data Gaps
                    </button>

                    <div id="dt-results" class="d-none">
                        <!-- Data Health Grade -->
                        <div class="card mb-3" id="dt-health-card">
                            <div class="card-body text-center py-3">
                                <div class="small text-muted">DATA HEALTH</div>
                                <h2 id="dt-health-grade" class="fw-bold mb-1">--</h2>
                                <p id="dt-health-summary" class="mb-0"></p>
                            </div>
                        </div>

                        <!-- Per-Class Sample Analysis -->
                        <div class="card mb-3">
                            <div class="card-header"><i class="bi bi-collection"></i> Fracture Type Sample Analysis</div>
                            <div class="card-body p-0">
                                <table class="table table-sm table-striped mb-0">
                                    <thead><tr>
                                        <th>Fracture Type</th><th>Current</th><th>Target</th><th>Deficit</th><th>Priority</th>
                                    </tr></thead>
                                    <tbody id="dt-class-tbody"></tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Depth Coverage -->
                        <div class="card mb-3">
                            <div class="card-header"><i class="bi bi-layers"></i> Depth Zone Coverage</div>
                            <div class="card-body p-0">
                                <table class="table table-sm table-striped mb-0">
                                    <thead><tr>
                                        <th>Depth Zone</th><th>Samples</th><th>Coverage %</th><th>Priority</th>
                                    </tr></thead>
                                    <tbody id="dt-depth-tbody"></tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Accuracy Projections -->
                        <div class="card mb-3">
                            <div class="card-header"><i class="bi bi-graph-up"></i> Accuracy Projections</div>
                            <div class="card-body">
                                <div class="mb-2">Current accuracy: <strong id="dt-current-acc">--</strong></div>
                                <div id="dt-projections"></div>
                            </div>
                        </div>

                        <!-- Recommendations -->
                        <div class="card border-primary">
                            <div class="card-header bg-primary text-white"><i class="bi bi-signpost-split"></i> Collection Recommendations</div>
                            <div class="card-body" id="dt-recommendations"></div>
                        </div>
                    </div>
                </div>

                <!-- VISUALIZATIONS TAB -->
                <div id="tab-viz" class="tab-content">
                    <div class="alert alert-light border py-2 mb-3 small"><i class="bi bi-info-circle text-primary"></i> <strong>Visualizations</strong> &mdash; Visual plots showing fracture orientation patterns. <em>Rose diagrams</em> show which compass directions fractures face (like a wind rose). <em>Stereonets</em> project 3D orientations onto a 2D circle. <em>Depth profiles</em> show how fractures change with depth.</div>
                    <div class="d-flex gap-2 mb-3">
                        <button class="btn btn-primary btn-sm" onclick="loadAllViz()">
                            <i class="bi bi-play-fill"></i> Generate All
                        </button>
                    </div>
                    <div class="row g-3">
                        <div class="col-lg-6">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <span><i class="bi bi-pie-chart"></i> Rose Diagram</span>
                                    <button class="btn btn-outline-primary btn-sm py-0 px-2" onclick="loadSingleViz('rose')">
                                        <i class="bi bi-arrow-clockwise"></i>
                                    </button>
                                </div>
                                <div class="card-body text-center" id="rose-container">
                                    <div class="viz-placeholder" id="rose-placeholder">
                                        <i class="bi bi-pie-chart" style="font-size:3rem;opacity:0.15"></i>
                                        <p class="small text-muted mt-2 mb-0">Shows fracture strike directions</p>
                                    </div>
                                    <img id="rose-img" class="plot-img d-none" alt="Rose Diagram">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <span><i class="bi bi-bullseye"></i> Stereonet</span>
                                    <button class="btn btn-outline-primary btn-sm py-0 px-2" onclick="loadSingleViz('stereonet')">
                                        <i class="bi bi-arrow-clockwise"></i>
                                    </button>
                                </div>
                                <div class="card-body text-center" id="stereonet-container">
                                    <div class="viz-placeholder" id="stereonet-placeholder">
                                        <i class="bi bi-bullseye" style="font-size:3rem;opacity:0.15"></i>
                                        <p class="small text-muted mt-2 mb-0">3D orientations on equal-area projection</p>
                                    </div>
                                    <img id="stereonet-img" class="plot-img d-none" alt="Stereonet">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <span><i class="bi bi-bar-chart"></i> Depth Profile</span>
                                    <button class="btn btn-outline-primary btn-sm py-0 px-2" onclick="loadSingleViz('depth')">
                                        <i class="bi bi-arrow-clockwise"></i>
                                    </button>
                                </div>
                                <div class="card-body text-center" id="depth-container">
                                    <div class="viz-placeholder" id="depth-placeholder">
                                        <i class="bi bi-bar-chart" style="font-size:3rem;opacity:0.15"></i>
                                        <p class="small text-muted mt-2 mb-0">Fracture distribution vs depth</p>
                                    </div>
                                    <img id="depth-img" class="plot-img d-none" alt="Depth Profile">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="card border-success">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <span><i class="bi bi-layers text-success"></i> Mud Weight Window <span class="badge bg-success ms-1" style="font-size:0.55rem">CORE DELIVERABLE</span></span>
                                    <button class="btn btn-outline-success btn-sm py-0 px-2" onclick="loadSingleViz('mww')">
                                        <i class="bi bi-arrow-clockwise"></i>
                                    </button>
                                </div>
                                <div class="card-body text-center" id="mww-container">
                                    <div class="viz-placeholder" id="mww-placeholder">
                                        <i class="bi bi-layers" style="font-size:3rem;opacity:0.15;color:var(--bs-success)"></i>
                                        <p class="small text-muted mt-2 mb-0">Safe drilling window: pore pressure → fracture gradient</p>
                                    </div>
                                    <img id="mww-img" class="plot-img d-none" alt="Mud Weight Window">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- INVERSION TAB (Enhanced) -->
                <div id="tab-inversion" class="tab-content">
                    <div class="alert alert-light border py-2 mb-3 small"><i class="bi bi-info-circle text-primary"></i> <strong>Stress Inversion</strong> &mdash; The core analysis: estimates underground stress magnitudes and directions from fracture orientations. <strong>Key output:</strong> SHmax (maximum horizontal stress direction) determines optimal drilling direction. The Mohr circle shows which fractures are close to failure.</div>
                    <div class="d-flex gap-2 mb-3 flex-wrap align-items-center">
                        <button class="btn btn-primary btn-sm" onclick="runInversion()">
                            <i class="bi bi-play-fill"></i> Run Inversion
                        </button>
                        <button class="btn btn-outline-secondary btn-sm" onclick="runAllRegimes()">
                            <i class="bi bi-arrow-repeat"></i> Compare All Regimes
                        </button>
                        <div class="btn-group btn-group-sm">
                            <button class="btn btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="bi bi-three-dots"></i> More
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#" onclick="runBayesian();return false"><i class="bi bi-distribute-vertical me-2"></i>Bayesian Uncertainty</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="#" onclick="exportInversion();return false"><i class="bi bi-download me-2"></i>Export Results (CSV)</a></li>
                                <li><a class="dropdown-item" href="#" onclick="exportData();return false"><i class="bi bi-filetype-csv me-2"></i>Export Raw Data</a></li>
                            </ul>
                        </div>
                    </div>

                    <!-- Empty state (shown until analysis is run) -->
                    <div id="inversion-empty" class="empty-state">
                        <i class="bi bi-gear-wide-connected"></i>
                        <h5>Ready to Analyze</h5>
                        <p>Click <strong>Run Inversion</strong> to estimate the stress tensor from your fracture data. The system will determine stress magnitudes, SHmax direction, and identify critically stressed fractures.</p>
                    </div>

                    <!-- Auto Regime Detection Banner -->
                    <div id="auto-regime-banner" class="d-none mb-4">
                        <div class="card border-success">
                            <div class="card-header bg-success bg-opacity-10">
                                <i class="bi bi-robot"></i> Automatic Regime Detection
                                <span class="badge ms-2" id="auto-regime-confidence"></span>
                            </div>
                            <div class="card-body">
                                <p id="auto-regime-summary" class="mb-3"></p>
                                <div class="table-responsive">
                                    <table class="table table-sm table-striped mb-0" id="auto-regime-table">
                                        <thead><tr>
                                            <th>Regime</th><th>Misfit</th>
                                            <th>&sigma;1</th><th>&sigma;3</th>
                                            <th>R</th><th>SHmax</th><th>&mu;</th>
                                            <th></th>
                                        </tr></thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Bayesian MCMC Results -->
                    <div id="bayesian-results" class="d-none mb-4">
                        <div class="card border-info">
                            <div class="card-header bg-info bg-opacity-10">
                                <i class="bi bi-distribute-vertical"></i> Bayesian MCMC Uncertainty Bounds
                                <span class="badge bg-info ms-2" id="bayes-convergence"></span>
                            </div>
                            <div class="card-body">
                                <p class="small text-muted" id="bayes-summary"></p>
                                <div id="bayes-params-body"></div>
                                <div class="mt-2 small text-muted" id="bayes-meta"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Results metrics -->
                    <div id="inversion-results" class="d-none">
                        <!-- Stakeholder Brief — plain-English decision summary -->
                        <div id="inv-brief" class="d-none mb-4"></div>
                        <div class="mb-2"><span id="inv-quality-badge" class="badge bg-secondary">Data: --</span> <span id="inv-ci-hint" class="badge bg-light text-muted border small">Point estimates &mdash; click <em>Bayesian Uncertainty</em> for &plusmn;error bars</span></div>
                        <div class="row g-3 mb-4">
                            <div class="col-md-2"><div class="metric-card"><div class="metric-label">&sigma;1 (MPa) <i class="bi bi-info-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Maximum principal stress. The largest compressive stress in the rock mass. Higher values indicate deeper or more compressed rock."></i></div><div class="metric-value" id="inv-sigma1">--</div></div></div>
                            <div class="col-md-2"><div class="metric-card"><div class="metric-label">&sigma;2 (MPa) <i class="bi bi-info-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Intermediate principal stress. Derived from &sigma;1, &sigma;3, and R ratio."></i></div><div class="metric-value" id="inv-sigma2">--</div></div></div>
                            <div class="col-md-2"><div class="metric-card"><div class="metric-label">&sigma;3 (MPa) <i class="bi bi-info-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Minimum principal stress. The least compressive stress. Fractures tend to open perpendicular to this direction."></i></div><div class="metric-value" id="inv-sigma3">--</div></div></div>
                            <div class="col-md-2"><div class="metric-card"><div class="metric-label">R Ratio <i class="bi bi-info-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Stress shape ratio: (&sigma;2-&sigma;3)/(&sigma;1-&sigma;3). Range 0-1. R near 0 means &sigma;2&asymp;&sigma;3 (prolate stress); R near 1 means &sigma;1&asymp;&sigma;2 (oblate stress)."></i></div><div class="metric-value" id="inv-R">--</div></div></div>
                            <div class="col-md-2"><div class="metric-card"><div class="metric-label">SHmax (&deg;) <i class="bi bi-info-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Maximum horizontal stress direction (degrees from North). CRITICAL FOR DRILLING: Wells drilled parallel to SHmax are most stable. Hydraulic fractures propagate along SHmax."></i></div><div class="metric-value" id="inv-shmax">--</div></div></div>
                            <div class="col-md-2"><div class="metric-card"><div class="metric-label">Pore Pressure <i class="bi bi-info-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Fluid pressure in rock pores (MPa). Reduces effective normal stress on fractures, making them more likely to slip. Higher Pp = more critically stressed fractures."></i></div><div class="metric-value" id="inv-pp">--</div></div></div>
                        </div>

                        <!-- Uncertainty Confidence Intervals -->
                        <div id="inv-uncertainty" class="d-none mb-4"></div>

                        <!-- WSM Quality Ranking -->
                        <div id="inv-wsm-quality" class="d-none mb-4"></div>

                        <!-- Calibration Warning -->
                        <div id="inv-calibration-warning" class="d-none mb-4"></div>

                        <!-- Multi-Criteria CS% -->
                        <div id="inv-multi-criteria" class="d-none mb-4"></div>

                        <!-- Mud Weight Window -->
                        <div id="inv-mud-weight" class="d-none mb-4"></div>

                        <!-- 1D Stress Profile -->
                        <div id="inv-stress-profile" class="d-none mb-4">
                            <div class="card">
                                <div class="card-header bg-dark text-white">
                                    <i class="bi bi-bar-chart"></i> 1D Stress Profile (Mechanical Earth Model)
                                    <button class="btn btn-sm btn-outline-light float-end" id="btn-load-stress-profile" onclick="loadStressProfile()">
                                        <i class="bi bi-arrow-clockwise"></i> Generate Profile
                                    </button>
                                </div>
                                <div class="card-body">
                                    <p class="text-muted small mb-2">Depth-varying principal stresses: Sv (overburden), SHmax, Shmin, Pp (pore pressure). Standard geomechanics deliverable for drilling engineers.</p>
                                    <div id="stress-profile-content" class="text-center">
                                        <p class="text-muted">Click "Generate Profile" to compute the 1D stress model.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Risk Assessment Banner -->
                        <div id="risk-banner" class="alert mb-4 d-none">
                            <h5 class="alert-heading" id="risk-title"></h5>
                            <div id="risk-body"></div>
                        </div>

                        <!-- Stakeholder Interpretation -->
                        <div id="interpretation-section" class="mb-4 d-none">
                            <div class="card border-primary">
                                <div class="card-header bg-primary text-white">
                                    <i class="bi bi-lightbulb"></i> Decision Support - What This Means
                                </div>
                                <div class="card-body" id="interpretation-body"></div>
                            </div>
                        </div>

                        <!-- Risk Categories -->
                        <div class="row g-3 mb-4">
                            <div class="col-md-4">
                                <div class="metric-card" style="border-left:4px solid #dc3545">
                                    <div class="metric-label">High Risk Fractures <i class="bi bi-info-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Fractures with slip tendency > 0.8. These are very close to failure and may reactivate during drilling or injection. Avoid operations near these fractures."></i></div>
                                    <div class="metric-value text-danger" id="inv-high-risk">--</div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="metric-card" style="border-left:4px solid #ffc107">
                                    <div class="metric-label">Moderate Risk <i class="bi bi-info-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Fractures with slip tendency 0.6-0.8. These could be reactivated under pressure changes. Monitor during operations and plan contingencies."></i></div>
                                    <div class="metric-value text-warning" id="inv-mod-risk">--</div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="metric-card" style="border-left:4px solid #198754">
                                    <div class="metric-label">Low Risk <i class="bi bi-info-circle text-muted" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Fractures with slip tendency < 0.6. These are relatively stable under current stress conditions. Normal operations are safe."></i></div>
                                    <div class="metric-value text-success" id="inv-low-risk">--</div>
                                </div>
                            </div>
                        </div>

                        <!-- Actionable Recommendations -->
                        <div id="inv-recommendations" class="d-none mb-3"></div>

                        <!-- Temperature Correction (2025 Research) -->
                        <div id="inv-thermal" class="d-none mb-3"></div>

                        <div class="row g-3">
                            <div class="col-lg-6">
                                <div class="card"><div class="card-header">Mohr Circle</div>
                                <div class="card-body text-center"><img id="mohr-img" class="plot-img"></div></div>
                            </div>
                            <div class="col-lg-6">
                                <div class="card"><div class="card-header">Slip Tendency</div>
                                <div class="card-body text-center"><img id="slip-img" class="plot-img"></div></div>
                            </div>
                            <div class="col-lg-6">
                                <div class="card"><div class="card-header">Dilation Tendency</div>
                                <div class="card-body text-center"><img id="dilation-img" class="plot-img"></div></div>
                            </div>
                            <div class="col-lg-6">
                                <div class="card"><div class="card-header">Analysis Dashboard</div>
                                <div class="card-body text-center"><img id="dashboard-img" class="plot-img"></div></div>
                            </div>
                        </div>
                    </div>

                    <!-- Regime comparison table -->
                    <div id="regime-comparison" class="d-none mt-4">
                        <div class="card">
                            <div class="card-header">Regime Comparison</div>
                            <div class="card-body p-0">
                                <table class="table table-striped mb-0" id="regime-table">
                                    <thead><tr>
                                        <th>Regime</th><th>&sigma;1</th><th>&sigma;2</th><th>&sigma;3</th>
                                        <th>R</th><th>SHmax</th><th>&mu;</th><th>Crit. Stressed</th>
                                    </tr></thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Pore Pressure Coupling -->
                    <div class="card border-danger mb-3">
                        <div class="card-header bg-danger bg-opacity-10 py-2">
                            <i class="bi bi-droplet-half"></i> <strong>Pore Pressure Coupling</strong>
                            <small class="text-muted ms-2">Formation integrity at varying pressures</small>
                        </div>
                        <div class="card-body py-2">
                            <p class="text-muted small mb-2">
                                Sweeps pore pressure from 0.3&ndash;0.6 &times; Sv to show how CS% and formation integrity change.
                                Critical for wellbore stability and mud weight decisions.
                            </p>
                            <button class="btn btn-danger btn-sm" onclick="runPorePressureCoupling()">
                                <i class="bi bi-droplet-half"></i> Run Pp Coupling Analysis
                            </button>
                            <div id="pp-results" class="d-none mt-2">
                                <div id="pp-brief" class="mb-2"></div>
                                <div class="row g-2 mb-2">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Current CS%</div><div class="metric-value" id="pp-current-cs">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">FIF Grade</div><div class="metric-value" id="pp-fif-grade">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Sensitivity</div><div class="metric-value" id="pp-sensitivity">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Sv (MPa)</div><div class="metric-value" id="pp-sv">--</div></div></div>
                                </div>
                                <div class="text-center mb-2" id="pp-plot-img"></div>
                                <div class="card">
                                    <div class="card-header py-1"><i class="bi bi-table"></i> Pore Pressure Sweep</div>
                                    <div class="card-body p-0" style="max-height:300px;overflow-y:auto">
                                        <table class="table table-sm table-hover mb-0">
                                            <thead class="table-light sticky-top"><tr><th>Pp/Sv</th><th>Pp (MPa)</th><th>CS%</th><th>FIF</th><th>Grade</th><th>&sigma;1_eff</th><th>&sigma;3_eff</th></tr></thead>
                                            <tbody id="pp-table-body"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- MODEL COMPARISON TAB (NEW) -->
                <div id="tab-models" class="tab-content">
                    <div class="d-flex gap-2 mb-3">
                        <button class="btn btn-primary btn-sm" onclick="runModelComparison(false)">
                            <i class="bi bi-play-fill"></i> Full Comparison
                        </button>
                        <button class="btn btn-outline-primary btn-sm" onclick="runModelComparison(true)">
                            <i class="bi bi-lightning"></i> Quick Compare (~3x faster)
                        </button>
                    </div>
                    <div class="alert alert-light border py-2 mb-3 small"><i class="bi bi-info-circle text-primary"></i> <strong>Model Comparison</strong> &mdash; Runs 7 different AI algorithms on the same data and ranks them by accuracy. The best model is recommended automatically. <em>Why multiple models?</em> Different algorithms capture different patterns &mdash; comparing ensures the most reliable one is chosen for your specific data.</div>

                    <div id="model-results" class="d-none">
                        <!-- Stakeholder Brief -->
                        <div id="mc-brief" class="d-none mb-4"></div>
                        <!-- Ranking criterion notice -->
                        <div id="mc-ranking-notice" class="d-none alert alert-info py-2 mb-3 small"></div>
                        <!-- Summary metrics -->
                        <div class="row g-3 mb-4">
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-label">Best Model</div>
                                    <div class="metric-value" id="mc-best-model">--</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-label">Best Accuracy</div>
                                    <div class="metric-value" id="mc-best-acc">--</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-label">Model Agreement</div>
                                    <div class="metric-value" id="mc-agreement">--</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="metric-card" style="border-left:4px solid #ffc107">
                                    <div class="metric-label">Low Confidence Samples</div>
                                    <div class="metric-value" id="mc-low-conf">--</div>
                                </div>
                            </div>
                        </div>

                        <!-- Model agreement explanation -->
                        <div id="mc-uncertainty-alert" class="alert alert-info mb-4 d-none">
                            <i class="bi bi-info-circle"></i>
                            <strong>What does Model Agreement mean?</strong>
                            <span id="mc-uncertainty-text"></span>
                        </div>

                        <!-- Ranking table -->
                        <div class="card mb-4">
                            <div class="card-header">Model Ranking (by Cross-Validated Accuracy)</div>
                            <div class="card-body p-0">
                                <table class="table table-striped mb-0" id="mc-ranking-table">
                                    <thead><tr>
                                        <th>Rank</th><th>Model</th><th>CV Accuracy</th><th>Balanced Acc.</th><th>F1 Score</th><th>Overfit Gap</th>
                                    </tr></thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Conformal confidence -->
                        <div id="mc-conformal-section" class="d-none mb-4">
                            <div class="card border-info">
                                <div class="card-header bg-info text-white">
                                    <i class="bi bi-shield-check"></i> Prediction Confidence (Conformal Calibration)
                                </div>
                                <div class="card-body">
                                    <div class="row g-3">
                                        <div class="col-md-3">
                                            <div class="text-center p-2 bg-light rounded">
                                                <div class="small text-muted">Mean Confidence</div>
                                                <div class="fw-bold fs-5" id="mc-conf-mean">--</div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="text-center p-2 bg-light rounded">
                                                <div class="small text-muted">High Confidence (&ge;80%)</div>
                                                <div class="fw-bold fs-5 text-success" id="mc-conf-high">--</div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="text-center p-2 bg-light rounded">
                                                <div class="small text-muted">Uncertain (&lt;50%)</div>
                                                <div class="fw-bold fs-5 text-danger" id="mc-conf-uncertain">--</div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="text-center p-2 bg-light rounded">
                                                <div class="small text-muted">Min Confidence</div>
                                                <div class="fw-bold fs-5" id="mc-conf-min">--</div>
                                            </div>
                                        </div>
                                    </div>
                                    <p class="small text-muted mt-2 mb-0">
                                        <strong>What this means:</strong> Conformal prediction provides calibrated confidence scores.
                                        Fractures with &lt;50% confidence should be reviewed by an expert before operational decisions.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Generalization Assessment -->
                        <div id="mc-generalization" class="d-none mb-4">
                            <div class="card border-warning">
                                <div class="card-header bg-warning bg-opacity-10">
                                    <i class="bi bi-clipboard-check"></i> Generalization Assessment
                                </div>
                                <div class="card-body">
                                    <div class="row g-3 mb-3">
                                        <div class="col-md-4">
                                            <div class="text-center p-2 bg-light rounded">
                                                <div class="small text-muted">Train-Test Gap</div>
                                                <div class="fw-bold fs-5" id="mc-gen-gap">--</div>
                                                <div class="small text-muted">&lt;5% is good</div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="text-center p-2 bg-light rounded">
                                                <div class="small text-muted">CV Stability (std)</div>
                                                <div class="fw-bold fs-5" id="mc-gen-stability">--</div>
                                                <div class="small text-muted">&lt;5% is stable</div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="text-center p-2 bg-light rounded">
                                                <div class="small text-muted">Min Class Size</div>
                                                <div class="fw-bold fs-5" id="mc-gen-min-class">--</div>
                                                <div class="small text-muted">&ge;30 for reliable metrics</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="mc-gen-warnings"></div>
                                </div>
                            </div>
                        </div>

                        <!-- SMOTE Info -->
                        <div id="mc-smote-info" class="d-none alert alert-info py-2 mb-3 small"></div>

                        <!-- Model Comparison Chart -->
                        <div id="mc-chart-container" class="d-none card mb-4">
                            <div class="card-header"><i class="bi bi-bar-chart-fill"></i> Accuracy Comparison Chart</div>
                            <div class="card-body text-center">
                                <img id="mc-chart-img" class="plot-img" src="" alt="Model comparison chart">
                            </div>
                        </div>

                        <!-- Per-model details -->
                        <div id="mc-details-container"></div>
                    </div>

                    <!-- Learning Curve -->
                    <div class="card mt-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-graph-up"></i> Learning Curve — Do We Need More Data?</span>
                            <button class="btn btn-outline-primary btn-sm" onclick="runLearningCurve()">
                                <i class="bi bi-play-fill"></i> Compute
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Shows how model accuracy changes with training set size. If the curve has plateaued, more data of the same type won't help — you need better features or different data sources.</p>
                            <div id="lc-results" class="d-none">
                                <div class="row g-3 mb-3">
                                    <div class="col-md-4">
                                        <div class="metric-card">
                                            <div class="metric-label">Convergence</div>
                                            <div class="metric-value" id="lc-convergence">--</div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="metric-card">
                                            <div class="metric-label">Current Accuracy</div>
                                            <div class="metric-value" id="lc-current-acc">--</div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="metric-card">
                                            <div class="metric-label">Total Samples</div>
                                            <div class="metric-value" id="lc-n-samples">--</div>
                                        </div>
                                    </div>
                                </div>
                                <div id="lc-convergence-msg" class="alert alert-info small mb-3"></div>
                                <div id="lc-chart-container" class="d-none text-center mb-3">
                                    <img id="lc-chart-img" class="plot-img" src="" alt="Learning curve chart">
                                </div>
                                <div class="card mb-3">
                                    <div class="card-header">Accuracy vs Training Size</div>
                                    <div class="card-body p-0">
                                        <table class="table table-sm mb-0" id="lc-table">
                                            <thead><tr><th>Samples</th><th>Train Acc</th><th>Val Acc</th><th>Balanced Acc</th></tr></thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>
                                </div>
                                <div id="lc-projections" class="d-none">
                                    <h6>Data Projections</h6>
                                    <div id="lc-projection-list"></div>
                                </div>
                                <div id="lc-per-class" class="d-none">
                                    <h6>Per-Class F1 vs Training Size</h6>
                                    <table class="table table-sm" id="lc-class-table">
                                        <thead><tr id="lc-class-header"></tr></thead>
                                        <tbody id="lc-class-body"></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Hierarchical Classification -->
                    <div class="card mt-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-diagram-3"></i> Hierarchical Classification — Better Rare-Type Detection</span>
                            <button class="btn btn-outline-primary btn-sm" onclick="runHierarchical()">
                                <i class="bi bi-play-fill"></i> Run
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Two-level approach: first detects rare vs common fracture types, then sub-classifies. This helps when some fracture types have very few samples (e.g., Boundary: 13 samples).</p>
                            <div id="hier-results" class="d-none">
                                <div id="hier-recommendation" class="alert mb-3"></div>
                                <div class="row g-3 mb-3">
                                    <div class="col-md-3">
                                        <div class="metric-card">
                                            <div class="metric-label">Approach</div>
                                            <div class="metric-value" id="hier-approach" style="font-size:1rem">--</div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="metric-card">
                                            <div class="metric-label">Flat Balanced Acc</div>
                                            <div class="metric-value" id="hier-flat-bal">--</div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="metric-card">
                                            <div class="metric-label">Hierarchical Balanced Acc</div>
                                            <div class="metric-value" id="hier-hier-bal">--</div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="metric-card">
                                            <div class="metric-label">L1 (Rare/Common) Acc</div>
                                            <div class="metric-value" id="hier-l1-acc">--</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card mb-3">
                                    <div class="card-header">Per-Class F1 Comparison</div>
                                    <div class="card-body p-0">
                                        <table class="table table-sm mb-0" id="hier-class-table">
                                            <thead><tr>
                                                <th>Class</th><th>Samples</th><th>Type</th><th>Flat F1</th><th>Hierarchical F1</th><th>Change</th>
                                            </tr></thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Depth-Zone Classification -->
                    <div class="card mt-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-layers"></i> Depth-Zone Classification — Depth-Specific Models</span>
                            <button class="btn btn-outline-primary btn-sm" onclick="runDepthZoneClassify()">
                                <i class="bi bi-play-fill"></i> Run
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Fracture behavior changes with depth (different stress regimes). Trains separate models per depth zone and compares to the global model. May improve accuracy for depth-variable datasets.</p>
                            <div id="depthzone-results" class="d-none"></div>
                        </div>
                    </div>

                    <!-- Bootstrap Confidence Intervals -->
                    <div class="card mt-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-bar-chart-steps"></i> Confidence Intervals — How Reliable Are Predictions?</span>
                            <button class="btn btn-outline-primary btn-sm" onclick="runBootstrapCI()">
                                <i class="bi bi-play-fill"></i> Compute 95% CI
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Bootstrap resampling (200x) to compute 95% confidence intervals for per-class metrics. Industrial-grade: "F1 = 0.85 [0.78 - 0.91]" instead of just "F1 = 0.85".</p>
                            <div id="ci-results" class="d-none">
                                <div class="row g-3 mb-3">
                                    <div class="col-md-3">
                                        <div class="metric-card">
                                            <div class="metric-label">Reliability</div>
                                            <div class="metric-value" id="ci-reliability">--</div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="metric-card">
                                            <div class="metric-label">Accuracy</div>
                                            <div class="metric-value" id="ci-accuracy">--</div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="metric-card">
                                            <div class="metric-label">Accuracy CI</div>
                                            <div class="metric-value" id="ci-accuracy-range">--</div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="metric-card">
                                            <div class="metric-label">Bootstraps</div>
                                            <div class="metric-value" id="ci-n-boot">--</div>
                                        </div>
                                    </div>
                                </div>
                                <div id="ci-reliability-msg" class="alert mb-3 small"></div>
                                <div id="ci-chart-container" class="d-none text-center mb-3">
                                    <img id="ci-chart-img" class="plot-img" src="" alt="Bootstrap CI chart">
                                </div>
                                <div class="card">
                                    <div class="card-header">Per-Class 95% Confidence Intervals</div>
                                    <div class="card-body p-0">
                                        <table class="table table-sm mb-0" id="ci-class-table">
                                            <thead><tr>
                                                <th>Class</th><th>F1</th><th>F1 CI</th><th>Precision</th><th>Precision CI</th><th>Recall</th><th>Recall CI</th>
                                            </tr></thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SHAP EXPLAINABILITY TAB (NEW) -->
                <div id="tab-shap" class="tab-content">
                    <div class="alert alert-light border py-2 mb-3 small"><i class="bi bi-info-circle text-primary"></i> <strong>Why It Predicts</strong> &mdash; Shows which fracture features (depth, angle, orientation) most influence the AI classification. SHAP values reveal the &ldquo;reasoning&rdquo; behind each prediction &mdash; critical for trusting AI decisions in operations.</div>
                    <div class="d-flex gap-2 mb-3">
                        <select id="shap-classifier-select" class="form-select form-select-sm" style="width:auto">
                            <option value="gradient_boosting" selected>Gradient Boosting</option>
                            <option value="random_forest">Random Forest</option>
                            <option value="xgboost">XGBoost</option>
                            <option value="lightgbm">LightGBM</option>
                        </select>
                        <button class="btn btn-primary btn-sm" onclick="runShapExplanation()">
                            <i class="bi bi-play-fill"></i> Explain Predictions
                        </button>
                    </div>
                    <p class="text-muted small">
                        Uses SHAP (SHapley Additive exPlanations) to show <strong>why</strong> the model makes its predictions.
                        Each feature gets an importance score based on its actual contribution, not just correlation.
                        This helps stakeholders understand and trust the AI's fracture classifications.
                    </p>

                    <div id="shap-results" class="d-none">
                        <!-- SHAP summary metrics -->
                        <div class="row g-3 mb-4">
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-label">Explanation Method</div>
                                    <div class="metric-value" id="shap-method">--</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-label">Model Used</div>
                                    <div class="metric-value" id="shap-model">--</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-label">Features Analyzed</div>
                                    <div class="metric-value" id="shap-n-features">--</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-label">Samples Explained</div>
                                    <div class="metric-value" id="shap-n-samples">--</div>
                                </div>
                            </div>
                        </div>

                        <!-- Global feature importance -->
                        <div class="row g-3 mb-4">
                            <div class="col-lg-7">
                                <div class="card">
                                    <div class="card-header">
                                        <i class="bi bi-bar-chart"></i> Global Feature Importance (What Drives Predictions Most)
                                    </div>
                                    <div class="card-body" id="shap-global-container"></div>
                                </div>
                            </div>
                            <div class="col-lg-5">
                                <div class="card">
                                    <div class="card-header">
                                        <i class="bi bi-info-circle"></i> What This Means for Decisions
                                    </div>
                                    <div class="card-body" id="shap-explanation-text">
                                        <p class="text-muted">Run the explanation to see feature importance insights.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Per-class importance -->
                        <div id="shap-class-section" class="d-none mb-4">
                            <div class="card">
                                <div class="card-header">
                                    <i class="bi bi-diagram-3"></i> What Drives Each Fracture Type Classification
                                </div>
                                <div class="card-body" id="shap-class-container"></div>
                            </div>
                        </div>

                        <!-- Sample explanations -->
                        <div id="shap-sample-section" class="d-none">
                            <div class="card">
                                <div class="card-header">
                                    <i class="bi bi-search"></i> Individual Fracture Explanations (Most Distinctive Samples)
                                </div>
                                <div class="card-body" id="shap-sample-container"></div>
                            </div>
                        </div>

                        <!-- SHAP Visualization Plots (Server-rendered) -->
                        <div id="shap-plots-section" class="d-none mt-4">
                            <h5 class="mb-3"><i class="bi bi-graph-up"></i> SHAP Visualization Plots</h5>
                            <div class="row g-3 mb-3">
                                <div class="col-12">
                                    <div class="card">
                                        <div class="card-header bg-dark text-white"><i class="bi bi-bar-chart-fill"></i> Global Feature Importance (SHAP)</div>
                                        <div class="card-body text-center" id="shap-global-plot-img"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="row g-3 mb-3">
                                <div class="col-lg-6">
                                    <div class="card">
                                        <div class="card-header"><i class="bi bi-funnel"></i> Waterfall: Most Uncertain Prediction</div>
                                        <div class="card-body text-center" id="shap-waterfall-plot-img"></div>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="card">
                                        <div class="card-header"><i class="bi bi-scatter-chart"></i> Feature Value vs SHAP Impact</div>
                                        <div class="card-body text-center" id="shap-scatter-plot-img"></div>
                                    </div>
                                </div>
                            </div>
                            <div id="shap-per-class-plots" class="row g-3 mb-3"></div>
                            <div id="shap-plots-brief"></div>
                        </div>
                    </div>
                </div>

                <!-- CLASSIFICATION TAB (Enhanced) -->
                <div id="tab-classify" class="tab-content">
                    <div class="alert alert-light border py-2 mb-3 small"><i class="bi bi-info-circle text-primary"></i> <strong>ML Classification</strong> &mdash; Uses machine learning to automatically categorize fractures by type (e.g., continuous, discontinuous, brecciated). Accuracy metrics show how reliable the classification is. Conformal prediction adds calibrated confidence intervals.</div>
                    <div class="d-flex gap-2 mb-3 align-items-center">
                        <select id="classifier-select" class="form-select form-select-sm" style="width:auto">
                            <option value="random_forest">Random Forest</option>
                            <option value="gradient_boosting">Gradient Boosting</option>
                            <option value="xgboost">XGBoost</option>
                            <option value="lightgbm">LightGBM</option>
                            <option value="catboost">CatBoost</option>
                            <option value="svm">SVM</option>
                            <option value="mlp">Neural Network</option>
                        </select>
                        <button class="btn btn-primary btn-sm" onclick="runClassification()">
                            <i class="bi bi-play-fill"></i> Run Classification
                        </button>
                        <div class="btn-group btn-group-sm">
                            <button class="btn btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="bi bi-three-dots"></i> Advanced
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#" onclick="runDeepEnsemble();return false"><i class="bi bi-layers-fill me-2"></i>Deep Ensemble UQ</a></li>
                                <li><a class="dropdown-item" href="#" onclick="runTransferLearning();return false"><i class="bi bi-arrow-left-right me-2"></i>Transfer Learning</a></li>
                            </ul>
                        </div>
                    </div>
                    <p class="text-muted small">Uses enhanced physics-informed features including pore pressure, overburden stress, temperature, fracture density, and fabric strength.</p>

                    <!-- Deep Ensemble UQ Results -->
                    <div id="ensemble-results" class="d-none mb-3"></div>

                    <!-- Transfer Learning Results -->
                    <div id="transfer-results" class="d-none mb-3"></div>

                    <!-- Advanced ML Analysis — Collapsible Accordion -->
                    <div class="accordion drilling-accordion mb-3" id="classify-accordion">
                        <!-- Group 1: Ensemble & Evaluation -->
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed py-2" type="button" data-bs-toggle="collapse" data-bs-target="#cls-group-evaluation">
                                    <i class="bi bi-bar-chart-line me-2"></i> Model Evaluation & Ensemble <span class="badge bg-secondary ms-2">4</span>
                                </button>
                            </h2>
                            <div id="cls-group-evaluation" class="accordion-collapse collapse" data-bs-parent="#classify-accordion">
                                <div class="accordion-body p-2">

                    <!-- Heterogeneous Ensemble (moved to group 1) -->
                    <div class="card border-dark mb-3">
                        <div class="card-header bg-dark bg-opacity-75 text-white py-2">
                            <i class="bi bi-stack"></i> <strong>Heterogeneous Ensemble</strong>
                            <small class="opacity-75 ms-2">RF + GBM + SVM + LR + MLP meta-learner</small>
                        </div>
                        <div class="card-body py-2">
                            <p class="text-muted small mb-2">
                                Trains 5 diverse model families and combines them via a meta-learner.
                                Reports ensemble accuracy, per-model contributions, and prediction confidence from model agreement.
                            </p>
                            <button class="btn btn-dark btn-sm" onclick="runHeteroEnsemble()">
                                <i class="bi bi-stack"></i> Build Ensemble
                            </button>
                            <div id="he-results" class="d-none mt-2">
                                <div id="he-brief" class="mb-2"></div>
                                <div class="row g-2 mb-2">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Ensemble Acc</div><div class="metric-value" id="he-acc">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">vs Best Single</div><div class="metric-value" id="he-improvement">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Agreement</div><div class="metric-value" id="he-agreement">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Contested</div><div class="metric-value" id="he-contested">--</div></div></div>
                                </div>
                                <div class="text-center mb-2" id="he-plot-img"></div>
                                <div class="row g-2">
                                    <div class="col-md-6">
                                        <div class="card"><div class="card-header py-1"><i class="bi bi-bar-chart"></i> Base Model Accuracies</div>
                                            <div class="card-body p-0"><table class="table table-sm table-hover mb-0">
                                                <thead class="table-light"><tr><th>Model</th><th>CV Accuracy</th><th>Contribution</th></tr></thead>
                                                <tbody id="he-models-body"></tbody>
                                            </table></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Model Significance Testing (moved to group 1) -->
                    <div class="card border-dark mb-3">
                        <div class="card-header bg-dark text-white py-2">
                            <i class="bi bi-graph-up-arrow"></i> <strong>Model Significance Testing</strong>
                            <small class="text-white-50 ms-2">Are differences between models real?</small>
                        </div>
                        <div class="card-body py-2">
                            <p class="text-muted small mb-2">
                                Runs all classifiers and performs pairwise McNemar's test to determine if accuracy
                                differences are statistically significant (p&lt;0.05). Prevents over-reading noise.
                            </p>
                            <button class="btn btn-dark btn-sm" onclick="runModelSignificance()">
                                <i class="bi bi-calculator"></i> Run Significance Test
                            </button>
                            <div id="msig-results" class="d-none mt-2">
                                <div class="row g-2 mb-2">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Best Model</div><div class="metric-value" id="msig-best">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Accuracy</div><div class="metric-value" id="msig-acc">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Sig. Better Than</div><div class="metric-value" id="msig-sig-count">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Models Tested</div><div class="metric-value" id="msig-n-models">--</div></div></div>
                                </div>
                                <div class="alert alert-light border small" id="msig-verdict"></div>
                                <div class="table-responsive mb-2">
                                    <table class="table table-sm table-hover">
                                        <thead class="table-light"><tr><th>Rank</th><th>Model</th><th>Accuracy</th><th>F1</th><th>Balanced Acc</th><th>Time (s)</th></tr></thead>
                                        <tbody id="msig-table-body"></tbody>
                                    </table>
                                </div>
                                <div class="text-center"><img id="msig-plot" class="img-fluid" style="max-width:800px" /></div>
                            </div>
                        </div>
                    </div>

                    <!-- Balanced Classification -->
                    <div class="card border-success mb-3">
                        <div class="card-header bg-success bg-opacity-10 py-2">
                            <i class="bi bi-balance-scale"></i> <strong>Class-Balanced Classification</strong>
                            <small class="text-muted ms-2">SMOTE oversampling for minority fracture types</small>
                        </div>
                        <div class="card-body py-2">
                            <p class="text-muted small mb-2">
                                Compares 4 training strategies to fix poor recall on minority classes (Boundary, Continuous).
                                SMOTE generates synthetic samples; balanced weights penalize majority-class errors.
                            </p>
                            <div class="d-flex gap-2 mb-2">
                                <button class="btn btn-success btn-sm" onclick="runBalancedClassify()">
                                    <i class="bi bi-play-fill"></i> Run Balanced Comparison
                                </button>
                            </div>
                            <div id="bc-results" class="d-none">
                                <div id="bc-brief" class="mb-2"></div>
                                <div class="row g-2 mb-2">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Best Method</div><div class="metric-value" id="bc-best-method">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Best Bal.Acc</div><div class="metric-value" id="bc-best-balacc">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Samples</div><div class="metric-value" id="bc-samples">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">SMOTE?</div><div class="metric-value" id="bc-has-smote">--</div></div></div>
                                </div>
                                <div class="text-center mb-2" id="bc-plot-img"></div>
                                <div class="card mb-2">
                                    <div class="card-header py-1"><i class="bi bi-table"></i> Method Comparison</div>
                                    <div class="card-body p-0">
                                        <table class="table table-sm table-hover mb-0">
                                            <thead class="table-light"><tr><th>Method</th><th>Accuracy</th><th>Balanced Acc</th><th>F1</th></tr></thead>
                                            <tbody id="bc-methods-body"></tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="card">
                                    <div class="card-header py-1"><i class="bi bi-graph-up-arrow"></i> Minority Class Improvements</div>
                                    <div class="card-body p-0">
                                        <table class="table table-sm table-hover mb-0">
                                            <thead class="table-light"><tr><th>Class</th><th>Count</th><th>Baseline Recall</th><th>Best Recall</th><th>Improvement</th></tr></thead>
                                            <tbody id="bc-minority-body"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Conformal Prediction -->
                    <div class="card border-success mb-3">
                        <div class="card-header bg-success bg-opacity-10 py-2">
                            <i class="bi bi-shield-check"></i> <strong>Conformal Prediction (Uncertainty-Aware)</strong>
                            <small class="text-muted ms-2">How confident is each prediction?</small>
                        </div>
                        <div class="card-body py-2">
                            <p class="text-muted small mb-2">
                                Instead of a single class label, returns a SET of possible classes with guaranteed coverage.
                                Smaller sets = higher confidence. Singleton predictions are unambiguous.
                            </p>
                            <button class="btn btn-success btn-sm" onclick="runConformalPredict()">
                                <i class="bi bi-shield-check"></i> Run Conformal Analysis
                            </button>
                            <div id="cf-results" class="d-none mt-2">
                                <div class="row g-2 mb-2">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Coverage</div><div class="metric-value" id="cf-coverage">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Avg Set Size</div><div class="metric-value" id="cf-avg-size">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Singleton %</div><div class="metric-value" id="cf-singleton">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Confidence</div><div class="metric-value" id="cf-risk">--</div></div></div>
                                </div>
                                <div class="alert alert-light border small" id="cf-brief"></div>
                                <h6>Per-Class Confidence</h6>
                                <div class="table-responsive mb-2">
                                    <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Class</th><th>Count</th><th>Avg Set Size</th><th>Singleton %</th><th>Coverage</th><th>Confidence</th></tr></thead><tbody id="cf-class-body"></tbody></table>
                                </div>
                                <h6>Most Uncertain Predictions</h6>
                                <div class="table-responsive mb-2">
                                    <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Depth (m)</th><th>True Class</th><th>Prediction Set</th><th>Set Size</th><th>Max Prob</th></tr></thead><tbody id="cf-uncertain-body"></tbody></table>
                                </div>
                                <div class="text-center"><img id="cf-plot" class="img-fluid" style="max-width:800px" /></div>
                            </div>
                        </div>
                    </div>

                                </div>
                            </div>
                        </div>

                        <!-- Group 2: Feature Engineering & Optimization -->
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed py-2" type="button" data-bs-toggle="collapse" data-bs-target="#cls-group-features">
                                    <i class="bi bi-sliders2 me-2"></i> Feature Engineering & Tuning <span class="badge bg-secondary ms-2">2</span>
                                </button>
                            </h2>
                            <div id="cls-group-features" class="accordion-collapse collapse" data-bs-parent="#classify-accordion">
                                <div class="accordion-body p-2">

                    <!-- Feature Ablation Study -->
                    <div class="card border-warning mb-3">
                        <div class="card-header bg-warning bg-opacity-10 py-2">
                            <i class="bi bi-scissors"></i> <strong>Feature Ablation Study</strong>
                            <small class="text-muted ms-2">Which features matter most?</small>
                        </div>
                        <div class="card-body py-2">
                            <p class="text-muted small mb-2">
                                Systematically removes feature groups to measure accuracy impact.
                                Groups with large drops are critical; groups with minimal impact may be removed for simplicity.
                            </p>
                            <button class="btn btn-warning btn-sm" onclick="runFeatureAblation()">
                                <i class="bi bi-scissors"></i> Run Ablation
                            </button>
                            <div id="fa-results" class="d-none mt-2">
                                <div id="fa-brief" class="mb-2"></div>
                                <div class="row g-2 mb-2">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Most Critical</div><div class="metric-value" id="fa-most-important">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Baseline Acc</div><div class="metric-value" id="fa-baseline">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Feature Groups</div><div class="metric-value" id="fa-n-groups">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Total Features</div><div class="metric-value" id="fa-n-features">--</div></div></div>
                                </div>
                                <div class="text-center mb-2" id="fa-plot-img"></div>
                                <div class="card">
                                    <div class="card-header py-1"><i class="bi bi-table"></i> Ablation Results (sorted by impact)</div>
                                    <div class="card-body p-0">
                                        <table class="table table-sm table-hover mb-0">
                                            <thead class="table-light"><tr><th>Rank</th><th>Group</th><th># Features</th><th>Acc Without</th><th>Acc Drop</th></tr></thead>
                                            <tbody id="fa-table-body"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Hyperparameter Optimization -->
                    <div class="card border-primary mb-3">
                        <div class="card-header bg-primary bg-opacity-10 py-2">
                            <i class="bi bi-sliders2"></i> <strong>Hyperparameter Optimization</strong>
                            <small class="text-muted ms-2">Find optimal model configuration</small>
                        </div>
                        <div class="card-body py-2">
                            <p class="text-muted small mb-2">
                                Tests multiple hyperparameter configurations via randomized search.
                                Returns the best params and whether they improve over defaults.
                            </p>
                            <div class="d-flex gap-2 mb-2 align-items-center">
                                <label class="form-label small mb-0">Iterations:</label>
                                <select id="opt-n-iter" class="form-select form-select-sm" style="width:auto">
                                    <option value="10">10 (fast)</option>
                                    <option value="20" selected>20 (standard)</option>
                                    <option value="50">50 (thorough)</option>
                                </select>
                                <button class="btn btn-primary btn-sm" onclick="runOptimizeModel()">
                                    <i class="bi bi-sliders2"></i> Optimize
                                </button>
                            </div>
                            <div id="opt-results" class="d-none mt-2">
                                <div id="opt-brief" class="mb-2"></div>
                                <div class="row g-2 mb-2">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Default Acc</div><div class="metric-value" id="opt-default">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Best Acc</div><div class="metric-value" id="opt-best">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Improvement</div><div class="metric-value" id="opt-improvement">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Configs Tested</div><div class="metric-value" id="opt-n-iter-val">--</div></div></div>
                                </div>
                                <div class="text-center mb-2" id="opt-plot-img"></div>
                                <div class="card mb-2">
                                    <div class="card-header py-1"><i class="bi bi-gear"></i> Best Parameters</div>
                                    <div class="card-body py-2"><pre id="opt-best-params" class="mb-0 small"></pre></div>
                                </div>
                                <div class="card">
                                    <div class="card-header py-1"><i class="bi bi-trophy"></i> Top 5 Configurations</div>
                                    <div class="card-body p-0">
                                        <table class="table table-sm table-hover mb-0">
                                            <thead class="table-light"><tr><th>Rank</th><th>Score</th><th>Std</th><th>Parameters</th></tr></thead>
                                            <tbody id="opt-table-body"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                                </div>
                            </div>
                        </div>

                        <!-- Group 3: Transfer & Generalization -->
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed py-2" type="button" data-bs-toggle="collapse" data-bs-target="#cls-group-transfer">
                                    <i class="bi bi-arrow-left-right me-2"></i> Transfer & Generalization <span class="badge bg-secondary ms-2">2</span>
                                </button>
                            </h2>
                            <div id="cls-group-transfer" class="accordion-collapse collapse" data-bs-parent="#classify-accordion">
                                <div class="accordion-body p-2">

                    <!-- Domain-Adapted Transfer Learning -->
                    <div class="card border-info mb-3">
                        <div class="card-header bg-info bg-opacity-10 py-2">
                            <i class="bi bi-diagram-3"></i> <strong>Domain-Adapted Transfer</strong>
                            <small class="text-muted ms-2">MMD reweighting + pseudo-labeling</small>
                        </div>
                        <div class="card-body py-2">
                            <p class="text-muted small mb-2">
                                Compares 5 domain adaptation strategies: zero-shot, fine-tuned, MMD kernel reweighting,
                                progressive pseudo-labeling, and target-only. Also reports feature distribution shifts (Cohen's d).
                            </p>
                            <div class="d-flex gap-2 mb-2 align-items-center">
                                <select id="ta-source-well" class="form-select form-select-sm" style="width:auto">
                                    <option value="3P">Source: 3P</option>
                                    <option value="6P">Source: 6P</option>
                                </select>
                                <i class="bi bi-arrow-right"></i>
                                <select id="ta-target-well" class="form-select form-select-sm" style="width:auto">
                                    <option value="6P">Target: 6P</option>
                                    <option value="3P">Target: 3P</option>
                                </select>
                                <button class="btn btn-info btn-sm" onclick="runTransferAdapted()">
                                    <i class="bi bi-arrow-left-right"></i> Compare Methods
                                </button>
                            </div>
                            <div id="ta-results" class="d-none">
                                <div id="ta-brief" class="mb-2"></div>
                                <div class="row g-2 mb-2">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Best Method</div><div class="metric-value" id="ta-best-method">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Best Accuracy</div><div class="metric-value" id="ta-best-acc">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Feature Shifts</div><div class="metric-value" id="ta-n-shifts">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Fine-tune Size</div><div class="metric-value" id="ta-ft-size">--</div></div></div>
                                </div>
                                <div class="text-center mb-2" id="ta-plot-img"></div>
                                <div class="card">
                                    <div class="card-header py-1"><i class="bi bi-table"></i> Method Comparison</div>
                                    <div class="card-body p-0">
                                        <table class="table table-sm table-hover mb-0">
                                            <thead class="table-light"><tr><th>Method</th><th>Accuracy</th><th>F1</th><th>Details</th></tr></thead>
                                            <tbody id="ta-table-body"></tbody>
                                        </table>
                                    </div>
                                </div>
                                <div id="ta-shifts-section" class="d-none mt-2">
                                    <h6 class="small fw-bold"><i class="bi bi-exclamation-triangle text-warning"></i> Significant Feature Shifts</h6>
                                    <div class="table-responsive" style="max-height:200px;overflow-y:auto">
                                        <table class="table table-sm table-bordered mb-0">
                                            <thead class="table-light"><tr><th>Feature</th><th>Cohen's d</th><th>Severity</th></tr></thead>
                                            <tbody id="ta-shifts-body"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Cross-Well Generalization -->
                    <div class="card border-primary mb-3">
                        <div class="card-header bg-primary bg-opacity-10 py-2">
                            <i class="bi bi-arrow-left-right"></i> <strong>Cross-Well Generalization Test</strong>
                            <small class="text-muted ms-2">Will this model work on a new well?</small>
                        </div>
                        <div class="card-body py-2">
                            <p class="text-muted small mb-2">
                                Trains on well A, tests on well B (and vice versa). This is the real deployment scenario.
                                Within-well CV is optimistic; cross-well accuracy is the true measure of generalization.
                            </p>
                            <button class="btn btn-primary btn-sm" onclick="runCrossWellTest()">
                                <i class="bi bi-arrow-left-right"></i> Run Cross-Well Test
                            </button>
                            <div id="cw-results" class="d-none mt-2">
                                <div class="row g-2 mb-2">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Transfer Grade</div><div class="metric-value fs-3" id="cw-grade">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Within-Well Acc</div><div class="metric-value" id="cw-within">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Cross-Well Acc</div><div class="metric-value" id="cw-cross">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Degradation</div><div class="metric-value" id="cw-degrad">--</div></div></div>
                                </div>
                                <div class="alert alert-light border small" id="cw-brief"></div>
                                <h6>Cross-Well Transfer Results</h6>
                                <div class="table-responsive mb-2">
                                    <table class="table table-sm table-hover"><thead class="table-light"><tr><th>Train</th><th>Test</th><th>Train N</th><th>Test N</th><th>Accuracy</th><th>F1</th><th>Bal. Acc</th></tr></thead><tbody id="cw-table-body"></tbody></table>
                                </div>
                                <div class="text-center"><img id="cw-plot" class="img-fluid" style="max-width:800px" /></div>
                            </div>
                        </div>
                    </div>

                                </div>
                            </div>
                        </div>
                    </div><!-- /classify-accordion -->

                    <!-- Empty state -->
                    <div id="classify-empty" class="empty-state">
                        <i class="bi bi-diagram-3"></i>
                        <h5>No Classification Results Yet</h5>
                        <p>Select a classifier above and click <strong>Run Classification</strong> to categorize fractures by type using machine learning. Expand the accordion sections for advanced analyses like ensemble models, feature ablation, and cross-well generalization.</p>
                    </div>

                    <div id="classify-results" class="d-none">
                        <!-- Stakeholder Brief -->
                        <div id="clf-brief" class="d-none mb-4"></div>
                        <div class="row g-3 mb-4">
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-label">CV Accuracy</div>
                                    <div class="metric-value" id="clf-accuracy">--</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-label">Std Deviation</div>
                                    <div class="metric-value" id="clf-std">--</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-label">F1 Score</div>
                                    <div class="metric-value" id="clf-f1">--</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-label">Classifier</div>
                                    <div class="metric-value" id="clf-type">--</div>
                                </div>
                            </div>
                        </div>
                        <div class="row g-3">
                            <div class="col-lg-6">
                                <div class="card">
                                    <div class="card-header">Feature Importances</div>
                                    <div class="card-body" id="feat-imp-container"></div>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="card">
                                    <div class="card-header">Confusion Matrix</div>
                                    <div class="card-body p-0">
                                        <div class="table-responsive">
                                            <table class="table table-bordered mb-0 table-sm" id="confusion-table">
                                                <thead></thead><tbody></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Spatial CV Warning -->
                        <div id="clf-spatial-cv" class="d-none mt-3"></div>
                        <!-- Conformal Prediction -->
                        <div id="clf-conformal" class="d-none mt-3"></div>
                    </div>
                </div>

                <!-- CLUSTERING TAB -->
                <div id="tab-cluster" class="tab-content">
                    <div class="alert alert-light border py-2 mb-3 small"><i class="bi bi-info-circle text-primary"></i> <strong>Fracture Clustering</strong> &mdash; Groups fractures that share similar orientations into &ldquo;fracture sets.&rdquo; Each set likely formed under the same stress conditions. Knowing fracture sets helps predict reservoir connectivity and fluid flow paths.</div>
                    <div class="d-flex gap-2 mb-3">
                        <select id="n-clusters-select" class="form-select form-select-sm" style="width:auto">
                            <option value="auto">Auto-detect</option>
                            <option value="2">2 clusters</option>
                            <option value="3">3 clusters</option>
                            <option value="4">4 clusters</option>
                            <option value="5">5 clusters</option>
                            <option value="6">6 clusters</option>
                        </select>
                        <button class="btn btn-primary btn-sm" onclick="runClustering()">
                            <i class="bi bi-play-fill"></i> Run Clustering
                        </button>
                    </div>
                    <div id="cluster-results" class="d-none">
                        <div class="row g-3 mb-3">
                            <div class="col-md-4">
                                <div class="metric-card">
                                    <div class="metric-label">Fracture Sets Found</div>
                                    <div class="metric-value" id="n-clusters-val">--</div>
                                </div>
                            </div>
                        </div>
                        <div class="row g-3">
                            <div class="col-lg-6">
                                <div class="card">
                                    <div class="card-header">Cluster Stereonet</div>
                                    <div class="card-body text-center">
                                        <img id="cluster-img" class="plot-img">
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="card">
                                    <div class="card-header">Cluster Statistics</div>
                                    <div class="card-body p-0">
                                        <table class="table table-striped mb-0 table-sm" id="cluster-stats-table">
                                            <thead><tr><th>Set</th><th>Mean Az</th><th>Mean Dip</th><th>Count</th></tr></thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- FEEDBACK TAB (NEW) -->
                <div id="tab-feedback" class="tab-content">
                    <div class="alert alert-light border py-2 mb-3 small"><i class="bi bi-info-circle text-primary"></i> <strong>Feedback Loop</strong> &mdash; Tell the AI when its predictions are wrong. Each correction improves future accuracy. The trust score shows how much confidence to place in the model based on data quality and correction history.</div>

                    <!-- Trust Score Banner -->
                    <div class="card mb-4 border-0 shadow-sm" id="trust-score-card">
                        <div class="card-body p-4">
                            <div class="d-flex justify-content-between align-items-start mb-3">
                                <div>
                                    <h5 class="mb-1"><i class="bi bi-shield-check"></i> Model Trust Score</h5>
                                    <p class="text-muted small mb-0">Composite confidence metric combining expert feedback, calibration, data quality, corrections, and sample size.</p>
                                </div>
                                <button class="btn btn-outline-primary btn-sm" onclick="runTrustScore()">
                                    <i class="bi bi-arrow-clockwise"></i> Compute
                                </button>
                            </div>
                            <div id="trust-score-body">
                                <p class="text-muted small">Click "Compute" to assess overall model trustworthiness. The trust score updates as you submit feedback and corrections.</p>
                            </div>
                        </div>
                    </div>

                    <div class="row g-3 mb-4">
                        <div class="col-lg-6">
                            <div class="card">
                                <div class="card-header"><i class="bi bi-chat-dots"></i> Submit Feedback</div>
                                <div class="card-body">
                                    <p class="text-muted small">Help improve GeoStress AI by rating analysis accuracy. Your feedback trains future model versions.</p>
                                    <div class="mb-3">
                                        <label class="form-label">Analysis Type</label>
                                        <select id="fb-type" class="form-select form-select-sm">
                                            <option value="inversion">Stress Inversion</option>
                                            <option value="classification">Fracture Classification</option>
                                            <option value="clustering">Fracture Clustering</option>
                                            <option value="critically_stressed">Critically Stressed Analysis</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Accuracy Rating</label>
                                        <div id="fb-stars" class="d-flex gap-1">
                                            <button class="btn btn-outline-warning btn-sm fb-star" data-val="1">1</button>
                                            <button class="btn btn-outline-warning btn-sm fb-star" data-val="2">2</button>
                                            <button class="btn btn-warning btn-sm fb-star active" data-val="3">3</button>
                                            <button class="btn btn-outline-warning btn-sm fb-star" data-val="4">4</button>
                                            <button class="btn btn-outline-warning btn-sm fb-star" data-val="5">5</button>
                                        </div>
                                        <small class="text-muted">1 = very inaccurate, 5 = very accurate</small>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Comments (optional)</label>
                                        <textarea id="fb-comment" class="form-control form-control-sm" rows="3" placeholder="What was inaccurate? What would improve the analysis?"></textarea>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Your Name (optional)</label>
                                        <input type="text" id="fb-name" class="form-control form-control-sm" placeholder="Anonymous">
                                    </div>
                                    <button class="btn btn-primary btn-sm" onclick="submitFeedback()">
                                        <i class="bi bi-send"></i> Submit Feedback
                                    </button>
                                    <!-- Feedback Receipt (visible confirmation) -->
                                    <div id="feedback-receipt" class="d-none mt-3">
                                        <div class="card border-success">
                                            <div class="card-header bg-success text-white py-1">
                                                <i class="bi bi-check-circle"></i> Feedback Recorded
                                            </div>
                                            <div class="card-body py-2" id="feedback-receipt-body"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="card">
                                <div class="card-header"><i class="bi bi-graph-up"></i> Feedback Summary</div>
                                <div class="card-body" id="fb-summary-body">
                                    <p class="text-muted">No feedback collected yet. Submit feedback to track accuracy over time.</p>
                                </div>
                            </div>

                            <!-- Actionable Insights -->
                            <div id="fb-insights-section" class="d-none mt-3">
                                <div class="card border-info">
                                    <div class="card-header bg-info text-white">
                                        <i class="bi bi-lightbulb"></i> Actionable Insights
                                    </div>
                                    <div class="card-body" id="fb-insights-body"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Label Correction Section (collapsible) -->
                    <div class="mb-3">
                        <a class="btn btn-sm btn-outline-secondary" data-bs-toggle="collapse" href="#correction-section" role="button">
                            <i class="bi bi-pencil-square"></i> Expert Corrections &amp; Retraining <i class="bi bi-chevron-down ms-1"></i>
                        </a>
                    </div>
                    <div class="collapse" id="correction-section">
                    <div class="row g-3 mb-4">
                        <div class="col-lg-6">
                            <div class="card border-warning">
                                <div class="card-header">
                                    <i class="bi bi-pencil-square"></i> Correct a Classification
                                    <small class="text-muted ms-2">(Closes the feedback loop)</small>
                                </div>
                                <div class="card-body">
                                    <p class="text-muted small">
                                        When you see a misclassified fracture, submit the correct label here.
                                        After collecting corrections, click "Retrain" to update the model.
                                    </p>
                                    <div class="row g-2">
                                        <div class="col-md-4">
                                            <label class="form-label small">Fracture Index</label>
                                            <input type="number" id="corr-idx" class="form-control form-control-sm" value="0" min="0">
                                        </div>
                                        <div class="col-md-4">
                                            <label class="form-label small">Original Type</label>
                                            <select id="corr-original" class="form-select form-select-sm">
                                                <option value="">Model's prediction</option>
                                                <option value="Boundary">Boundary</option>
                                                <option value="Brecciated">Brecciated</option>
                                                <option value="Continuous">Continuous</option>
                                                <option value="Discontinuous">Discontinuous</option>
                                                <option value="Vuggy">Vuggy</option>
                                            </select>
                                        </div>
                                        <div class="col-md-4">
                                            <label class="form-label small">Correct Type</label>
                                            <select id="corr-correct" class="form-select form-select-sm">
                                                <option value="Boundary">Boundary</option>
                                                <option value="Brecciated">Brecciated</option>
                                                <option value="Continuous">Continuous</option>
                                                <option value="Discontinuous">Discontinuous</option>
                                                <option value="Vuggy">Vuggy</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="mt-2 d-flex gap-2">
                                        <button class="btn btn-warning btn-sm" onclick="submitCorrection()">
                                            <i class="bi bi-check-lg"></i> Submit Correction
                                        </button>
                                        <span class="small text-muted align-self-center" id="corr-count">0 corrections pending</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="card">
                                <div class="card-header">
                                    <i class="bi bi-arrow-repeat"></i> Retrain with Expert Corrections
                                </div>
                                <div class="card-body">
                                    <p class="text-muted small">
                                        After submitting label corrections, retrain the model to incorporate
                                        expert knowledge. This is how the AI improves from human feedback.
                                    </p>
                                    <button class="btn btn-success btn-sm" onclick="retrainModel()" id="btn-retrain" disabled>
                                        <i class="bi bi-arrow-repeat"></i> Retrain Model
                                    </button>
                                    <div id="retrain-result" class="mt-2 d-none"></div>
                                </div>
                            </div>
                            <div class="card mt-3">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <span><i class="bi bi-question-circle"></i> How the Feedback Loop Works</span>
                                    <button class="btn btn-success btn-sm" onclick="runFeedbackEffectiveness()">
                                        <i class="bi bi-graph-up-arrow"></i> Track Effectiveness
                                    </button>
                                </div>
                                <div class="card-body">
                                    <ol class="mb-0 small">
                                        <li><strong>Rate analyses</strong> to track model accuracy over time</li>
                                        <li><strong>Correct labels</strong> when you spot misclassified fractures</li>
                                        <li><strong>Retrain</strong> to incorporate corrections into the model</li>
                                        <li><strong>Compare</strong> before/after accuracy to verify improvement</li>
                                        <li><strong>Repeat</strong> as more field data becomes available</li>
                                    </ol>
                                </div>
                            </div>
                            <!-- Feedback Effectiveness Results -->
                            <div id="effectiveness-results" class="d-none mt-3">
                                <div class="card border-success">
                                    <div class="card-header bg-success text-white">
                                        <i class="bi bi-graph-up-arrow"></i> Feedback Effectiveness Report
                                    </div>
                                    <div class="card-body" id="effectiveness-body"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    </div><!-- /collapse correction-section -->

                    <!-- RLHF Preference Model -->
                    <div class="card mt-4 border-success">
                        <div class="card-header bg-success bg-opacity-10">
                            <i class="bi bi-award"></i> RLHF Preference Model
                            <small class="text-muted ms-2">Learn from expert acceptance/rejection patterns</small>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small mb-2">
                                Builds a reward model from your feedback history: which prediction types does the expert
                                trust vs distrust? Uses this to create reward-weighted training that focuses on expert preferences.
                            </p>
                            <button class="btn btn-success btn-sm mb-3" onclick="runPreferenceModel()">
                                <i class="bi bi-award-fill"></i> Build Preference Model
                            </button>
                            <div id="pref-results" class="d-none">
                                <div id="pref-brief" class="mb-2"></div>
                                <div class="row g-2 mb-3">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Reviews</div><div class="metric-value" id="pref-reviews">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Accepted</div><div class="metric-value" id="pref-accepted">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Rejected</div><div class="metric-value" id="pref-rejected">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">RLHF Effect</div><div class="metric-value" id="pref-improvement">--</div></div></div>
                                </div>
                                <div class="text-center mb-3" id="pref-plot-img"></div>
                                <div id="pref-trust-section" class="d-none">
                                    <div class="card"><div class="card-header py-1"><i class="bi bi-shield-check"></i> Expert Trust per Type</div>
                                        <div class="card-body p-0"><table class="table table-sm table-hover mb-0">
                                            <thead class="table-light"><tr><th>Type</th><th>Accepted</th><th>Rejected</th><th>Trust</th></tr></thead>
                                            <tbody id="pref-trust-body"></tbody>
                                        </table></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Active Learning Section -->
                    <div class="card mt-4 border-info">
                        <div class="card-header bg-info text-white">
                            <i class="bi bi-bullseye"></i> Active Learning — Which Fractures to Review Next
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">
                                The AI identifies fractures it's most uncertain about. Reviewing these
                                gives the biggest improvement per expert-hour — this is human-in-the-loop learning.
                            </p>
                            <div class="d-flex gap-2 mb-3">
                                <button class="btn btn-info btn-sm" onclick="runActiveLearning()">
                                    <i class="bi bi-bullseye"></i> Find Uncertain Fractures
                                </button>
                                <button class="btn btn-warning btn-sm" onclick="runQbcActiveLearning()">
                                    <i class="bi bi-people-fill"></i> Query-by-Committee (All Models)
                                </button>
                            </div>

                            <!-- QBC Results -->
                            <div id="qbc-results" class="d-none mb-4">
                                <div id="qbc-brief"></div>
                                <div class="row g-2 mb-3">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Committee Size</div><div class="metric-value" id="qbc-committee-size">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">High Disagreement</div><div class="metric-value" id="qbc-high-disagree">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Mean Vote Entropy</div><div class="metric-value" id="qbc-mean-ve">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Suggestions</div><div class="metric-value" id="qbc-n-suggestions">--</div></div></div>
                                </div>
                                <div class="text-center mb-3" id="qbc-plot-img"></div>
                                <div class="card">
                                    <div class="card-header"><i class="bi bi-people-fill"></i> Committee Disagreement — Top Samples for Expert Review</div>
                                    <div class="card-body p-0" style="max-height:400px;overflow-y:auto">
                                        <table class="table table-hover table-sm mb-0">
                                            <thead class="table-light sticky-top">
                                                <tr><th>#</th><th>Depth</th><th>Well</th><th>Label</th><th>Committee Vote</th><th>Agreement</th><th>Score</th></tr>
                                            </thead>
                                            <tbody id="qbc-table-body"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <div id="al-results" class="d-none">
                                <div class="mb-3" id="al-summary-text"></div>

                                <!-- Learning Curve -->
                                <div id="al-learning-curve" class="d-none mb-3">
                                    <h6><i class="bi bi-graph-up-arrow"></i> Learning Curve</h6>
                                    <div id="al-curve-body"></div>
                                </div>

                                <!-- Coverage Gaps -->
                                <div id="al-coverage" class="d-none mb-3">
                                    <h6><i class="bi bi-exclamation-diamond"></i> Data Coverage Gaps</h6>
                                    <div id="al-coverage-body"></div>
                                </div>

                                <!-- Suggested Samples -->
                                <div id="al-suggestions" class="d-none">
                                    <h6><i class="bi bi-list-check"></i> Fractures for Expert Review</h6>
                                    <div class="table-responsive">
                                        <table class="table table-sm table-hover">
                                            <thead><tr>
                                                <th>#</th><th>Well</th><th>Depth</th><th>Az</th><th>Dip</th>
                                                <th>Current Label</th><th>Predicted</th><th>Confidence</th><th>Mismatch</th>
                                            </tr></thead>
                                            <tbody id="al-table-body"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Calibrated Ensemble Prediction -->
                    <div class="card mb-4 border-primary mt-4">
                        <div class="card-header bg-primary bg-opacity-10">
                            <i class="bi bi-diagram-3"></i> Calibrated Ensemble Prediction
                            <small class="text-muted ms-2">Combine ALL models for maximum reliability</small>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small mb-2">
                                Trains all available models (RF, GBM, XGB, LGB, CatBoost, LR, SVM) and combines
                                their predictions using accuracy-weighted voting. Shows inter-model agreement
                                and highlights samples where models disagree (high uncertainty).
                            </p>
                            <button class="btn btn-sm btn-outline-primary mb-3" onclick="runEnsemblePredict()">
                                <i class="bi bi-diagram-3-fill"></i> Run Ensemble
                            </button>
                            <div id="ens-results" class="d-none">
                                <div class="row g-3 mb-3">
                                    <div class="col-md-4">
                                        <div class="metric-card">
                                            <div class="metric-label">Ensemble Accuracy</div>
                                            <div class="metric-value text-primary" id="ens-acc">--</div>
                                            <small class="text-muted" id="ens-n-models">-- models</small>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="metric-card">
                                            <div class="metric-label">Model Agreement</div>
                                            <div class="metric-value" id="ens-agreement">--</div>
                                            <small class="text-muted">inter-model consensus</small>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="metric-card">
                                            <div class="metric-label">Uncertain Samples</div>
                                            <div class="metric-value text-warning" id="ens-uncertain">--</div>
                                            <small class="text-muted">models disagree</small>
                                        </div>
                                    </div>
                                </div>
                                <div id="ens-interpretation" class="alert alert-light small mb-3"></div>
                                <!-- Per-model breakdown -->
                                <div id="ens-models" class="mb-3"></div>
                                <!-- Uncertain samples table -->
                                <div id="ens-uncertain-table" class="d-none">
                                    <h6 class="text-warning"><i class="bi bi-exclamation-diamond"></i> Most Uncertain Samples</h6>
                                    <div class="table-responsive">
                                        <table class="table table-sm table-bordered">
                                            <thead><tr><th>Depth</th><th>Az</th><th>Dip</th><th>True Type</th><th>Agreement</th><th>Model Votes</th></tr></thead>
                                            <tbody id="ens-uncertain-tbody"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Adversarial Robustness Test -->
                    <div class="card mb-4 border-warning mt-4">
                        <div class="card-header bg-warning bg-opacity-10">
                            <i class="bi bi-shield-shaded"></i> Adversarial Robustness Test
                            <small class="text-muted ms-2">Does the model survive noisy/adversarial data?</small>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small mb-2">
                                Trains on augmented data (noise injection, boundary interpolation, edge cases)
                                and compares accuracy against the original model. A robust model should maintain
                                similar accuracy despite adversarial samples.
                            </p>
                            <div class="d-flex gap-2 mb-3 align-items-center">
                                <button class="btn btn-sm btn-outline-warning" onclick="runAugmentedClassify()">
                                    <i class="bi bi-shield-check"></i> Run Robustness Test
                                </button>
                                <small class="text-muted">Noise: <input type="number" id="aug-noise" value="5" min="1" max="20" style="width:50px" class="form-control form-control-sm d-inline-block"> deg</small>
                            </div>
                            <div id="aug-results" class="d-none">
                                <div class="row g-3 mb-3">
                                    <div class="col-md-4">
                                        <div class="metric-card">
                                            <div class="metric-label">Original Accuracy</div>
                                            <div class="metric-value" id="aug-orig-acc">--</div>
                                            <small class="text-muted" id="aug-orig-n">-- samples</small>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="metric-card">
                                            <div class="metric-label">Augmented Accuracy</div>
                                            <div class="metric-value" id="aug-new-acc">--</div>
                                            <small class="text-muted" id="aug-new-n">-- samples</small>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div id="aug-verdict" class="metric-card">
                                            <div class="metric-label">Robustness</div>
                                            <div class="metric-value" id="aug-robustness">--</div>
                                            <small class="text-muted" id="aug-change">--</small>
                                        </div>
                                    </div>
                                </div>
                                <div id="aug-interpretation" class="alert alert-light small"></div>
                            </div>
                        </div>
                    </div>
                    <!-- Error Budget / Learning Curve -->
                    <div class="card mb-4 border-primary mt-4">
                        <div class="card-header bg-primary bg-opacity-10">
                            <i class="bi bi-graph-up"></i> Error Budget &amp; Learning Curve
                            <small class="text-muted ms-2">How much more data do you need?</small>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small mb-2">
                                Shows how model accuracy changes with training set size. Diagnoses whether
                                you need more data, better features, or a different model — and estimates
                                the cost (in labeled samples) of each +1% accuracy improvement.
                            </p>
                            <button class="btn btn-sm btn-outline-primary mb-3" onclick="runErrorBudget()">
                                <i class="bi bi-calculator"></i> Compute Error Budget
                            </button>
                            <div id="eb-results" class="d-none">
                                <div id="eb-brief" class="mb-2"></div>
                                <div class="row g-2 mb-3">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Current Accuracy</div><div class="metric-value" id="eb-accuracy">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Train-Test Gap</div><div class="metric-value" id="eb-gap">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Diagnosis</div><div class="metric-value" id="eb-diagnosis">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Samples for +1%</div><div class="metric-value" id="eb-samples-needed">--</div></div></div>
                                </div>
                                <div class="text-center mb-3" id="eb-plot-img"></div>
                                <div class="card">
                                    <div class="card-header py-1"><i class="bi bi-table"></i> Learning Curve Data</div>
                                    <div class="card-body p-0">
                                        <table class="table table-sm table-hover mb-0">
                                            <thead class="table-light"><tr><th>Samples</th><th>Train Acc</th><th>Val Acc</th><th>Std</th></tr></thead>
                                            <tbody id="eb-table-body"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ═══════ Sensitivity Tab ═══════ -->
                <div id="tab-sensitivity" class="tab-content">
                    <h5 class="mb-3">Parameter Sensitivity Analysis</h5>
                    <p class="text-muted">How do results change when assumptions vary? Essential for understanding how robust your conclusions are.</p>

                    <!-- Interactive What-If Explorer -->
                    <div class="card border-primary mb-4">
                        <div class="card-header bg-primary text-white"><i class="bi bi-sliders2"></i> Interactive What-If Explorer</div>
                        <div class="card-body">
                            <p class="small text-muted">Adjust parameters below and click "Run What-If" to see how results change in real time.</p>
                            <div class="row g-3 mb-3">
                                <div class="col-md-4">
                                    <label class="form-label small fw-bold">Friction Coefficient (μ)</label>
                                    <input type="range" class="form-range" id="whatif-friction" min="0.2" max="1.0" step="0.05" value="0.6">
                                    <div class="d-flex justify-content-between small text-muted">
                                        <span>0.2 (weak)</span>
                                        <span id="whatif-friction-val" class="fw-bold text-primary">0.6</span>
                                        <span>1.0 (strong)</span>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label small fw-bold">Pore Pressure (MPa)</label>
                                    <input type="range" class="form-range" id="whatif-pp" min="0" max="50" step="1" value="0">
                                    <div class="d-flex justify-content-between small text-muted">
                                        <span>0 (dry)</span>
                                        <span id="whatif-pp-val" class="fw-bold text-primary">0</span>
                                        <span>50 (overpressured)</span>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label small fw-bold">Depth (m)</label>
                                    <input type="range" class="form-range" id="whatif-depth" min="1000" max="6000" step="100" value="3000">
                                    <div class="d-flex justify-content-between small text-muted">
                                        <span>1000m</span>
                                        <span id="whatif-depth-val" class="fw-bold text-primary">3000</span>
                                        <span>6000m</span>
                                    </div>
                                </div>
                            </div>
                            <div class="small text-muted mb-2"><i class="bi bi-info-circle"></i> Sliders auto-run when you stop dragging. Results update in real time.</div>
                            <button class="btn btn-primary btn-sm" onclick="runWhatIf()">
                                <i class="bi bi-play-fill"></i> Run What-If
                            </button>
                            <div id="whatif-results" class="mt-3 d-none"></div>
                        </div>
                    </div>

                    <div class="d-flex gap-2 mb-3 align-items-center">
                        <button class="btn btn-primary btn-sm" onclick="runSensitivity()">
                            <i class="bi bi-sliders"></i> Run Full Sensitivity Analysis
                        </button>
                        <div class="btn-group btn-group-sm">
                            <button class="btn btn-outline-danger dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="bi bi-three-dots"></i> Advanced
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#" onclick="runSensitivityHeatmap();return false"><i class="bi bi-grid-3x3 me-2"></i>Sensitivity Heatmap</a></li>
                                <li><a class="dropdown-item text-danger" href="#" onclick="runWorstCase();return false"><i class="bi bi-exclamation-octagon me-2"></i>Worst-Case Scenarios</a></li>
                            </ul>
                        </div>
                    </div>
                    <div id="worst-case-results" class="d-none mb-4">
                        <div class="card border-danger">
                            <div class="card-header bg-danger text-white">
                                <i class="bi bi-exclamation-octagon"></i> Worst-Case Scenario Analysis
                            </div>
                            <div class="card-body" id="worst-case-body"></div>
                        </div>
                    </div>
                    <div id="heatmap-results" class="d-none mb-4">
                        <div class="card border-danger">
                            <div class="card-header bg-danger text-white">
                                <i class="bi bi-grid-3x3"></i> Sensitivity Heatmap — Friction × Pore Pressure
                            </div>
                            <div class="card-body" id="heatmap-body"></div>
                        </div>
                    </div>

                    <!-- Tornado Diagram -->
                    <div id="sens-tornado" class="d-none mb-4">
                        <div class="card">
                            <div class="card-header"><i class="bi bi-tornado"></i> Tornado Diagram — Impact on Critically Stressed %</div>
                            <div class="card-body" id="sens-tornado-body"></div>
                        </div>
                    </div>

                    <!-- Risk Implications -->
                    <div id="sens-risks" class="d-none mb-4">
                        <div class="card border-warning">
                            <div class="card-header bg-warning text-dark"><i class="bi bi-exclamation-triangle"></i> Risk Implications</div>
                            <div class="card-body" id="sens-risks-body"></div>
                        </div>
                    </div>

                    <!-- Regime Comparison Table -->
                    <div id="sens-regime" class="d-none mb-4">
                        <div class="card">
                            <div class="card-header"><i class="bi bi-arrows-angle-expand"></i> Regime Comparison</div>
                            <div class="card-body" id="sens-regime-body"></div>
                        </div>
                    </div>

                    <!-- Friction & Pore Pressure Detail -->
                    <div class="row g-3">
                        <div class="col-lg-6">
                            <div id="sens-friction" class="d-none">
                                <div class="card">
                                    <div class="card-header"><i class="bi bi-speedometer2"></i> Friction Coefficient Sensitivity</div>
                                    <div class="card-body" id="sens-friction-body"></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div id="sens-pp" class="d-none">
                                <div class="card">
                                    <div class="card-header"><i class="bi bi-droplet"></i> Pore Pressure Sensitivity</div>
                                    <div class="card-body" id="sens-pp-body"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ═══════ Risk Matrix Tab ═══════ -->
                <div id="tab-risk" class="tab-content">
                    <div class="alert alert-light border py-2 mb-3 small"><i class="bi bi-info-circle text-primary"></i> <strong>Risk Assessment</strong> &mdash; GO / NO-GO decision framework combining critically stressed %, data quality, model confidence, sensitivity, and friction into an operational risk matrix.</div>

                    <button class="btn btn-primary btn-sm mb-3" onclick="runRiskMatrix()">
                        <i class="bi bi-shield-check"></i> Compute Risk Matrix
                    </button>

                    <div id="risk-empty" class="empty-state">
                        <i class="bi bi-shield-exclamation"></i>
                        <h5>Risk Matrix Not Computed</h5>
                        <p>Click <strong>Compute Risk Matrix</strong> to generate a GO / NO-GO assessment based on 5 independent risk factors.</p>
                    </div>

                    <!-- Overall Risk Banner -->
                    <div id="risk-overall" class="d-none mb-4">
                        <div class="card" id="risk-overall-card">
                            <div class="card-body text-center py-4">
                                <h2 id="risk-go-nogo" class="mb-2"></h2>
                                <div id="risk-score-badge" class="fs-4 fw-bold mb-2"></div>
                                <p id="risk-detail" class="text-muted mb-0"></p>
                            </div>
                        </div>
                    </div>

                    <!-- Risk Factors Table -->
                    <div id="risk-factors" class="d-none">
                        <div class="card">
                            <div class="card-header"><i class="bi bi-list-check"></i> Risk Factor Breakdown</div>
                            <div class="card-body">
                                <table class="table table-hover table-sm">
                                    <thead>
                                        <tr>
                                            <th>Risk Factor</th>
                                            <th>Score</th>
                                            <th>Detail</th>
                                            <th>Mitigation</th>
                                        </tr>
                                    </thead>
                                    <tbody id="risk-factors-tbody"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ═══════ Near-Miss Safety Tab ═══════ -->
                <div id="tab-near-miss" class="tab-content">
                    <div class="alert alert-warning border py-2 mb-3 small"><i class="bi bi-exclamation-triangle-fill text-warning"></i> <strong>Industrial Safety Analysis</strong> &mdash; Identifies predictions that were correct but nearly wrong (near-misses), model blind spots, and computes risk scores per API RP 580/581 standards. Near-misses are leading indicators of future failures.</div>
                    <div class="d-flex gap-2 mb-3">
                        <select id="nm-classifier-select" class="form-select form-select-sm" style="width:auto">
                            <option value="random_forest" selected>Random Forest</option>
                            <option value="gradient_boosting">Gradient Boosting</option>
                            <option value="xgboost">XGBoost</option>
                            <option value="lightgbm">LightGBM</option>
                        </select>
                        <button class="btn btn-warning btn-sm" onclick="runNearMissAnalysis()">
                            <i class="bi bi-shield-exclamation"></i> Analyze Near-Misses & Blind Spots
                        </button>
                        <button class="btn btn-danger btn-sm" onclick="runFailureDashboard()">
                            <i class="bi bi-speedometer"></i> Full Safety Dashboard (API RP 580)
                        </button>
                    </div>

                    <div id="nm-results" class="d-none">
                        <div id="nm-brief"></div>
                        <div class="row g-3 mb-3">
                            <div class="col-md-3"><div class="metric-card"><div class="metric-label">Near-Misses</div><div class="metric-value" id="nm-count">--</div></div></div>
                            <div class="col-md-3"><div class="metric-card"><div class="metric-label">Blind Spots</div><div class="metric-value" id="nm-blind-spots">--</div></div></div>
                            <div class="col-md-3"><div class="metric-card"><div class="metric-label">RED Risk Items</div><div class="metric-value" id="nm-red-risk">--</div></div></div>
                            <div class="col-md-3"><div class="metric-card"><div class="metric-label">Overall Accuracy</div><div class="metric-value" id="nm-accuracy">--</div></div></div>
                        </div>

                        <!-- Risk matrix plot -->
                        <div class="row g-3 mb-3">
                            <div class="col-12">
                                <div class="card">
                                    <div class="card-header bg-dark text-white"><i class="bi bi-graph-up-arrow"></i> API RP 580 Risk Matrix & Margin Distribution</div>
                                    <div class="card-body text-center" id="nm-plot-img"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Near-miss table -->
                        <div class="card mb-3">
                            <div class="card-header"><i class="bi bi-exclamation-diamond"></i> Near-Miss Predictions (sorted by risk)</div>
                            <div class="card-body p-0" style="max-height:400px;overflow-y:auto">
                                <table class="table table-hover table-sm mb-0">
                                    <thead class="table-light sticky-top">
                                        <tr><th>#</th><th>Depth</th><th>Well</th><th>True</th><th>Predicted</th><th>Confidence</th><th>Margin</th><th>Runner-Up</th><th>Risk</th></tr>
                                    </thead>
                                    <tbody id="nm-table-body"></tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Blind spots table -->
                        <div class="card mb-3">
                            <div class="card-header"><i class="bi bi-eye-slash"></i> Model Blind Spots (high-error feature ranges)</div>
                            <div class="card-body p-0" style="max-height:300px;overflow-y:auto">
                                <table class="table table-hover table-sm mb-0">
                                    <thead class="table-light sticky-top">
                                        <tr><th>Feature</th><th>Range</th><th>Error Rate</th><th>Baseline</th><th>Samples</th><th>Severity</th></tr>
                                    </thead>
                                    <tbody id="nm-bs-table-body"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Stakeholder Decision Report + Negative Outcomes + Model Arena + Auto-Retrain -->
                    <div class="card border-primary mt-4 mb-4">
                        <div class="card-header bg-primary text-white"><i class="bi bi-file-earmark-text"></i> Advanced Industrial Analysis</div>
                        <div class="card-body">
                            <div class="d-flex gap-2 flex-wrap mb-3 align-items-center">
                                <button class="btn btn-primary btn-sm" onclick="runStakeholderReport()">
                                    <i class="bi bi-file-earmark-bar-graph"></i> Stakeholder Decision Report
                                </button>
                                <div class="btn-group btn-group-sm">
                                    <button class="btn btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                        <i class="bi bi-three-dots"></i> More Analyses
                                    </button>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#" onclick="runModelArena();return false"><i class="bi bi-trophy me-2 text-success"></i>Model Arena (Compare All)</a></li>
                                        <li><a class="dropdown-item" href="#" onclick="runAutoRetrain();return false"><i class="bi bi-arrow-repeat me-2 text-info"></i>Auto-Retrain from Feedback</a></li>
                                        <li><hr class="dropdown-divider"></li>
                                        <li><a class="dropdown-item text-danger" href="#" onclick="runNegativeOutcomes();return false"><i class="bi bi-bug me-2"></i>Negative Outcome Learning</a></li>
                                    </ul>
                                </div>
                            </div>

                            <!-- Stakeholder Decision Report Results -->
                            <div id="sdr-results" class="d-none mb-4">
                                <h5><i class="bi bi-file-earmark-bar-graph"></i> Stakeholder Decision Report</h5>
                                <div id="sdr-brief" class="mb-2"></div>
                                <div class="row g-2 mb-3">
                                    <div class="col-md-2"><div class="metric-card"><div class="metric-label">Decision</div><div class="metric-value fs-5" id="sdr-decision">--</div></div></div>
                                    <div class="col-md-2"><div class="metric-card"><div class="metric-label">Score</div><div class="metric-value" id="sdr-score">--</div></div></div>
                                    <div class="col-md-2"><div class="metric-card"><div class="metric-label">Accuracy</div><div class="metric-value" id="sdr-accuracy">--</div></div></div>
                                    <div class="col-md-2"><div class="metric-card"><div class="metric-label">Econ Risk</div><div class="metric-value" id="sdr-econ-risk">--</div></div></div>
                                    <div class="col-md-2"><div class="metric-card"><div class="metric-label">Low Conf</div><div class="metric-value" id="sdr-low-conf">--</div></div></div>
                                    <div class="col-md-2"><div class="metric-card"><div class="metric-label">Reviews</div><div class="metric-value" id="sdr-reviews">--</div></div></div>
                                </div>
                                <div class="text-center mb-3" id="sdr-plot-img"></div>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <div class="card"><div class="card-header py-1"><i class="bi bi-shield"></i> Per-Class Risk</div>
                                            <div class="card-body p-0" style="max-height:250px;overflow-y:auto">
                                                <table class="table table-sm table-hover mb-0">
                                                    <thead class="table-light"><tr><th>Class</th><th>Recall</th><th>Risk Score</th><th>Verdict</th></tr></thead>
                                                    <tbody id="sdr-class-risk-body"></tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="card"><div class="card-header py-1"><i class="bi bi-list-check"></i> Evidence Chain</div>
                                            <div class="card-body p-0" style="max-height:250px;overflow-y:auto">
                                                <table class="table table-sm mb-0">
                                                    <thead class="table-light"><tr><th>Factor</th><th>Impact</th><th>Severity</th></tr></thead>
                                                    <tbody id="sdr-evidence-body"></tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Model Arena Results -->
                            <div id="arena-results" class="d-none mb-4">
                                <h5><i class="bi bi-trophy"></i> Model Arena</h5>
                                <div id="arena-brief" class="mb-2"></div>
                                <div class="row g-2 mb-3">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Best Model</div><div class="metric-value" id="arena-best">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Best Accuracy</div><div class="metric-value" id="arena-best-acc">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Models Tested</div><div class="metric-value" id="arena-n-models">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Composite</div><div class="metric-value" id="arena-composite">--</div></div></div>
                                </div>
                                <div class="text-center mb-3" id="arena-plot-img"></div>
                                <div class="card"><div class="card-header py-1"><i class="bi bi-table"></i> Full Ranking</div>
                                    <div class="card-body p-0"><table class="table table-sm table-hover mb-0">
                                        <thead class="table-light"><tr><th>Rank</th><th>Model</th><th>Accuracy</th><th>F1</th><th>Bal Acc</th><th>ECE</th><th>Speed</th><th>Composite</th></tr></thead>
                                        <tbody id="arena-table-body"></tbody>
                                    </table></div>
                                </div>
                            </div>

                            <!-- Auto-Retrain Results -->
                            <div id="retrain-results" class="d-none mb-4">
                                <h5><i class="bi bi-arrow-repeat"></i> Auto-Retrain from Feedback</h5>
                                <div id="retrain-brief" class="mb-2"></div>
                                <div class="row g-2 mb-3">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Status</div><div class="metric-value" id="retrain-status">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Improvement</div><div class="metric-value" id="retrain-improvement">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Corrections Used</div><div class="metric-value" id="retrain-corrections">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Failures Used</div><div class="metric-value" id="retrain-failures">--</div></div></div>
                                </div>
                                <div class="text-center mb-3" id="retrain-plot-img"></div>
                            </div>

                            <!-- Negative Outcome Results -->
                            <div id="negout-results" class="d-none mb-4">
                                <h5><i class="bi bi-bug"></i> Negative Outcome Learning</h5>
                                <div id="negout-brief" class="mb-2"></div>
                                <div class="row g-2 mb-3">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Errors Found</div><div class="metric-value" id="negout-errors">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Biases</div><div class="metric-value" id="negout-biases">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Synthetic Added</div><div class="metric-value" id="negout-synthetic">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Improvement</div><div class="metric-value" id="negout-improvement">--</div></div></div>
                                </div>
                                <div class="text-center mb-3" id="negout-plot-img"></div>
                                <div id="negout-biases-section" class="d-none">
                                    <div class="card"><div class="card-header py-1"><i class="bi bi-exclamation-triangle"></i> Systematic Biases</div>
                                        <div class="card-body p-0"><table class="table table-sm table-hover mb-0">
                                            <thead class="table-light"><tr><th>True Class</th><th>Error Rate</th><th>Confused With</th><th>Count</th></tr></thead>
                                            <tbody id="negout-bias-body"></tbody>
                                        </table></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Industrial Readiness Scorecard -->
                    <div class="card border-dark mt-4 mb-4">
                        <div class="card-header bg-dark text-white"><i class="bi bi-clipboard2-check"></i> Industrial Readiness Scorecard</div>
                        <div class="card-body">
                            <p class="text-muted small mb-2">
                                Comprehensive 7-dimension assessment: model accuracy, class balance, data volume, depth coverage,
                                expert review coverage, cross-well transfer, and failure management. Grades A-F with weighted overall score.
                            </p>
                            <button class="btn btn-dark btn-sm" onclick="runReadinessScorecard()">
                                <i class="bi bi-clipboard2-check"></i> Generate Readiness Report
                            </button>
                            <div id="rs-results" class="d-none mt-3">
                                <div id="rs-brief" class="mb-2"></div>
                                <div class="row g-2 mb-3">
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Readiness</div><div class="metric-value fs-5" id="rs-readiness">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Overall Score</div><div class="metric-value" id="rs-score">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Samples</div><div class="metric-value" id="rs-samples">--</div></div></div>
                                    <div class="col-md-3"><div class="metric-card"><div class="metric-label">Wells</div><div class="metric-value" id="rs-wells">--</div></div></div>
                                </div>
                                <div class="text-center mb-3" id="rs-plot-img"></div>
                                <div class="card mb-3">
                                    <div class="card-header py-1"><i class="bi bi-list-columns-reverse"></i> Dimension Grades</div>
                                    <div class="card-body p-0">
                                        <table class="table table-sm table-hover mb-0">
                                            <thead class="table-light"><tr><th>Dimension</th><th>Grade</th><th>Score</th><th>Detail</th><th>Action Required</th><th>Weight</th></tr></thead>
                                            <tbody id="rs-dimensions-body"></tbody>
                                        </table>
                                    </div>
                                </div>
                                <div id="rs-priority-section" class="d-none">
                                    <div class="card border-danger">
                                        <div class="card-header bg-danger bg-opacity-10 py-1"><i class="bi bi-exclamation-octagon text-danger"></i> <strong>Priority Actions</strong></div>
                                        <div class="card-body py-2">
                                            <ul id="rs-priority-list" class="mb-0 small"></ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Decision Confidence Dashboard -->
                    <div class="card border-danger mt-4 mb-4">
                        <div class="card-header bg-danger bg-opacity-10 d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-stoplights"></i> <strong>GO / NO-GO Decision Dashboard</strong></span>
                            <button class="btn btn-sm btn-outline-danger" onclick="runDecisionDashboard()">
                                <i class="bi bi-play-fill"></i> Evaluate
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small mb-2">
                                Traffic-light system evaluating 6 quality signals: model accuracy, balanced accuracy, data volume,
                                class balance, expert review coverage, and per-class reliability. Includes best/expected/worst scenario analysis.
                            </p>
                            <div id="dd-results" class="d-none">
                                <div class="row g-3 mb-3">
                                    <div class="col-md-3">
                                        <div class="metric-card"><div class="metric-label">Overall Decision</div>
                                        <div class="metric-value fs-3" id="dd-decision">--</div></div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="metric-card"><div class="metric-label">Accuracy</div>
                                        <div class="metric-value" id="dd-accuracy">--</div></div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="metric-card"><div class="metric-label">Balanced Acc</div>
                                        <div class="metric-value" id="dd-bal-acc">--</div></div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="metric-card"><div class="metric-label">Samples</div>
                                        <div class="metric-value" id="dd-samples">--</div></div>
                                    </div>
                                </div>
                                <h6><i class="bi bi-stoplights"></i> Quality Signals</h6>
                                <div class="row g-2 mb-3" id="dd-signals-row"></div>
                                <h6><i class="bi bi-list-check"></i> Per-Class Decisions</h6>
                                <div class="table-responsive mb-3">
                                    <table class="table table-sm table-hover">
                                        <thead class="table-light"><tr><th>Class</th><th>Recall</th><th>Precision</th><th>Support</th><th>Decision</th><th>Reason</th></tr></thead>
                                        <tbody id="dd-class-body"></tbody>
                                    </table>
                                </div>
                                <h6><i class="bi bi-graph-up-arrow"></i> Scenario Analysis</h6>
                                <div class="row g-2 mb-3" id="dd-scenarios-row"></div>
                                <div id="dd-actions" class="d-none">
                                    <h6><i class="bi bi-arrow-right-circle"></i> Recommended Actions</h6>
                                    <ul id="dd-action-list" class="small"></ul>
                                </div>
                                <div class="text-center"><img id="dd-plot" class="img-fluid" style="max-width:800px" /></div>
                            </div>
                        </div>
                    </div>

                    <!-- Full Safety Dashboard -->
                    <div id="safety-dashboard" class="d-none mt-4">
                        <h4 class="mb-3"><i class="bi bi-shield-fill-check"></i> Industrial Safety Dashboard</h4>
                        <div id="safety-brief"></div>
                        <div class="row g-3 mb-3">
                            <div class="col-md-4"><div class="metric-card"><div class="metric-label">Safety Score</div><div class="metric-value fs-2" id="safety-score">--</div></div></div>
                            <div class="col-md-4"><div class="metric-card"><div class="metric-label">Decision</div><div class="metric-value" id="safety-decision">--</div></div></div>
                            <div class="col-md-4"><div class="metric-card"><div class="metric-label">Risk Factors</div><div class="metric-value" id="safety-factors">--</div></div></div>
                        </div>
                        <div class="card mb-3">
                            <div class="card-header bg-dark text-white"><i class="bi bi-speedometer"></i> Safety Gauge & Risk Factor Breakdown</div>
                            <div class="card-body text-center" id="safety-plot-img"></div>
                        </div>
                        <div class="card mb-3">
                            <div class="card-header"><i class="bi bi-list-check"></i> Risk Factor Detail (API RP 580/581)</div>
                            <div class="card-body p-0">
                                <table class="table table-hover table-sm mb-0">
                                    <thead class="table-light"><tr><th>Factor</th><th>Value</th><th>Threshold</th><th>Score</th><th>Status</th></tr></thead>
                                    <tbody id="safety-factors-body"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ═══════ Uncertainty Budget Tab ═══════ -->
                <div id="tab-uncertainty" class="tab-content">
                    <h5 class="mb-3">Uncertainty Budget</h5>
                    <p class="text-muted">Where does the most uncertainty come from? This tells you what data to acquire next to get the biggest improvement in prediction confidence.</p>

                    <div class="d-flex gap-2 mb-3">
                        <button class="btn btn-primary btn-sm" onclick="runUncertaintyBudget(false)">
                            <i class="bi bi-clipboard-pulse"></i> Compute Budget
                        </button>
                        <button class="btn btn-outline-info btn-sm" onclick="runUncertaintyBudget(true)">
                            <i class="bi bi-distribute-vertical"></i> Include Bayesian (slower)
                        </button>
                        <button class="btn btn-outline-warning btn-sm" onclick="runCalibrationReport()">
                            <i class="bi bi-speedometer2"></i> Calibration Report + OOD
                        </button>
                    </div>

                    <!-- Calibration Report -->
                    <div id="cal-report" class="d-none mb-4">
                        <div id="cal-brief"></div>
                        <div class="row g-3 mb-3">
                            <div class="col-md-3"><div class="metric-card"><div class="metric-label">ECE (Calibrated)</div><div class="metric-value" id="cal-ece">--</div></div></div>
                            <div class="col-md-3"><div class="metric-card"><div class="metric-label">ECE Improvement</div><div class="metric-value" id="cal-improvement">--</div></div></div>
                            <div class="col-md-3"><div class="metric-card"><div class="metric-label">Brier Score</div><div class="metric-value" id="cal-brier">--</div></div></div>
                            <div class="col-md-3"><div class="metric-card"><div class="metric-label">Quality</div><div class="metric-value" id="cal-quality">--</div></div></div>
                        </div>
                        <div class="card mb-3">
                            <div class="card-header bg-dark text-white"><i class="bi bi-speedometer2"></i> Reliability Diagram & Confidence Distribution</div>
                            <div class="card-body text-center" id="cal-plot-img"></div>
                        </div>
                        <div class="card mb-3" id="cal-ood-section">
                            <div class="card-header"><i class="bi bi-globe2"></i> Out-of-Distribution Detection per Well (Mahalanobis Distance)</div>
                            <div class="card-body p-0">
                                <table class="table table-hover table-sm mb-0">
                                    <thead class="table-light"><tr><th>Well</th><th>Mean Mahal.</th><th>Max Mahal.</th><th>% OOD</th><th>Samples</th><th>Severity</th></tr></thead>
                                    <tbody id="cal-ood-body"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Overall Uncertainty Banner -->
                    <div id="ub-overall" class="d-none mb-4">
                        <div class="card" id="ub-overall-card">
                            <div class="card-body text-center py-4">
                                <h2 id="ub-level" class="mb-2"></h2>
                                <div class="fs-4 fw-bold mb-2" id="ub-total-score"></div>
                                <p id="ub-dominant" class="text-muted mb-0"></p>
                            </div>
                        </div>
                    </div>

                    <!-- Stakeholder Summary -->
                    <div id="ub-summary" class="d-none mb-4">
                        <div class="card border-primary">
                            <div class="card-header bg-primary text-white">
                                <i class="bi bi-megaphone"></i> What This Means
                            </div>
                            <div class="card-body" id="ub-summary-body"></div>
                        </div>
                    </div>

                    <!-- Source Rankings -->
                    <div id="ub-sources" class="d-none mb-4">
                        <div class="card">
                            <div class="card-header"><i class="bi bi-sort-down"></i> Uncertainty Sources (Ranked by Impact)</div>
                            <div class="card-body" id="ub-sources-body"></div>
                        </div>
                    </div>

                    <!-- Recommended Actions -->
                    <div id="ub-actions" class="d-none">
                        <div class="card border-success">
                            <div class="card-header bg-success text-white">
                                <i class="bi bi-signpost-split"></i> Recommended Actions (Priority Order)
                            </div>
                            <div class="card-body" id="ub-actions-body"></div>
                        </div>
                    </div>

                    <!-- Stakeholder Uncertainty Dashboard -->
                    <hr class="my-4">
                    <h5 class="mb-3"><i class="bi bi-speedometer"></i> Quick Confidence Dashboard</h5>
                    <p class="text-muted small">One-glance confidence check across 5 key signals. Designed for non-technical stakeholders.</p>

                    <button class="btn btn-warning btn-sm mb-3" onclick="runUncertaintyDashboard()">
                        <i class="bi bi-lightning"></i> Run Quick Confidence Check
                    </button>

                    <div id="ud-results" class="d-none">
                        <!-- Overall Confidence Grade -->
                        <div class="card mb-3" id="ud-overall-card">
                            <div class="card-body text-center py-4">
                                <div class="small text-muted mb-1">OVERALL CONFIDENCE</div>
                                <h1 id="ud-grade" class="display-4 fw-bold mb-1">--</h1>
                                <div class="fs-5" id="ud-score">--</div>
                                <p class="mt-2 mb-0" id="ud-advice"></p>
                            </div>
                        </div>

                        <!-- Signal Cards -->
                        <div class="row g-3 mb-3" id="ud-signals"></div>
                    </div>

                    <!-- Prediction Trustworthiness Report -->
                    <hr class="my-4">
                    <h5 class="mb-3"><i class="bi bi-clipboard-check"></i> Prediction Trustworthiness Report</h5>
                    <p class="text-muted small">Comprehensive reliability assessment across 5 dimensions: data quality, cross-validation stability, calibration, validity prefilter, and class balance. Answers: "Can I trust these predictions?"</p>

                    <button class="btn btn-primary btn-sm mb-3" onclick="runTrustworthinessReport()">
                        <i class="bi bi-search"></i> Run Full Trustworthiness Audit
                    </button>

                    <div id="tr-results" class="d-none">
                        <!-- Overall trust level -->
                        <div id="tr-overall" class="card mb-3">
                            <div class="card-body text-center py-4">
                                <div class="small text-muted mb-1">PREDICTION TRUSTWORTHINESS</div>
                                <h2 id="tr-trust-level" class="fw-bold mb-1">--</h2>
                                <div class="fs-5" id="tr-score">--</div>
                                <p class="mt-2 mb-0" id="tr-advice"></p>
                            </div>
                        </div>

                        <!-- Check cards -->
                        <div class="row g-3 mb-3" id="tr-checks"></div>

                        <!-- All issues list -->
                        <div id="tr-issues-section" class="d-none">
                            <h6 class="mt-3"><i class="bi bi-exclamation-triangle"></i> Issues Found</h6>
                            <div id="tr-issues"></div>
                        </div>
                    </div>

                    <!-- Negative Scenario Check -->
                    <div class="card mb-4 border-danger mt-4">
                        <div class="card-header bg-danger bg-opacity-10">
                            <i class="bi bi-shield-exclamation"></i> Negative Scenario Check
                            <small class="text-muted ms-2">Known failure modes in geostress analysis</small>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small mb-2">
                                Checks your data against 8 known failure scenarios from industry experience.
                                Each triggered scenario includes evidence, consequences, and recommended actions.
                            </p>
                            <button class="btn btn-outline-danger btn-sm mb-3" onclick="runScenarioCheck()">
                                <i class="bi bi-shield-check"></i> Run Scenario Check
                            </button>
                            <button class="btn btn-outline-secondary btn-sm mb-3 ms-2" onclick="viewScenarioLibrary()">
                                <i class="bi bi-book"></i> View Full Library
                            </button>
                            <div id="sc-results" class="d-none">
                                <div id="sc-overall" class="alert mb-3 text-center">
                                    <h5 id="sc-status" class="fw-bold mb-1">--</h5>
                                    <span id="sc-summary" class="small"></span>
                                </div>
                                <div id="sc-triggered"></div>
                                <div id="sc-safe" class="d-none mt-3">
                                    <h6 class="text-success"><i class="bi bi-check-circle"></i> Passed Checks</h6>
                                    <div id="sc-safe-list"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ═══════ Well Comparison Tab ═══════ -->
                <div id="tab-wells" class="tab-content">
                    <h5 class="mb-3">Multi-Well Comparison</h5>
                    <p class="text-muted">Compare stress fields, model performance, and data quality across wells.</p>

                    <button class="btn btn-primary btn-sm mb-3" onclick="runWellComparison()">
                        <i class="bi bi-building"></i> Compare Wells
                    </button>

                    <!-- Consistency Checks -->
                    <div id="wells-consistency" class="d-none mb-4">
                        <div class="card">
                            <div class="card-header"><i class="bi bi-check2-all"></i> Consistency Checks</div>
                            <div class="card-body" id="wells-consistency-body"></div>
                        </div>
                    </div>

                    <!-- Well Results Table -->
                    <div id="wells-table" class="d-none mb-4">
                        <div class="card">
                            <div class="card-header"><i class="bi bi-table"></i> Per-Well Results</div>
                            <div class="card-body" id="wells-table-body"></div>
                        </div>
                    </div>

                    <!-- Cross-Validation -->
                    <div id="wells-crossval" class="d-none">
                        <div class="card">
                            <div class="card-header"><i class="bi bi-arrow-left-right"></i> Cross-Well Classification Accuracy</div>
                            <div class="card-body" id="wells-crossval-body"></div>
                        </div>
                    </div>
                </div>

                <!-- ═══════ Well Report Tab ═══════ -->
                <div id="tab-report" class="tab-content">
                    <h5 class="mb-3">Stakeholder Well Report</h5>
                    <p class="text-muted">Generate a comprehensive report for printing or stakeholder presentation.</p>

                    <div class="d-flex gap-2 mb-3">
                        <button class="btn btn-primary btn-sm" onclick="generateReport()">
                            <i class="bi bi-file-earmark-text"></i> Generate Report
                        </button>
                        <button class="btn btn-outline-secondary btn-sm d-none" id="btn-print-report" onclick="window.print()">
                            <i class="bi bi-printer"></i> Print Report
                        </button>
                    </div>

                    <div id="report-content" class="d-none">
                        <!-- Executive Summary -->
                        <div class="card mb-3 border-primary">
                            <div class="card-header bg-primary text-white"><i class="bi bi-file-text"></i> Executive Summary</div>
                            <div class="card-body fs-6" id="report-exec-summary"></div>
                        </div>

                        <!-- Stress State -->
                        <div class="card mb-3">
                            <div class="card-header"><i class="bi bi-arrows-angle-expand"></i> Stress State</div>
                            <div class="card-body" id="report-stress"></div>
                        </div>

                        <!-- Risk Assessment -->
                        <div class="card mb-3">
                            <div class="card-header"><i class="bi bi-shield-exclamation"></i> Risk Assessment</div>
                            <div class="card-body" id="report-risk"></div>
                        </div>

                        <!-- Recommendations -->
                        <div class="card mb-3 border-success">
                            <div class="card-header bg-success text-white"><i class="bi bi-signpost-split"></i> Operational Recommendations</div>
                            <div class="card-body" id="report-recommendations"></div>
                        </div>

                        <!-- Data Quality -->
                        <div class="card mb-3">
                            <div class="card-header"><i class="bi bi-clipboard-data"></i> Data Quality</div>
                            <div class="card-body" id="report-quality"></div>
                        </div>
                    </div>
                </div>

                <!-- Calibration Tab -->
                <div id="tab-calibration" class="tab-content">
                    <h5 class="mb-3">Model Calibration Assessment</h5>
                    <p class="text-muted">Are the model's confidence values reliable? Calibration measures whether "80% confident" truly means 80% accurate.</p>

                    <div class="d-flex gap-2 mb-3">
                        <button class="btn btn-primary btn-sm" onclick="runCalibration()">
                            <i class="bi bi-bullseye"></i> Run Calibration Check
                        </button>
                        <button class="btn btn-outline-secondary btn-sm" onclick="runOODCheck()">
                            <i class="bi bi-exclamation-triangle"></i> Distribution Check
                        </button>
                        <button class="btn btn-outline-info btn-sm" onclick="runDataRecommendations()">
                            <i class="bi bi-lightbulb"></i> Data Recommendations
                        </button>
                    </div>

                    <!-- Calibration Results -->
                    <div id="calibration-results" class="d-none">
                        <div class="row mb-3" id="calibration-metrics"></div>
                        <div class="card mb-3">
                            <div class="card-header"><i class="bi bi-bar-chart"></i> Confidence vs. Accuracy</div>
                            <div class="card-body" id="calibration-bins"></div>
                        </div>
                        <div class="card mb-3">
                            <div class="card-header"><i class="bi bi-diagram-3"></i> Per-Class Calibration</div>
                            <div class="card-body" id="calibration-per-class"></div>
                        </div>
                    </div>

                    <!-- OOD Results -->
                    <div id="ood-results" class="d-none">
                        <div class="card mb-3" id="ood-card"></div>
                    </div>

                    <!-- Data Recommendations -->
                    <div id="data-rec-results" class="d-none">
                        <div id="data-rec-content"></div>
                    </div>

                    <hr class="my-4">

                    <!-- Field Calibration Section -->
                    <h5 class="mb-3"><i class="bi bi-geo-alt"></i> Field Stress Calibration</h5>
                    <p class="text-muted small">Compare model predictions against actual field measurements (LOT, XLOT, minifrac). This is the gold standard for validating geomechanical models in the oil industry.</p>

                    <div class="card mb-3">
                        <div class="card-header"><i class="bi bi-plus-circle"></i> Add Field Measurement</div>
                        <div class="card-body">
                            <div class="row g-2">
                                <div class="col-md-3">
                                    <label class="form-label small">Test Type</label>
                                    <select class="form-select form-select-sm" id="field-test-type">
                                        <option value="LOT">LOT (Leak-Off Test)</option>
                                        <option value="XLOT">XLOT (Extended LOT)</option>
                                        <option value="minifrac">Minifrac</option>
                                        <option value="hydraulic_fracture">Hydraulic Fracture</option>
                                        <option value="breakout">Borehole Breakout</option>
                                        <option value="DIF">Drilling-Induced Fracture</option>
                                    </select>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label small">Depth (m)</label>
                                    <input type="number" class="form-control form-control-sm" id="field-depth" value="3000" min="0" max="15000">
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label small">Stress (MPa)</label>
                                    <input type="number" class="form-control form-control-sm" id="field-stress" value="50" min="0" max="200" step="0.1">
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label small">Direction</label>
                                    <select class="form-select form-select-sm" id="field-direction">
                                        <option value="Shmin">Shmin (from LOT)</option>
                                        <option value="SHmax">SHmax</option>
                                        <option value="Sv">Sv (overburden)</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label small">Azimuth (optional)</label>
                                    <input type="number" class="form-control form-control-sm" id="field-azimuth" placeholder="0-360" min="0" max="360">
                                </div>
                            </div>
                            <div class="row g-2 mt-2">
                                <div class="col-md-9">
                                    <input type="text" class="form-control form-control-sm" id="field-notes" placeholder="Notes (e.g., formation name, test quality...)">
                                </div>
                                <div class="col-md-3">
                                    <button class="btn btn-success btn-sm w-100" onclick="addFieldMeasurement()">
                                        <i class="bi bi-plus-lg"></i> Add Measurement
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="d-flex gap-2 mb-3">
                        <button class="btn btn-primary btn-sm" onclick="runFieldValidation()">
                            <i class="bi bi-check2-circle"></i> Validate Against Field Data
                        </button>
                        <button class="btn btn-outline-secondary btn-sm" onclick="loadFieldMeasurements()">
                            <i class="bi bi-list-ul"></i> View All Measurements
                        </button>
                    </div>

                    <div id="field-validation-results" class="d-none">
                        <div class="row mb-3" id="field-cal-metrics"></div>
                        <div class="card mb-3">
                            <div class="card-header"><i class="bi bi-table"></i> Measurement vs Prediction</div>
                            <div class="card-body" id="field-cal-table"></div>
                        </div>
                        <div class="card mb-3">
                            <div class="card-header"><i class="bi bi-info-circle"></i> Recommendations</div>
                            <div class="card-body" id="field-cal-recommendations"></div>
                        </div>
                    </div>
                </div>

                <!-- Decision Support Tab -->
                <div id="tab-decision" class="tab-content">
                    <h5 class="mb-3"><i class="bi bi-signpost-split"></i> Decision Support Matrix</h5>
                    <p class="text-muted small">Compares all stress regime options side-by-side with go/no-go recommendations, trade-offs, and confidence levels. Designed for non-technical stakeholders making drilling decisions.</p>

                    <div class="d-flex gap-2 mb-3">
                        <button class="btn btn-primary btn-sm" onclick="runDecisionMatrix()">
                            <i class="bi bi-play-fill"></i> Generate Decision Matrix
                        </button>
                    </div>

                    <div id="dm-results" class="d-none">
                        <!-- Recommended Action -->
                        <div id="dm-action" class="alert alert-primary mb-3">
                            <i class="bi bi-lightbulb-fill me-1"></i>
                            <strong>Recommended Action:</strong>
                            <span id="dm-action-text"></span>
                        </div>

                        <!-- Confidence Assessment -->
                        <div class="row g-3 mb-3">
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-label">Overall Confidence</div>
                                    <div class="metric-value" id="dm-confidence">--</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-label">Data Quality</div>
                                    <div class="metric-value" id="dm-quality">--</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-label">Regime Certainty</div>
                                    <div class="metric-value" id="dm-regime-cert">--</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="metric-card">
                                    <div class="metric-label">Fractures</div>
                                    <div class="metric-value" id="dm-n-frac">--</div>
                                </div>
                            </div>
                        </div>

                        <!-- Regime Options Table -->
                        <div class="card mb-3">
                            <div class="card-header"><i class="bi bi-table"></i> Regime Comparison</div>
                            <div class="card-body p-0">
                                <table class="table table-sm table-striped mb-0" id="dm-options-table">
                                    <thead><tr>
                                        <th>Regime</th><th>&sigma;1</th><th>&sigma;3</th><th>SHmax</th><th>Misfit</th><th>Crit. Stressed</th><th>Risk</th><th>Go/No-Go</th>
                                    </tr></thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Risk Comparison -->
                        <div id="dm-risk-comparison" class="d-none row g-3 mb-3">
                            <div class="col-md-4">
                                <div class="card h-100 border-success">
                                    <div class="card-body text-center">
                                        <div class="small text-muted">Safest Option</div>
                                        <div class="fw-bold" id="dm-safest">--</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card h-100 border-primary">
                                    <div class="card-body text-center">
                                        <div class="small text-muted">Best Data Fit</div>
                                        <div class="fw-bold" id="dm-best-fit">--</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card h-100 border-warning">
                                    <div class="card-body text-center">
                                        <div class="small text-muted">Most Conservative</div>
                                        <div class="fw-bold" id="dm-conservative">--</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Trade-offs -->
                        <div id="dm-tradeoffs" class="d-none">
                            <h6><i class="bi bi-exclamation-triangle"></i> Key Trade-offs</h6>
                            <div id="dm-tradeoff-list"></div>
                        </div>
                    </div>

                    <!-- Expert Stress Ranking (RLHF) -->
                    <hr class="my-4">
                    <h5 class="mb-3"><i class="bi bi-award"></i> Expert Stress Solution Ranking</h5>
                    <p class="text-muted small">Compare all 3 regime solutions with Mohr circles. Select the one you trust most — your feedback improves future auto-detection.</p>

                    <div class="d-flex gap-2 mb-3">
                        <button class="btn btn-outline-primary btn-sm" onclick="runExpertRanking()">
                            <i class="bi bi-play-fill"></i> Generate Solutions for Review
                        </button>
                    </div>

                    <div id="esr-results" class="d-none">
                        <div id="esr-auto-summary" class="alert alert-info mb-3">
                            <i class="bi bi-robot me-1"></i>
                            <strong>Auto-Detection:</strong> <span id="esr-auto-text"></span>
                        </div>

                        <div class="row g-3 mb-3" id="esr-solutions"></div>

                        <!-- Expert Selection Form -->
                        <div class="card border-primary mb-3">
                            <div class="card-header bg-primary text-white">
                                <i class="bi bi-hand-thumbs-up"></i> Your Expert Assessment
                            </div>
                            <div class="card-body">
                                <div class="row g-3">
                                    <div class="col-md-4">
                                        <label class="form-label fw-bold">Preferred Regime</label>
                                        <select id="esr-select-regime" class="form-select">
                                            <option value="">-- Select --</option>
                                            <option value="normal">Normal</option>
                                            <option value="strike_slip">Strike-Slip</option>
                                            <option value="thrust">Thrust</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label fw-bold">Your Confidence</label>
                                        <select id="esr-select-confidence" class="form-select">
                                            <option value="LOW">Low — guessing</option>
                                            <option value="MODERATE" selected>Moderate — plausible</option>
                                            <option value="HIGH">High — field evidence supports this</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label fw-bold">Reason (optional)</label>
                                        <input type="text" id="esr-reason" class="form-control" placeholder="e.g., Regional geology suggests normal faulting">
                                    </div>
                                </div>
                                <button class="btn btn-primary btn-sm mt-3" onclick="submitExpertSelection()">
                                    <i class="bi bi-check2-circle"></i> Submit Expert Selection
                                </button>
                                <div id="esr-submit-msg" class="small mt-2 d-none"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Preference-Weighted Regime (RLHF Loop) -->
                    <hr class="my-4">
                    <h5 class="mb-3"><i class="bi bi-arrow-repeat"></i> Preference-Weighted Recommendation</h5>
                    <p class="text-muted small">Combines physics-based auto-detection with expert consensus. If enough experts have voted, their preferences influence the recommendation.</p>

                    <div class="d-flex gap-2 mb-3">
                        <button class="btn btn-outline-success btn-sm" onclick="runPreferenceWeightedRegime()">
                            <i class="bi bi-play-fill"></i> Get Weighted Recommendation
                        </button>
                    </div>

                    <div id="pwr-results" class="d-none">
                        <div id="pwr-recommendation" class="alert alert-info mb-3"></div>
                        <div id="pwr-blend-source" class="small text-muted mb-3"></div>
                        <div class="row g-3 mb-3" id="pwr-comparison"></div>
                    </div>

                    <!-- Regime Stability Check -->
                    <hr class="my-4">
                    <h5 class="mb-3"><i class="bi bi-shield-exclamation"></i> Regime Stability Check</h5>
                    <p class="text-muted small">Tests if the recommended regime changes under realistic parameter variations (pore pressure ±5-10 MPa, depth ±200m). Unstable regimes should NOT be trusted for operational decisions.</p>

                    <div class="d-flex gap-2 mb-3">
                        <button class="btn btn-outline-danger btn-sm" onclick="runRegimeStability()">
                            <i class="bi bi-shield-check"></i> Run Stability Check
                        </button>
                    </div>

                    <div id="rs-results" class="d-none">
                        <div id="rs-grade" class="card mb-3">
                            <div class="card-body text-center py-3">
                                <div id="rs-stability-label" class="display-6 fw-bold">--</div>
                                <div id="rs-baseline" class="text-muted mt-1"></div>
                                <div id="rs-message" class="mt-2"></div>
                                <div id="rs-summary" class="small text-muted mt-1"></div>
                            </div>
                        </div>

                        <table class="table table-sm table-hover">
                            <thead>
                                <tr>
                                    <th>Perturbation</th>
                                    <th>Regime</th>
                                    <th>Confidence</th>
                                    <th>Misfit Ratio</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="rs-perturbation-tbody"></tbody>
                        </table>
                    </div>

                    <!-- Expert Preference History -->
                    <hr class="my-4">
                    <h5 class="mb-3"><i class="bi bi-clock-history"></i> Expert Preference History</h5>
                    <p class="text-muted small">View accumulated expert selections and how consensus has evolved over time.</p>

                    <div class="d-flex gap-2 mb-3">
                        <button class="btn btn-outline-info btn-sm" onclick="loadExpertHistory()">
                            <i class="bi bi-list-check"></i> Load History
                        </button>
                        <button class="btn btn-outline-secondary btn-sm" onclick="resetExpertPreferences()">
                            <i class="bi bi-trash"></i> Reset Preferences
                        </button>
                    </div>

                    <div id="eph-results" class="d-none">
                        <div class="mb-3" id="eph-consensus"></div>
                        <div class="row g-3 mb-3" id="eph-well-summaries"></div>

                        <div class="card mb-3">
                            <div class="card-header">Selection Timeline</div>
                            <div class="card-body p-0">
                                <table class="table table-sm mb-0">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Timestamp</th>
                                            <th>Selected</th>
                                            <th>Dominant</th>
                                            <th>Consensus %</th>
                                        </tr>
                                    </thead>
                                    <tbody id="eph-timeline-tbody"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Scenario Comparison Tab -->
                <div id="tab-scenarios" class="tab-content">
                    <h5 class="mb-3"><i class="bi bi-sliders"></i> What-If Scenario Comparison</h5>
                    <p class="text-muted small">Compare different stress regime assumptions side-by-side. See how pore pressure and regime choice affect drilling decisions. Define 2-6 scenarios below.</p>

                    <div class="card mb-3">
                        <div class="card-header">Define Scenarios</div>
                        <div class="card-body">
                            <div id="scenario-list">
                                <div class="row g-2 mb-2 scenario-row">
                                    <div class="col-md-3"><input type="text" class="form-control form-control-sm scenario-name" placeholder="Scenario name" value="Normal Fault"></div>
                                    <div class="col-md-3">
                                        <select class="form-select form-select-sm scenario-regime">
                                            <option value="normal" selected>Normal</option>
                                            <option value="strike_slip">Strike-Slip</option>
                                            <option value="thrust">Thrust</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3"><input type="number" class="form-control form-control-sm scenario-pp" placeholder="Pore pressure (MPa)" value=""></div>
                                    <div class="col-md-3"><button class="btn btn-outline-danger btn-sm" onclick="removeScenario(this)"><i class="bi bi-trash"></i></button></div>
                                </div>
                                <div class="row g-2 mb-2 scenario-row">
                                    <div class="col-md-3"><input type="text" class="form-control form-control-sm scenario-name" placeholder="Scenario name" value="Strike-Slip"></div>
                                    <div class="col-md-3">
                                        <select class="form-select form-select-sm scenario-regime">
                                            <option value="normal">Normal</option>
                                            <option value="strike_slip" selected>Strike-Slip</option>
                                            <option value="thrust">Thrust</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3"><input type="number" class="form-control form-control-sm scenario-pp" placeholder="Pore pressure (MPa)" value=""></div>
                                    <div class="col-md-3"><button class="btn btn-outline-danger btn-sm" onclick="removeScenario(this)"><i class="bi bi-trash"></i></button></div>
                                </div>
                                <div class="row g-2 mb-2 scenario-row">
                                    <div class="col-md-3"><input type="text" class="form-control form-control-sm scenario-name" placeholder="Scenario name" value="Thrust"></div>
                                    <div class="col-md-3">
                                        <select class="form-select form-select-sm scenario-regime">
                                            <option value="normal">Normal</option>
                                            <option value="strike_slip">Strike-Slip</option>
                                            <option value="thrust" selected>Thrust</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3"><input type="number" class="form-control form-control-sm scenario-pp" placeholder="Pore pressure (MPa)" value=""></div>
                                    <div class="col-md-3"><button class="btn btn-outline-danger btn-sm" onclick="removeScenario(this)"><i class="bi bi-trash"></i></button></div>
                                </div>
                            </div>
                            <div class="d-flex gap-2 mt-2">
                                <button class="btn btn-outline-secondary btn-sm" onclick="addScenario()"><i class="bi bi-plus"></i> Add Scenario</button>
                                <button class="btn btn-primary btn-sm" onclick="runScenarios()"><i class="bi bi-play-fill"></i> Compare Scenarios</button>
                            </div>
                        </div>
                    </div>

                    <div id="scenario-results" class="d-none">
                        <div id="scenario-recommendation" class="alert alert-success mb-3"></div>
                        <div id="scenario-sensitivity-msg" class="alert alert-warning mb-3 small"></div>

                        <div class="card mb-3">
                            <div class="card-header">Scenario Results</div>
                            <div class="card-body p-0">
                                <table class="table table-sm table-striped mb-0" id="scenario-table">
                                    <thead><tr>
                                        <th>Scenario</th><th>Regime</th><th>&sigma;1</th><th>&sigma;3</th><th>SHmax</th><th>R</th><th>&mu;</th><th>Pp (MPa)</th><th>Misfit</th><th>Crit. Stressed %</th>
                                    </tr></thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>

                        <div id="scenario-spread" class="d-none">
                            <div class="card">
                                <div class="card-header">Parameter Sensitivity Across Scenarios</div>
                                <div class="card-body p-0">
                                    <table class="table table-sm mb-0" id="scenario-spread-table">
                                        <thead><tr><th>Parameter</th><th>Min</th><th>Max</th><th>Range</th><th>CV %</th></tr></thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Monte Carlo Tab -->
                <div id="tab-montecarlo" class="tab-content">
                    <h5 class="mb-3"><i class="bi bi-dice-5"></i> Monte Carlo Uncertainty Propagation</h5>
                    <p class="text-muted">How do measurement errors affect your results? This propagates realistic uncertainties (azimuth ±5°, dip ±3°, depth ±2m) through the full inversion to quantify output precision.</p>

                    <div class="row g-3 mb-3">
                        <div class="col-md-2">
                            <label class="form-label small">Simulations</label>
                            <input type="number" id="mc-nsims" class="form-control form-control-sm" value="200" min="50" max="1000">
                        </div>
                        <div class="col-md-2">
                            <label class="form-label small">Az σ (°)</label>
                            <input type="number" id="mc-az-std" class="form-control form-control-sm" value="5" min="1" max="20" step="0.5">
                        </div>
                        <div class="col-md-2">
                            <label class="form-label small">Dip σ (°)</label>
                            <input type="number" id="mc-dip-std" class="form-control form-control-sm" value="3" min="1" max="15" step="0.5">
                        </div>
                        <div class="col-md-2">
                            <label class="form-label small">Depth σ (m)</label>
                            <input type="number" id="mc-dep-std" class="form-control form-control-sm" value="2" min="0.5" max="20" step="0.5">
                        </div>
                        <div class="col-md-2 d-flex align-items-end">
                            <button class="btn btn-primary btn-sm w-100" onclick="runMonteCarlo()">
                                <i class="bi bi-dice-5"></i> Run
                            </button>
                        </div>
                    </div>

                    <div id="mc-results" class="d-none">
                        <!-- Reliability Banner -->
                        <div id="mc-reliability" class="alert mb-3"></div>

                        <!-- Statistics Table -->
                        <div class="card mb-3">
                            <div class="card-header"><i class="bi bi-table"></i> Output Distributions (95% CI)</div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-sm small">
                                        <thead><tr><th>Parameter</th><th>Mean</th><th>Median</th><th>Std Dev</th><th>95% CI Lower</th><th>95% CI Upper</th><th>CI Width</th></tr></thead>
                                        <tbody id="mc-stats-body"></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <!-- Sensitivity Ranking -->
                        <div class="card mb-3">
                            <div class="card-header"><i class="bi bi-sort-down"></i> Input Sensitivity Ranking</div>
                            <div class="card-body" id="mc-sensitivity-body"></div>
                        </div>
                    </div>
                </div>

                <!-- Data Validation Tab -->
                <div id="tab-validation" class="tab-content">
                    <h5 class="mb-3"><i class="bi bi-check2-all"></i> Domain Constraint Validation</h5>
                    <p class="text-muted">Validates your data against physical and geological constraints before analysis. Catches impossible values, unusual combinations, and data anomalies.</p>

                    <div class="d-flex gap-2 mb-3">
                        <button class="btn btn-primary btn-sm" onclick="runDomainValidation()">
                            <i class="bi bi-check2-all"></i> Validate Data
                        </button>
                        <button class="btn btn-outline-primary btn-sm" onclick="runCrossWellCV()">
                            <i class="bi bi-building"></i> Cross-Well Validation
                        </button>
                        <button class="btn btn-outline-primary btn-sm" onclick="runExpertEnsemble()">
                            <i class="bi bi-people"></i> Expert Ensemble
                        </button>
                    </div>

                    <!-- Empty State -->
                    <div id="val-empty" class="empty-state text-center py-4">
                        <i class="bi bi-check2-all" style="font-size:2.5rem;opacity:0.3"></i>
                        <h6 class="mt-2 text-muted">No Validation Run Yet</h6>
                        <p class="small text-muted mb-0">Click <strong>Validate Data</strong> to check your fracture data against physical and geological constraints before running analyses.</p>
                    </div>

                    <!-- Domain Validation Results -->
                    <div id="val-results" class="d-none mb-4">
                        <div id="val-status" class="alert mb-3"></div>
                        <div id="val-issues-body"></div>
                    </div>

                    <!-- Cross-Well CV Results -->
                    <div id="cwcv-results" class="d-none mb-4">
                        <div class="card">
                            <div class="card-header"><i class="bi bi-building"></i> Leave-One-Well-Out Cross-Validation</div>
                            <div class="card-body">
                                <div id="cwcv-transfer" class="alert mb-3"></div>
                                <div class="table-responsive">
                                    <table class="table table-sm small">
                                        <thead><tr><th>Well (Held Out)</th><th>Train</th><th>Test</th><th>Accuracy</th><th>Balanced Acc</th><th>Per-Class F1</th></tr></thead>
                                        <tbody id="cwcv-table-body"></tbody>
                                    </table>
                                </div>
                                <h6 class="small fw-bold mt-3">Within-Well Performance</h6>
                                <div class="table-responsive">
                                    <table class="table table-sm small">
                                        <thead><tr><th>Well</th><th>Samples</th><th>Classes</th><th>CV Accuracy</th></tr></thead>
                                        <tbody id="cwcv-within-body"></tbody>
                                    </table>
                                </div>
                                <div id="cwcv-recommendation" class="mt-3 small text-muted"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Expert Ensemble Results -->
                    <div id="ee-results" class="d-none mb-4">
                        <div class="card">
                            <div class="card-header"><i class="bi bi-people"></i> Expert-Weighted Ensemble (RLHF-style)</div>
                            <div class="card-body">
                                <div id="ee-summary" class="mb-3"></div>
                                <div class="row g-3 mb-3">
                                    <div class="col-md-6">
                                        <h6 class="small fw-bold">Model Weights</h6>
                                        <div class="table-responsive">
                                            <table class="table table-sm small">
                                                <thead><tr><th>Model</th><th>Base Weight</th><th>Expert Weight</th><th>CV Accuracy</th></tr></thead>
                                                <tbody id="ee-weights-body"></tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <h6 class="small fw-bold">Per-Class Impact</h6>
                                        <div class="table-responsive">
                                            <table class="table table-sm small">
                                                <thead><tr><th>Class</th><th>Equal F1</th><th>Expert F1</th><th>Delta</th></tr></thead>
                                                <tbody id="ee-class-body"></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Audit Trail Tab -->
                <div id="tab-audit" class="tab-content">
                    <h5 class="mb-3"><i class="bi bi-shield-check"></i> Prediction Audit Trail</h5>
                    <p class="text-muted small">Every analysis action is recorded with timestamp, parameters, and result hash for regulatory compliance and traceability. Records are integrity-verified with SHA-256 hashes.</p>

                    <div class="d-flex gap-2 mb-3">
                        <button class="btn btn-primary btn-sm" onclick="loadAuditLog()">
                            <i class="bi bi-arrow-clockwise"></i> Refresh Log
                        </button>
                        <button class="btn btn-outline-primary btn-sm" onclick="exportAuditLog()">
                            <i class="bi bi-download"></i> Export CSV
                        </button>
                    </div>

                    <div class="row g-3 mb-3">
                        <div class="col-md-4">
                            <div class="metric-card">
                                <div class="metric-label">Total Records</div>
                                <div class="metric-value" id="audit-total">0</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="metric-card">
                                <div class="metric-label">App Version</div>
                                <div class="metric-value" id="audit-version">v3.84</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="metric-card">
                                <div class="metric-label">Session Start</div>
                                <div class="metric-value" id="audit-session-start" style="font-size:0.9rem">--</div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">Recent Analysis Actions</div>
                        <div class="card-body p-0">
                            <table class="table table-sm table-striped mb-0" id="audit-table">
                                <thead><tr>
                                    <th>#</th><th>Time</th><th>Action</th><th>Well</th><th>Source</th><th>Elapsed</th><th>Hash</th>
                                </tr></thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Glossary Tab -->
                <!-- Research & Methods Tab -->
                <div id="tab-research" class="tab-content">
                    <h5 class="mb-3"><i class="bi bi-mortarboard"></i> Scientific Methods & Research Basis</h5>
                    <p class="text-muted">Understanding what factors are accounted for and the scientific basis of each analysis. Based on peer-reviewed geomechanics research through 2025-2026.</p>

                    <div class="row g-2 mb-3">
                        <div class="col-auto">
                            <button class="btn btn-primary btn-sm" onclick="loadResearchMethods()">
                                <i class="bi bi-arrow-clockwise"></i> Load Methods
                            </button>
                        </div>
                        <div class="col-auto">
                            <div class="btn-group">
                                <button class="btn btn-outline-warning btn-sm dropdown-toggle" data-bs-toggle="dropdown">
                                    <i class="bi bi-gear-wide"></i> Physics Checks
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#" onclick="runPhysicsCheck();return false"><i class="bi bi-gear-wide me-2"></i>Constraint Validation</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="runPhysicsPredict();return false"><i class="bi bi-shield-check me-2"></i>Physics-Constrained Predict</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-auto">
                            <div class="btn-group">
                                <button class="btn btn-outline-danger btn-sm dropdown-toggle" data-bs-toggle="dropdown">
                                    <i class="bi bi-bug"></i> ML Diagnostics
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#" onclick="runMisclassification();return false"><i class="bi bi-bug me-2"></i>Misclassification Analysis</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="runModelBias();return false"><i class="bi bi-sliders2 me-2"></i>Bias Detection</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="runReliabilityReport();return false"><i class="bi bi-award me-2"></i>Reliability Report</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-auto">
                            <button class="btn btn-danger btn-sm" onclick="runPredictWithAbstention()">
                                <i class="bi bi-shield-exclamation"></i> Abstention Predict
                            </button>
                        </div>
                    </div>
                    <!-- Abstention threshold slider -->
                    <div class="mt-2 px-2" style="max-width:350px">
                        <label class="form-label small mb-0">Abstention Threshold:
                            <span id="abstention-threshold-val">60%</span></label>
                        <input type="range" class="form-range form-range-sm" id="abstention-threshold"
                               min="0.30" max="0.95" step="0.05" value="0.60">
                    </div>

                    <div id="research-body"></div>

                    <!-- Model Bias Results -->
                    <div id="bias-results" class="d-none mt-3">
                        <div class="card">
                            <div class="card-header"><i class="bi bi-sliders2"></i> Model Bias Detection</div>
                            <div class="card-body" id="bias-body"></div>
                        </div>
                    </div>

                    <!-- Reliability Report Results -->
                    <div id="reliability-results" class="d-none mt-3">
                        <div class="card border-warning">
                            <div class="card-header bg-warning text-dark"><i class="bi bi-award"></i> Prediction Reliability Report</div>
                            <div class="card-body" id="reliability-body"></div>
                        </div>
                    </div>

                    <!-- Prediction Abstention Results -->
                    <div id="abstention-results" class="d-none mt-3">
                        <div class="card border-danger">
                            <div class="card-header bg-danger text-white">
                                <i class="bi bi-shield-exclamation"></i> Prediction Abstention — Safety-Critical Refusal
                            </div>
                            <div class="card-body" id="abstention-body"></div>
                        </div>
                    </div>

                    <!-- Physics Constrained Prediction Results -->
                    <div id="physics-predict-results" class="d-none mt-3">
                        <div class="card">
                            <div class="card-header"><i class="bi bi-shield-check"></i> Physics-Constrained Prediction</div>
                            <div class="card-body" id="physics-predict-body"></div>
                        </div>
                    </div>

                    <!-- Misclassification Analysis Results -->
                    <div id="misclass-results" class="d-none mt-3">
                        <div class="card">
                            <div class="card-header"><i class="bi bi-bug"></i> Misclassification Analysis</div>
                            <div class="card-body" id="misclass-body"></div>
                        </div>
                    </div>

                    <!-- Physics Check Results -->
                    <div id="physics-results" class="d-none mt-3">
                        <div class="card">
                            <div class="card-header"><i class="bi bi-gear-wide"></i> Physics Constraint Validation</div>
                            <div class="card-body">
                                <div id="physics-status" class="alert mb-3"></div>
                                <div id="physics-issues"></div>
                                <div id="physics-constraints" class="mt-3"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="tab-glossary" class="tab-content">
                    <h5 class="mb-3"><i class="bi bi-book"></i> Geomechanics Glossary & Decision Guide</h5>
                    <p class="text-muted">Plain-language explanations for non-technical stakeholders. Understand what the numbers mean before making drilling decisions.</p>

                    <!-- Stress & Pressure -->
                    <div class="card mb-3">
                        <div class="card-header bg-primary text-white"><i class="bi bi-arrows-angle-expand"></i> Stress & Pressure Terms</div>
                        <div class="card-body">
                            <dl class="row mb-0">
                                <dt class="col-sm-3">Principal Stresses (&#963;1, &#963;2, &#963;3)</dt>
                                <dd class="col-sm-9">The three main forces squeezing the rock underground, measured in MPa (megapascals). &#963;1 is the strongest, &#963;3 the weakest. <strong>Think of it as:</strong> squeezing a sponge from three sides &mdash; one direction always pushes hardest.</dd>

                                <dt class="col-sm-3">SHmax (Maximum Horizontal Stress Azimuth)</dt>
                                <dd class="col-sm-9">The compass direction of the strongest horizontal squeeze. <strong>Why it matters:</strong> Drilling perpendicular to SHmax reduces borehole instability. This is the single most important output for well planning. Reported as degrees from North (0-360).</dd>

                                <dt class="col-sm-3">R Ratio</dt>
                                <dd class="col-sm-9">How "round" vs "cigar-shaped" the stress ellipsoid is (0 to 1). R=0 means &#963;2 equals &#963;3, R=1 means &#963;2 equals &#963;1. <strong>Practical impact:</strong> R near 0.5 = all three stresses are distinct; near 0 or 1 = two stresses are similar, so stress direction is less constrained.</dd>

                                <dt class="col-sm-3">Pore Pressure (Pp)</dt>
                                <dd class="col-sm-9">The pressure of fluids (water, oil, gas) inside the rock pores, in MPa. Default estimate uses hydrostatic gradient (1020 kg/m3 water). <strong>Critical:</strong> Higher pore pressure makes fractures more likely to slip. This is consistently the #1 source of uncertainty in our analysis.</dd>

                                <dt class="col-sm-3">Overburden Stress (Sv)</dt>
                                <dd class="col-sm-9">The weight of all rock above a given depth. Calculated from rock density (2500 kg/m3) times depth times gravity. This sets the scale for all other stress estimates.</dd>
                            </dl>
                        </div>
                    </div>

                    <!-- Stress Regime -->
                    <div class="card mb-3">
                        <div class="card-header bg-info text-white"><i class="bi bi-globe"></i> Stress Regimes (Faulting Styles)</div>
                        <div class="card-body">
                            <dl class="row mb-0">
                                <dt class="col-sm-3">Normal Faulting</dt>
                                <dd class="col-sm-9">The vertical stress is the greatest (&#963;1 = Sv). Rock extends apart horizontally. <strong>Typical setting:</strong> rift basins, passive margins. Fractures tend to be steep and parallel to SHmax.</dd>

                                <dt class="col-sm-3">Strike-Slip</dt>
                                <dd class="col-sm-9">The vertical stress is intermediate (&#963;2 = Sv). Rock shears horizontally. <strong>Typical setting:</strong> transform boundaries. Both vertical and sub-horizontal fractures are common.</dd>

                                <dt class="col-sm-3">Thrust (Reverse) Faulting</dt>
                                <dd class="col-sm-9">The vertical stress is the weakest (&#963;3 = Sv). Rock compresses horizontally. <strong>Typical setting:</strong> compressional margins, fold-thrust belts. Low-angle fractures dominate.</dd>

                                <dt class="col-sm-3">Regime Confidence</dt>
                                <dd class="col-sm-9"><span class="badge bg-success">HIGH</span> = clear winner (1 regime fits much better). <span class="badge bg-warning text-dark">MODERATE</span> = likely but not definitive. <span class="badge bg-danger">LOW</span> = all regimes fit similarly; independent data (borehole breakouts, drilling-induced fractures) needed to resolve.</dd>
                            </dl>
                        </div>
                    </div>

                    <!-- Fracture Properties -->
                    <div class="card mb-3">
                        <div class="card-header bg-warning text-dark"><i class="bi bi-hurricane"></i> Fracture Properties</div>
                        <div class="card-body">
                            <dl class="row mb-0">
                                <dt class="col-sm-3">Fracture Azimuth</dt>
                                <dd class="col-sm-9">The compass direction the fracture plane faces (0-360 degrees from North). <strong>Example:</strong> Azimuth 90 = fracture faces East.</dd>

                                <dt class="col-sm-3">Fracture Dip</dt>
                                <dd class="col-sm-9">How steeply the fracture tilts from horizontal (0-90 degrees). 0 = flat; 90 = vertical.</dd>

                                <dt class="col-sm-3">Slip Tendency</dt>
                                <dd class="col-sm-9">How close a fracture is to sliding (shear stress / normal stress). <strong>Range:</strong> 0 to 1+. Values above the friction coefficient (~0.6) mean the fracture is likely sliding. <span class="text-danger fw-bold">High slip tendency = potential wellbore instability.</span></dd>

                                <dt class="col-sm-3">Dilation Tendency</dt>
                                <dd class="col-sm-9">How likely a fracture is to open and allow fluid flow (0 to 1). <strong>High values (>0.7):</strong> fracture is likely a fluid conduit. <span class="text-success fw-bold">Can be beneficial (natural fracture network) or harmful (lost circulation).</span></dd>

                                <dt class="col-sm-3">Critically Stressed</dt>
                                <dd class="col-sm-9">Fractures whose slip tendency exceeds the Mohr-Coulomb criterion. These fractures are at or past the point of failure. <strong>Operational impact:</strong> High % critically stressed = higher risk of induced seismicity, lost circulation, and wellbore instability.</dd>
                            </dl>
                        </div>
                    </div>

                    <!-- Risk Interpretation -->
                    <div class="card mb-3">
                        <div class="card-header bg-danger text-white"><i class="bi bi-shield-exclamation"></i> Risk Categories Explained</div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-sm mb-0">
                                    <thead>
                                        <tr><th>Risk Level</th><th>What It Means</th><th>Recommended Action</th></tr>
                                    </thead>
                                    <tbody>
                                        <tr class="table-success"><td><span class="badge bg-success">LOW</span></td><td>Critically stressed <20%, high data quality, good model confidence</td><td>Proceed with standard drilling program</td></tr>
                                        <tr class="table-warning"><td><span class="badge bg-warning text-dark">MODERATE</span></td><td>Some fractures at risk, moderate uncertainty</td><td>Use managed pressure drilling, plan contingencies</td></tr>
                                        <tr class="table-danger"><td><span class="badge bg-danger">HIGH</span></td><td>>30% critically stressed, low data quality or model confidence</td><td>Commission additional data before drilling. Consider alternative well trajectory.</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Model Reliability -->
                    <div class="card mb-3">
                        <div class="card-header bg-secondary text-white"><i class="bi bi-robot"></i> Understanding AI Predictions</div>
                        <div class="card-body">
                            <dl class="row mb-0">
                                <dt class="col-sm-3">Standard Accuracy</dt>
                                <dd class="col-sm-9">How often the model is correct overall. <strong>Limitation:</strong> Can be misleadingly high if one fracture type dominates. Example: if 50% of data is Vuggy, a model that always says "Vuggy" gets 50% accuracy while being useless.</dd>

                                <dt class="col-sm-3">Balanced Accuracy</dt>
                                <dd class="col-sm-9">Accuracy calculated separately for each fracture type, then averaged. <strong>More honest</strong> when class sizes differ. If standard accuracy is 88% but balanced is 56%, the model is failing on rare fracture types.</dd>

                                <dt class="col-sm-3">SMOTE (Synthetic Minority Over-sampling)</dt>
                                <dd class="col-sm-9">When some fracture types have very few samples, SMOTE creates realistic synthetic examples by interpolating between existing ones. This helps the model learn rare types. <strong>Automatically applied</strong> when class imbalance is detected.</dd>

                                <dt class="col-sm-3">Calibration (ECE)</dt>
                                <dd class="col-sm-9">Expected Calibration Error measures whether the model's confidence values are reliable. ECE <5% = excellent (confidence values can be trusted). ECE >20% = poor (don't rely on probability estimates).</dd>

                                <dt class="col-sm-3">Out-of-Distribution (OOD)</dt>
                                <dd class="col-sm-9">When you upload new data, we check if it looks similar to the training data. If the new data is "out of distribution" (different depth range, formation, etc.), model predictions will be unreliable. <span class="text-danger fw-bold">Always check OOD before trusting predictions on new data.</span></dd>

                                <dt class="col-sm-3">Overfitting</dt>
                                <dd class="col-sm-9">When a model memorizes the training data instead of learning general patterns. Measured by the gap between training accuracy and cross-validation accuracy. Gap >10% = significant overfitting risk.</dd>
                            </dl>
                        </div>
                    </div>

                    <!-- Decision Flowchart -->
                    <div class="card mb-3 border-success">
                        <div class="card-header bg-success text-white"><i class="bi bi-signpost-split"></i> Decision Flowchart: Should I Trust These Results?</div>
                        <div class="card-body">
                            <ol class="mb-0">
                                <li class="mb-2"><strong>Check Data Quality score.</strong> If grade is D or F, stop &mdash; fix data issues first.</li>
                                <li class="mb-2"><strong>Check Regime Confidence.</strong> If LOW, do not rely on SHmax direction. Collect borehole breakout data.</li>
                                <li class="mb-2"><strong>Check Balanced Accuracy.</strong> If below 60%, classification is unreliable. Consider merging rare fracture types or collecting more data.</li>
                                <li class="mb-2"><strong>If using uploaded data:</strong> Check the OOD (distribution) result. If HIGH severity, retrain before using predictions.</li>
                                <li class="mb-2"><strong>Check Calibration.</strong> If POOR, don't use probability values for risk decisions. Use binary yes/no classification instead.</li>
                                <li class="mb-2"><strong>Review the Risk Matrix.</strong> If HIGH risk, escalate to senior geomechanics engineer before proceeding.</li>
                                <li class="mb-2"><strong>Check the Uncertainty Budget.</strong> Pore pressure is consistently the #1 source of uncertainty. If you have measured Pp data, input it to dramatically improve reliability.</li>
                            </ol>
                        </div>
                    </div>
                </div>

                <!-- MLOps Tab -->
                <div id="tab-mlops" class="tab-content">
                    <h5 class="mb-3"><i class="bi bi-gear-wide-connected"></i> Production MLOps Dashboard</h5>

                    <!-- Live Status Bar (auto-refreshes) -->
                    <div class="alert alert-light border d-flex align-items-center justify-content-between py-2 mb-3" id="mlops-status-bar">
                        <div class="d-flex align-items-center gap-3">
                            <span id="mlops-health-dot" class="badge rounded-pill bg-secondary">...</span>
                            <small class="text-muted">Health: <strong id="mlops-health-score">--</strong>/100</small>
                            <small class="text-muted">|</small>
                            <small class="text-muted">Models: <strong id="mlops-model-count">--</strong></small>
                            <small class="text-muted">|</small>
                            <small class="text-muted">Failures: <strong id="mlops-failure-count">--</strong></small>
                            <small class="text-muted">|</small>
                            <small class="text-muted">RLHF Reviews: <strong id="mlops-rlhf-count">--</strong></small>
                        </div>
                        <small class="text-muted" id="mlops-last-refresh">--</small>
                    </div>

                    <!-- System Health -->
                    <div class="card mb-3 border-primary">
                        <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-heart-pulse"></i> System Health</span>
                            <button class="btn btn-sm btn-outline-light" onclick="loadSystemHealth()"><i class="bi bi-arrow-clockwise"></i> Refresh</button>
                        </div>
                        <div class="card-body" id="system-health-result">
                            <p class="text-muted">Loading...</p>
                        </div>
                    </div>

                    <!-- Data Drift Detection -->
                    <div class="card mb-3">
                        <div class="card-header bg-warning text-dark d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-graph-down-arrow"></i> Data Drift Detection</span>
                            <div>
                                <button class="btn btn-sm btn-outline-dark me-1" onclick="runDriftDetection()"><i class="bi bi-search"></i> Check Drift</button>
                                <button class="btn btn-sm btn-outline-secondary" onclick="resetDriftBaseline()"><i class="bi bi-arrow-counterclockwise"></i> Reset Baseline</button>
                            </div>
                        </div>
                        <div class="card-body" id="drift-result">
                            <p class="text-muted">Run drift detection to compare current data against the baseline distribution. Catches silent model degradation.</p>
                        </div>
                    </div>

                    <!-- Model Version Registry -->
                    <div class="card mb-3">
                        <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-tags"></i> Model Version Registry</span>
                            <div class="btn-group btn-group-sm">
                                <button class="btn btn-outline-light" onclick="loadModelRegistry()"><i class="bi bi-list-ul"></i> List</button>
                                <button class="btn btn-outline-light dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                    Actions
                                </button>
                                <ul class="dropdown-menu dropdown-menu-end">
                                    <li><a class="dropdown-item" href="#" onclick="registerModel();return false"><i class="bi bi-plus-circle me-2"></i>Register New Version</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="compareModelVersions();return false"><i class="bi bi-arrow-left-right me-2"></i>Compare Versions</a></li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li><a class="dropdown-item" href="#" onclick="runAbTest();return false"><i class="bi bi-shuffle me-2 text-warning"></i>A/B Test</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="runEnsembleVote();return false"><i class="bi bi-check2-all me-2 text-success"></i>Ensemble Vote</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="card-body" id="model-registry-result">
                            <p class="text-muted">Track model versions, compare performance, and rollback if needed.</p>
                        </div>
                        <div id="ab-test-brief" class="d-none"></div>
                    </div>

                    <!-- Field Stress Integration -->
                    <div class="card mb-3">
                        <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-globe-americas"></i> Multi-Well Field Stress Model</span>
                            <button class="btn btn-sm btn-outline-light" onclick="runFieldStressModel()"><i class="bi bi-play-circle"></i> Integrate Wells</button>
                        </div>
                        <div class="card-body" id="field-stress-result">
                            <p class="text-muted">Combine stress estimates from all wells into a unified field model. Detects structural domain boundaries.</p>
                        </div>
                    </div>

                    <!-- Failure Case Learning -->
                    <div class="card mb-3">
                        <div class="card-header bg-danger text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-exclamation-triangle"></i> Failure Case Learning</span>
                            <div>
                                <button class="btn btn-sm btn-outline-light me-1" onclick="viewFailureAnalysis()"><i class="bi bi-bar-chart"></i> Analyze Patterns</button>
                                <button class="btn btn-sm btn-outline-light" onclick="retrainWithFailures()"><i class="bi bi-lightning"></i> Retrain</button>
                            </div>
                        </div>
                        <div class="card-body" id="failure-analysis-result">
                            <p class="text-muted">Systematically learn from prediction failures. Record wrong predictions, analyze patterns, and retrain with failure-aware weighting.</p>
                        </div>
                    </div>

                    <!-- RLHF Review Queue -->
                    <div class="card mb-3 border-primary">
                        <div class="card-header bg-primary bg-opacity-75 text-white d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-person-check"></i> RLHF Expert Review Queue</span>
                            <div class="btn-group btn-group-sm">
                                <button class="btn btn-outline-light" onclick="loadRlhfQueue()"><i class="bi bi-list-task"></i> Queue</button>
                                <button class="btn btn-outline-light dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false"></button>
                                <ul class="dropdown-menu dropdown-menu-end">
                                    <li><a class="dropdown-item" href="#" onclick="viewRlhfImpact();return false"><i class="bi bi-graph-up me-2"></i>View Impact</a></li>
                                    <li><a class="dropdown-item text-warning fw-bold" href="#" onclick="rlhfRetrain();return false"><i class="bi bi-lightning me-2"></i>Apply & Retrain</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="card-body" id="rlhf-queue-result">
                            <p class="text-muted">Get a prioritized queue of samples for expert review. The system identifies the most uncertain predictions that would benefit most from expert feedback. <strong>This is how AI learns from your expertise.</strong></p>
                        </div>
                    </div>

                    <!-- Batch Analysis -->
                    <div class="card mb-3 border-dark">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-collection"></i> Batch Analysis (All Wells)</span>
                            <button class="btn btn-sm btn-outline-dark" onclick="runBatchAnalysis()"><i class="bi bi-play-fill"></i> Analyze All Wells</button>
                        </div>
                        <div class="card-body" id="batch-result">
                            <p class="text-muted">Run stress inversion + ML classification + data quality across all wells simultaneously. Produces a field-wide summary.</p>
                        </div>
                    </div>

                    <!-- Report Failure Form -->
                    <div class="card mb-3 border-secondary">
                        <div class="card-header"><i class="bi bi-flag"></i> Report a Prediction Failure</div>
                        <div class="card-body">
                            <div class="row g-2">
                                <div class="col-md-3">
                                    <label class="form-label form-label-sm">Failure Type</label>
                                    <select id="failure-type" class="form-select form-select-sm">
                                        <option value="wrong_prediction">Wrong Prediction</option>
                                        <option value="rejected_result">Rejected Result</option>
                                        <option value="suspicious_output">Suspicious Output</option>
                                        <option value="overconfident">Overconfident Wrong</option>
                                        <option value="data_issue">Data Issue</option>
                                    </select>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label form-label-sm">Predicted</label>
                                    <input type="text" id="failure-predicted" class="form-control form-control-sm" placeholder="e.g. Vuggy">
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label form-label-sm">Actual</label>
                                    <input type="text" id="failure-actual" class="form-control form-control-sm" placeholder="e.g. Continuous">
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label form-label-sm">Depth (m)</label>
                                    <input type="number" id="failure-depth" class="form-control form-control-sm" placeholder="e.g. 2950">
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label form-label-sm">Description</label>
                                    <input type="text" id="failure-description" class="form-control form-control-sm" placeholder="What went wrong?">
                                </div>
                            </div>
                            <button class="btn btn-sm btn-danger mt-2" onclick="reportFailure()"><i class="bi bi-flag-fill"></i> Submit Failure Report</button>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <!-- Toast -->
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index:9999">
        <div id="toast" class="toast" role="alert">
            <div class="toast-header">
                <strong class="me-auto" id="toast-title">GeoStress AI</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
            </div>
            <div class="toast-body" id="toast-body"></div>
        </div>
    </div>

    <!-- Floating Help Button -->
    <button class="btn btn-info position-fixed shadow-lg rounded-circle"
            style="bottom:24px;right:24px;width:56px;height:56px;z-index:1050;font-size:1.4rem;"
            data-bs-toggle="modal" data-bs-target="#glossaryModal"
            title="Help: What do these terms mean?">
        <i class="bi bi-question-circle"></i>
    </button>

    <!-- Glossary Modal -->
    <div class="modal fade" id="glossaryModal" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header bg-info bg-opacity-10">
                    <h5 class="modal-title"><i class="bi bi-book"></i> Glossary — Plain Language Guide</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="glossary-body">
                    <p class="text-muted">Loading glossary...</p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
    <script>
    // Initialize AOS animations
    AOS.init({ duration: 600, once: true, offset: 50 });

    // Initialize all Bootstrap tooltips
    document.addEventListener("DOMContentLoaded", function() {
        var ttEls = document.querySelectorAll('[data-bs-toggle="tooltip"]');
        ttEls.forEach(function(el) { new bootstrap.Tooltip(el, {trigger: "hover focus", html: true}); });
    });

    // Sidebar group toggle
    function toggleSidebarGroup(header) {
        var group = header.nextElementSibling;
        if (!group || !group.classList.contains("sidebar-group")) return;
        var arrow = header.querySelector(".sidebar-arrow");
        group.classList.toggle("collapsed");
        if (arrow) {
            arrow.classList.toggle("bi-chevron-right", group.classList.contains("collapsed"));
            arrow.classList.toggle("bi-chevron-down", !group.classList.contains("collapsed"));
        }
    }

    // Auto-expand group when a tab inside it is active
    function expandGroupForTab(tabName) {
        document.querySelectorAll(".sidebar-group").forEach(function(g) {
            var links = g.querySelectorAll("a[data-tab]");
            links.forEach(function(a) {
                if (a.dataset.tab === tabName && g.classList.contains("collapsed")) {
                    g.classList.remove("collapsed");
                    var arrow = g.previousElementSibling.querySelector(".sidebar-arrow");
                    if (arrow) {
                        arrow.classList.remove("bi-chevron-right");
                        arrow.classList.add("bi-chevron-down");
                    }
                }
            });
        });
    }
    </script>
    <script src="/static/js/app.js"></script>
</body>
</html>
